<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>App Prototype - Relevant Radio</title>
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,400;0,600;0,700;1,400&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { background: #1a1a2e; min-height: 100vh; display: flex; align-items: flex-start; justify-content: center; padding: 20px 0 40px; }
    @keyframes waveBar { 0% { transform: scaleY(1); } 35% { transform: scaleY(var(--peak, 1)); } 65% { transform: scaleY(0.5); } 100% { transform: scaleY(1); } }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }
  </style>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useMemo, useEffect, useRef } = React;

    const colors = {
      headerBg: "#3b6fa0",
      cardBg: "#4a7fb3",
      pageBg: "#f5f5f5",
      contentBg: "#ffffff",
      accent: "#3b6fa0",
      text: "#2a2a2a",
      textMuted: "#7a7a7a",
      red: "#d32f2f",
      searchBg: "rgba(255,255,255,0.15)",
      searchBgLight: "#f0f0f0",
    };

    // ═══ WATCH TAB — DESIGN TOKENS ═══
    const wC = {
      bg: "#F5F5F7", surface: "#F5F5F7", card: "#FFFFFF",
      border: "rgba(0,0,0,0.08)",
      gold: "#B8922E", goldSoft: "rgba(184,146,46,0.08)", goldText: "#8A6D1B",
      prayerAccent: "#2E7D4C",
      live: "#D43333", liveSoft: "rgba(212,51,51,0.05)", liveBg: "#FEF2F2",
      text1: "#1A1A1A", text2: "#6B6B6B", text3: "#9A9A9A", text4: "#C8C8C8",
      newBadge: "#1A6B3A", newBadgeSoft: "rgba(26,107,58,0.08)",
      shadow: "0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04)",
      shadowMd: "0 4px 12px rgba(0,0,0,0.06), 0 1px 3px rgba(0,0,0,0.04)",
    };

    const audiobooks = {
      spiritual: [
        { id: "s1", title: "Mary at the Crossroads of History", author: "Fr. Francis J. Hoffman", narrator: "Fr. Francis J. Hoffman", duration: "3h 38m", color: "#1a3a5c", image: "covers/mary-at-the-crossroads.png",
          summary: "Adam and Eve, our first parents, had free will, and their choices set in motion the entire drama of salvation history. This audiobook traces the thread of Mary's role from Genesis through Revelation, showing how the Blessed Mother stands at every crossroads of human history as a guide, intercessor, and model of faith.",
          credits: { producer: "Michael Torres", director: "Sarah Chen", editor: "James Whitfield", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
        { id: "s2", title: "Confessions", author: "St. Augustine of Hippo", narrator: "Demetrios Troy", duration: "12h 45m", color: "#5c3a1a", image: "covers/confessions.jpg",
          summary: "One of the most influential works in Western literature, the Confessions traces Augustine's spiritual journey from his sinful youth through his conversion to Christianity. Written as a prayer to God, this autobiography reveals the inner struggles of a brilliant mind wrestling with truth, desire, and grace.",
          credits: { producer: "Michael Torres", director: "Sarah Chen", editor: "Demetrios Troy", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
        { id: "s3", title: "The Interior Castle", author: "St. Teresa of Ávila", narrator: "Maria Santos", duration: "6h 12m", color: "#3a1a5c", image: "covers/interior-castle.jpg",
          summary: "St. Teresa of Ávila's masterpiece of mystical theology describes the soul as a castle with seven dwelling places, each representing a stage of spiritual growth. Written for her Carmelite sisters, this work remains one of the most practical and profound guides to the interior life ever composed.",
          credits: { producer: "Michael Torres", director: "James Whitfield", editor: "Maria Santos", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
        { id: "s4", title: "Introduction to the Devout Life", author: "St. Francis de Sales", narrator: "James Whitfield", duration: "8h 30m", color: "#1a5c3a", image: "covers/introduction-devout-life.jpg",
          summary: "Written originally as a series of letters of spiritual direction, St. Francis de Sales composed this timeless guide to show that holiness is possible for everyone, not just monks and nuns. Practical, warm, and deeply human, it covers prayer, the sacraments, temptation, and the virtues needed for daily Christian living.",
          credits: { producer: "Sarah Chen", director: "Michael Torres", editor: "James Whitfield", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
        { id: "s5", title: "Story of a Soul", author: "St. Thérèse of Lisieux", narrator: "Catherine Hart", duration: "5h 55m", color: "#5c1a3a", image: "covers/story-of-a-soul.jpg",
          summary: "The autobiography of St. Thérèse of Lisieux, written under obedience to her religious superiors, reveals her 'Little Way' of spiritual childhood — a path to holiness through small acts of love and trust in God's mercy. This intimate account became one of the most widely read spiritual books of the twentieth century.",
          credits: { producer: "Michael Torres", director: "Sarah Chen", editor: "Catherine Hart", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
      ],
      fiction: [
        { id: "f1", title: "Brideshead Revisited", author: "Evelyn Waugh", narrator: "James Whitfield", duration: "11h 20m", color: "#2a5a2a", image: "covers/brideshead-revisited.jpg",
          summary: "Charles Ryder's enchantment with the aristocratic Flyte family and their crumbling estate, Brideshead, weaves a story of memory, beauty, faith, and the relentless pursuit of grace. Waugh's masterpiece explores how God works through even the most broken and resistant souls.",
          credits: { producer: "Michael Torres", director: "Sarah Chen", editor: "James Whitfield", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
        { id: "f2", title: "The Power and the Glory", author: "Graham Greene", narrator: "Demetrios Troy", duration: "7h 15m", color: "#4a2a1a", image: "covers/power-and-the-glory.jpg",
          summary: "Set during the anti-clerical purges in 1930s Mexico, Greene's novel follows an unnamed 'whiskey priest' — the last remaining clergyman in the state — as he flees persecution while struggling with his own sinfulness. A devastating portrait of grace operating through human weakness.",
          credits: { producer: "Sarah Chen", director: "Michael Torres", editor: "Demetrios Troy", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
        { id: "f3", title: "Kristin Lavransdatter", author: "Sigrid Undset", narrator: "Catherine Hart", duration: "18h 40m", color: "#1a3a5c", image: "covers/kristin-lavransdatter.jpg",
          summary: "Nobel Prize-winning epic set in medieval Norway, following Kristin from her sheltered childhood through a passionate and often turbulent marriage, motherhood, and ultimately a life transformed by faith. Undset's trilogy is one of the great Catholic novels of the twentieth century.",
          credits: { producer: "Michael Torres", director: "James Whitfield", editor: "Catherine Hart", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
        { id: "f4", title: "The Lord of the Rings", author: "J.R.R. Tolkien", narrator: "Martin Shaw", duration: "22h 30m", color: "#3a2a1a", image: "covers/lord-of-the-rings.png",
          summary: "Tolkien's epic tale of hobbits, elves, and the struggle against darkness is fundamentally a Catholic work — a story of providence, sacrifice, mercy, and the power of the small and humble to change the course of history. The greatest fantasy novel ever written, brought to life in audio.",
          credits: { producer: "Michael Torres", director: "Sarah Chen", editor: "Martin Shaw", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
      ],
    };

    const allBooks = [...audiobooks.spiritual, ...audiobooks.fiction];

    const continueListeningData = [
      { book: audiobooks.spiritual[1], progress: 65, timeLeft: "4h 28m" },   // Confessions
      { book: audiobooks.fiction[0], progress: 30, timeLeft: "7h 56m" },     // Brideshead Revisited
      { book: audiobooks.spiritual[4], progress: 85, timeLeft: "53m" },      // Story of a Soul
      { book: audiobooks.fiction[2], progress: 12, timeLeft: "16h 25m" },    // Kristin Lavransdatter
    ];

    // ═══ WATCH TAB — DATA ═══
    const WATCH_SERIES = [
      { id: "daily-mass", title: "Holy Mass", subtitle: "Live from the Chapel", episodes: 180, category: "Prayer", gradient: "linear-gradient(170deg, #7A6B52 0%, #5C4F3A 60%, #3D3528 100%)", description: "Daily Mass celebrated live from the Relevant Radio Chapel. Join us every day at 12:00 PM CT.", host: "Fr. Rocky", isLive: true, liveTime: "12:00 PM CT" },
      { id: "family-rosary", title: "Family Rosary Across America", subtitle: "Pray together every evening", episodes: 230, category: "Prayer", gradient: "linear-gradient(170deg, #5B6B4F 0%, #3F5233 60%, #2A3B22 100%)", description: "Join Fr. Rocky and the Relevant Radio family for the nightly Rosary. Live every evening at 7:00 PM CT.", host: "Fr. Rocky", isLive: true, liveTime: "7:00 PM CT" },
      { id: "divine-mercy", title: "The Divine Mercy Chaplet", subtitle: "The Hour of Mercy", episodes: 160, category: "Prayer", gradient: "linear-gradient(170deg, #4F6275 0%, #3A4F63 60%, #253A4D 100%)", description: "Pray the Divine Mercy Chaplet live every day at 3:00 PM CT — the Hour of Mercy.", host: "Drew Mariani", isLive: true, liveTime: "3:00 PM CT" },
      { id: "fulton-sheen", title: "Life Is Worth Living", subtitle: "The classic television series", episodes: 60, category: "Catechesis", gradient: "linear-gradient(140deg, #E8E4F0, #D0C8E0)", description: "The legendary Bishop Fulton J. Sheen in his iconic television series.", host: "Bp. Fulton Sheen" },
      { id: "lenten-mass", title: "Lenten Lessons on the Mass", subtitle: "Fr. Rocky's teaching series", episodes: 40, category: "Catechesis", gradient: "linear-gradient(140deg, #EDE6F5, #D8CEE8)", description: "A structured 40-lesson catechetical journey through the Mass with Fr. Rocky.", host: "Fr. Rocky" },
      { id: "lenten-sacraments", title: "Lenten Lessons on the Sacraments", subtitle: "Fr. Rocky's teaching series", episodes: 40, category: "Catechesis", gradient: "linear-gradient(140deg, #E6EDF5, #CED8E8)", description: "A 40-lesson deep dive into the seven sacraments with Fr. Rocky.", host: "Fr. Rocky" },
      { id: "eucharistic-encounters", title: "Eucharistic Encounters", subtitle: "Fr. Rocky on the Real Presence", episodes: 12, category: "Catechesis", gradient: "linear-gradient(140deg, #F0E8DC, #E0D4C0)", description: "Fr. Rocky explores the mystery and beauty of the Real Presence.", host: "Fr. Rocky" },
      { id: "5min-homilies", title: "5-Minute Homilies", subtitle: "Weekly Sunday reflections", episodes: 50, category: "Catechesis", gradient: "linear-gradient(140deg, #E4F0E8, #D0E8DC)", description: "Short, powerful homilies for every Sunday of the year.", host: "Various Priests" },
      { id: "into-the-breach", title: "Into the Breach", subtitle: "A call to Catholic men", episodes: 8, category: "Formation", gradient: "linear-gradient(140deg, #E8E4E0, #D8D0C8)", description: "Knights of Columbus film series challenging Catholic men to step into the breach.", host: "Knights of Columbus" },
      { id: "patrick-madrid", title: "Patrick Madrid", subtitle: "Apologetics & Catholic Living", episodes: 10, category: "Shows", gradient: "linear-gradient(140deg, #F0E8E4, #E0D4CC)", description: "Curated apologetics talks from The Patrick Madrid Show.", host: "Patrick Madrid" },
      { id: "vatican-today", title: "The Vatican Today", subtitle: "Weekly news from Rome", episodes: 4, category: "Shows", gradient: "linear-gradient(140deg, #D8E4F0, #C0D0E8)", description: "Weekly 27-minute news analysis from the heart of the Church.", host: "Relevant Radio" },
      { id: "drew-mariani", title: "Drew Mariani Show", subtitle: "Faith, culture & current events", episodes: 35, category: "Shows", gradient: "linear-gradient(140deg, #E4E8F0, #D0D8E8)", description: "Clips from The Drew Mariani Show.", host: "Drew Mariani" },
      { id: "timmerie", title: "Trending with Timmerie", subtitle: "Catholic femininity & culture", episodes: 22, category: "Shows", gradient: "linear-gradient(140deg, #F0E4E8, #E8D0D8)", description: "Clips from Trending with Timmerie.", host: "Timmerie Millington" },
      { id: "seek-2026", title: "SEEK 2026", subtitle: "Full conference talks", episodes: 24, category: "Conferences", gradient: "linear-gradient(140deg, #E8E0F0, #D8D0E8)", description: "Every keynote and breakout from SEEK 2026.", host: "FOCUS" },
      { id: "seek-2025", title: "SEEK 2025", subtitle: "Keynote sessions", episodes: 9, category: "Conferences", gradient: "linear-gradient(140deg, #E0D8F0, #D0C8E0)", description: "Keynote recordings from SEEK 2025.", host: "FOCUS" },
      { id: "pray-film", title: "Pray: The Story of Patrick Peyton", subtitle: "Feature documentary", episodes: 1, category: "Documentaries", gradient: "linear-gradient(140deg, #D8D4CC, #C0BCB4)", description: "The inspiring true story of Father Patrick Peyton, the rosary priest who brought prayer to millions through media.", host: "Holy Cross Ministries" },
      { id: "mother-teresa", title: "Mother Teresa: No Greater Love", subtitle: "Feature documentary", episodes: 1, category: "Documentaries", gradient: "linear-gradient(140deg, #E4DCD0, #D0C8BC)", description: "An unprecedented, exclusive look into the life and work of Mother Teresa, featuring never-before-seen footage and interviews.", host: "Knights of Columbus" },
      { id: "face-of-mercy", title: "The Face of Mercy", subtitle: "Feature documentary", episodes: 1, category: "Documentaries", gradient: "linear-gradient(140deg, #DCD8D0, #C8C4BC)", description: "A powerful film exploring Divine Mercy through the lives of saints, miracles, and personal testimonies.", host: "Knights of Columbus" },
      { id: "apparition-hill", title: "Apparition Hill", subtitle: "Feature documentary", episodes: 1, category: "Documentaries", gradient: "linear-gradient(140deg, #E0DCD4, #C8C0B4)", description: "Five strangers with varying beliefs travel to Medjugorje to investigate the alleged Marian apparitions.", host: "Holy Cross Ministries" },
      { id: "the-quest", title: "The Quest", subtitle: "University of Dallas series", episodes: 11, category: "Formation", gradient: "linear-gradient(140deg, #E8E0D4, #D4CCB8)", description: "An 11-episode academic series from the University of Dallas.", host: "University of Dallas" },
    ];

    const WATCH_PRAYERS = [
      { id: "mass", seriesId: "daily-mass", label: "Daily Mass", shortLabel: "Mass", time: "12:00 PM", startHour: 12, startMin: 0, durationMin: 45, detail: "Live from the Chapel", hostInitials: "FR", photoGrad: "linear-gradient(170deg, #7A6B52 0%, #5C4F3A 60%, #3D3528 100%)", photo: "visual_elements/watch_tab/prayer_strip_mass.jpg" },
      { id: "chaplet", seriesId: "divine-mercy", label: "Divine Mercy", shortLabel: "Chaplet", time: "3:00 PM", startHour: 15, startMin: 0, durationMin: 20, detail: "The Hour of Mercy", hostInitials: "DM", photoGrad: "linear-gradient(170deg, #4F6275 0%, #3A4F63 60%, #253A4D 100%)", photo: "visual_elements/watch_tab/prayer_strip_divine_mercy.jpg" },
      { id: "rosary", seriesId: "family-rosary", label: "Family Rosary Across America", shortLabel: "Rosary", time: "7:00 PM", startHour: 19, startMin: 0, durationMin: 25, detail: "Luminous Mysteries", hostInitials: "FR", photoGrad: "linear-gradient(170deg, #5B6B4F 0%, #3F5233 60%, #2A3B22 100%)", photo: "visual_elements/watch_tab/prayer_strip_family_rosary.jpeg" },
    ];

    const WATCH_CATEGORIES = ["All", "Prayer", "Shows", "Catechesis", "Formation", "Conferences", "Documentaries"];

    function getWatchLiveState(h, m) {
      const now = h * 60 + m;
      const live = WATCH_PRAYERS.filter(p => { const s = p.startHour * 60 + p.startMin; return now >= s && now < s + p.durationMin; });
      return live.length > 0 ? live[0] : null;
    }
    function getWatchCountdown(p, h, m) {
      const now = h * 60 + m, s = p.startHour * 60 + p.startMin, end = s + p.durationMin;
      if (now >= s && now < end) return { text: "Streaming now", isLive: true, isPast: false };
      if (now >= end) return { text: "Tomorrow " + p.time, isLive: false, isPast: true };
      const diff = s - now, hr = Math.floor(diff / 60), mn = diff % 60;
      return { text: hr > 0 ? "Starts in " + hr + "h " + mn + "m" : "Starts in " + mn + "m", isLive: false, isPast: false };
    }

    const waveHeights = [40, 70, 100, 60, 30];
    const wavePeaks = waveHeights.map(h => (100 / h).toFixed(3));
    const StaticWaveform = ({ animating }) => (
      <div style={{ display: "flex", alignItems: "center", gap: 2.5, height: 16 }}>
        {waveHeights.map((h, i) => (
          <div key={i} style={{ width: 2.2, height: `${h}%`, background: "#fff", borderRadius: 1.5, transformOrigin: "center",
            ...(animating ? { animation: `waveBar 0.45s ease-in-out ${i * 0.07}s both`, '--peak': wavePeaks[i] } : {}) }} />
        ))}
      </div>
    );

    const SearchBar = ({ value, onChange, placeholder, variant = "light" }) => {
      const isLight = variant === "light";
      return (
        <div style={{
          display: "flex", alignItems: "center", gap: 10, padding: "10px 14px", borderRadius: 10,
          background: isLight ? colors.searchBgLight : colors.searchBg, margin: "0 20px",
        }}>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke={isLight ? colors.textMuted : "rgba(255,255,255,0.5)"} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <circle cx="11" cy="11" r="8" /><line x1="21" y1="21" x2="16.65" y2="16.65" />
          </svg>
          <input type="text" value={value} onChange={(e) => onChange(e.target.value)} placeholder={placeholder}
            style={{ background: "none", border: "none", outline: "none", fontFamily: "'DM Sans', sans-serif", fontSize: 13, color: isLight ? colors.text : "#fff", width: "100%" }} />
          {value && (
            <div onClick={() => onChange("")} style={{
              width: 20, height: 20, borderRadius: "50%", background: isLight ? "#ddd" : "rgba(255,255,255,0.2)",
              display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer", fontSize: 10,
              color: isLight ? colors.textMuted : "rgba(255,255,255,0.6)",
            }}>✕</div>
          )}
        </div>
      );
    };

    const SquareCover = ({ book, onClick }) => (
      <div style={{ flexShrink: 0, width: 140, cursor: "pointer" }} onClick={onClick}>
        <div style={{
          width: 140, height: 140, borderRadius: 10, position: "relative", overflow: "hidden",
          boxShadow: "0 4px 14px rgba(0,0,0,0.2)", background: book.color,
        }}>
          <img src={book.image} alt={book.title} style={{ width: "100%", height: "100%", objectFit: "cover", display: "block" }} />
        </div>
        <div style={{ marginTop: 8, fontFamily: "'DM Sans', sans-serif", fontSize: 11, color: colors.text, fontWeight: 500, lineHeight: 1.3, display: "-webkit-box", WebkitLineClamp: 2, WebkitBoxOrient: "vertical", overflow: "hidden" }}>{book.title}</div>
        <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, color: colors.textMuted, marginTop: 2 }}>Narrated by {book.narrator}</div>
      </div>
    );

    const ContinueListeningItem = ({ book, progress, timeLeft, onClick }) => (
      <div onClick={onClick} style={{ display: "flex", gap: 8, cursor: "pointer", padding: "6px 10px 6px 6px", background: "#fff", borderRadius: 8, boxShadow: "0 1px 4px rgba(0,0,0,0.08)", minWidth: 0, overflow: "hidden" }}>
        <div style={{ width: 44, height: 44, borderRadius: 5, flexShrink: 0, overflow: "hidden", background: book.color }}>
          <img src={book.image} alt={book.title} style={{ width: "100%", height: "100%", objectFit: "cover", display: "block" }} />
        </div>
        <div style={{ flex: 1, minWidth: 0, display: "flex", flexDirection: "column", justifyContent: "space-between" }}>
          <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: colors.text, fontWeight: 600, lineHeight: 1.3, display: "-webkit-box", WebkitLineClamp: 2, WebkitBoxOrient: "vertical", overflow: "hidden" }}>{book.title}</div>
          <div style={{ display: "flex", alignItems: "center", gap: 5 }}>
            <div style={{ flex: 1, height: 5, background: "#e0e0e0", borderRadius: 3, overflow: "hidden" }}>
              <div style={{ height: "100%", width: `${progress}%`, background: "#2e7d32", borderRadius: 3 }} />
            </div>
            <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 10, color: colors.textMuted, whiteSpace: "nowrap", flexShrink: 0 }}>{timeLeft} left</span>
          </div>
        </div>
      </div>
    );

    const GridCover = ({ book, onClick }) => (
      <div style={{ width: "calc(50% - 7px)", cursor: "pointer", marginBottom: 18 }} onClick={onClick}>
        <div style={{
          width: "100%", paddingBottom: "100%", borderRadius: 10, position: "relative", overflow: "hidden",
          boxShadow: "0 4px 14px rgba(0,0,0,0.2)", background: book.color,
        }}>
          <img src={book.image} alt={book.title} style={{ position: "absolute", inset: 0, width: "100%", height: "100%", objectFit: "cover" }} />
        </div>
        <div style={{ marginTop: 8, fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: colors.text, fontWeight: 500, lineHeight: 1.3, display: "-webkit-box", WebkitLineClamp: 2, WebkitBoxOrient: "vertical", overflow: "hidden" }}>{book.title}</div>
        <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, color: colors.textMuted, marginTop: 2 }}>Narrated by {book.narrator}</div>
      </div>
    );

    const SearchResultItem = ({ book, onClick }) => (
      <div onClick={onClick} style={{ display: "flex", gap: 12, padding: "10px 20px", cursor: "pointer", borderBottom: "1px solid #f0f0f0" }}>
        <div style={{ width: 50, height: 50, borderRadius: 8, flexShrink: 0, overflow: "hidden", background: book.color }}>
          <img src={book.image} alt={book.title} style={{ width: "100%", height: "100%", objectFit: "cover", display: "block" }} />
        </div>
        <div style={{ flex: 1, minWidth: 0 }}>
          <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 13, color: colors.text, fontWeight: 600, whiteSpace: "nowrap", overflow: "hidden", textOverflow: "ellipsis" }}>{book.title}</div>
          <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 11, color: colors.textMuted, marginTop: 2 }}>{book.author}</div>
          <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 10, color: colors.textMuted, marginTop: 1 }}>{book.duration} · {book.narrator}</div>
        </div>
        <div style={{ display: "flex", alignItems: "center" }}>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke={colors.textMuted} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="9 18 15 12 9 6" /></svg>
        </div>
      </div>
    );

    const HorizontalRow = ({ title, subtitle, books, onSeeAll, onBookClick }) => (
      <div style={{ marginBottom: 8 }}>
        <div style={{ marginBottom: 10, padding: "0 20px" }}>
          <div style={{ display: "flex", justifyContent: "space-between", alignItems: "baseline" }}>
            <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 19, fontWeight: 700, color: colors.text, letterSpacing: -0.3 }}>{title}</div>
            <div onClick={onSeeAll} style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 11, color: colors.accent, fontWeight: 600, cursor: "pointer", letterSpacing: 0.3 }}>See All →</div>
          </div>
          {subtitle && <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 11, color: colors.textMuted, marginTop: 2 }}>{subtitle}</div>}
        </div>
        <div style={{ display: "flex", gap: 14, overflowX: "auto", padding: "0 20px 8px", scrollbarWidth: "none", msOverflowStyle: "none" }}>
          {books.map((book, i) => <SquareCover key={i} book={book} onClick={() => onBookClick(book)} />)}
        </div>
      </div>
    );

    const TitleDetailPage = ({ book, onBack, onSuggest }) => (
      <div style={{ overflowY: "auto", height: "100%", paddingBottom: 140, scrollbarWidth: "none" }}>
        <div style={{
          background: "linear-gradient(180deg, #0b1e33 0%, #0f2d50 35%, #1e4d7a 65%, #3b6fa0 100%)",
          padding: "16px 20px 44px", display: "flex", flexDirection: "column", alignItems: "center",
        }}>
          <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", width: "100%", marginBottom: 20 }}>
            <div onClick={onBack} style={{ width: 34, height: 34, borderRadius: "50%", background: "rgba(255,255,255,0.2)", display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer" }}>
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#fff" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><polyline points="15 18 9 12 15 6" /></svg>
            </div>
            <div style={{ width: 34, height: 34, borderRadius: "50%", background: "rgba(255,255,255,0.2)", display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer" }}>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#fff" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" /><polyline points="16 6 12 2 8 6" /><line x1="12" y1="2" x2="12" y2="15" /></svg>
            </div>
          </div>
          <div style={{ width: 180, height: 180, borderRadius: 12, overflow: "hidden", boxShadow: "0 8px 30px rgba(0,0,0,0.35)", background: book.color }}>
            <img src={book.image} alt={book.title} style={{ width: "100%", height: "100%", objectFit: "cover", display: "block" }} />
          </div>
          <div style={{ marginTop: 16, padding: "6px 18px", borderRadius: 20, border: "1.5px solid rgba(255,255,255,0.4)", cursor: "pointer", display: "flex", alignItems: "center", gap: 6 }}>
            <span style={{ fontSize: 10, color: "#fff" }}>▶</span>
            <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: "#fff", fontWeight: 500 }}>Preview</span>
          </div>
          <h2 style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 24, fontWeight: 700, color: "#fff", textAlign: "center", margin: "16px 0 4px", lineHeight: 1.2 }}>{book.title}</h2>
          <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 13, color: "rgba(255,255,255,0.6)" }}>{book.duration}</span>
          <div style={{ display: "flex", marginTop: 16, width: "100%", justifyContent: "center" }}>
            <div style={{ textAlign: "center", flex: 1, borderRight: "1px solid rgba(255,255,255,0.2)", paddingRight: 16 }}>
              <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, color: "rgba(255,255,255,0.5)", letterSpacing: 1, textTransform: "uppercase", marginBottom: 4 }}>By</div>
              <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 13, color: "#fff", fontWeight: 500 }}>{book.author}</div>
            </div>
            <div style={{ textAlign: "center", flex: 1, paddingLeft: 16 }}>
              <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, color: "rgba(255,255,255,0.5)", letterSpacing: 1, textTransform: "uppercase", marginBottom: 4 }}>Narrated By</div>
              <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 13, color: "#fff", fontWeight: 500 }}>{book.narrator}</div>
            </div>
          </div>
          <div style={{
            marginTop: 22, padding: "13px 0", borderRadius: 30, background: "#fff", textAlign: "center",
            cursor: "pointer", width: "82%", boxShadow: "0 3px 14px rgba(0,0,0,0.25)",
          }}>
            <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 14, color: "#111", fontWeight: 700, display: "flex", alignItems: "center", justifyContent: "center", gap: 8 }}>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="#111"><path d="M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z"/></svg>
              Create Free Account to Listen
            </span>
          </div>
        </div>
        <div style={{ background: colors.contentBg, borderRadius: "20px 20px 0 0", marginTop: -20, position: "relative", zIndex: 2, padding: "24px 20px", boxShadow: "0 -6px 20px rgba(0,0,0,0.12)" }}>
          <div style={{ marginBottom: 24 }}>
            <h3 style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 18, fontWeight: 700, color: colors.text, margin: "0 0 10px" }}>Summary</h3>
            <p style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 13, color: colors.textMuted, lineHeight: 1.65, margin: 0 }}>{book.summary}</p>
          </div>
          <div style={{ height: 1, background: "#e8e8e8", margin: "0 0 24px" }} />
          <div>
            <h3 style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 18, fontWeight: 700, color: colors.text, margin: "0 0 16px" }}>Details & Credits</h3>
            {[
              { label: "Producer", value: book.credits.producer },
              { label: "Director", value: book.credits.director },
              { label: "Audio Editor", value: book.credits.editor },
              { label: "Sound Design", value: book.credits.sound },
              { label: "Music", value: book.credits.music },
              { label: "Production", value: book.credits.project },
            ].map((credit, i) => (
              <div key={i} style={{
                display: "flex", justifyContent: "space-between", alignItems: "center",
                padding: "10px 0", borderBottom: i < 5 ? "1px solid #f0f0f0" : "none",
              }}>
                <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: colors.textMuted }}>{credit.label}</span>
                <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: colors.text, fontWeight: 500 }}>{credit.value}</span>
              </div>
            ))}
          </div>
          <div style={{ height: 1, background: "#e8e8e8", margin: "24px 0" }} />
          <div>
            <h3 style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 18, fontWeight: 700, color: colors.text, margin: "0 0 14px" }}>You Might Also Enjoy</h3>
            <div style={{ display: "flex", gap: 14 }}>
              {allBooks.filter(b => b.id !== book.id).sort(() => Math.random() - 0.5).slice(0, 2).map((rec, i) => (
                <div key={i} onClick={() => onSuggest(rec)} style={{ flex: 1, cursor: "pointer" }}>
                  <div style={{
                    width: "100%", paddingBottom: "100%", borderRadius: 10, position: "relative", overflow: "hidden",
                    boxShadow: "0 4px 14px rgba(0,0,0,0.2)", background: rec.color,
                  }}>
                    <img src={rec.image} alt={rec.title} style={{ position: "absolute", inset: 0, width: "100%", height: "100%", objectFit: "cover" }} />
                  </div>
                  <div style={{ marginTop: 8, fontFamily: "'DM Sans', sans-serif", fontSize: 11, color: colors.text, fontWeight: 500, lineHeight: 1.3, display: "-webkit-box", WebkitLineClamp: 2, WebkitBoxOrient: "vertical", overflow: "hidden" }}>{rec.title}</div>
                  <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, color: colors.textMuted, marginTop: 2 }}>{rec.duration}</div>
                </div>
              ))}
            </div>
          </div>
        </div>
      </div>
    );

    const PageHeader = ({ title, onBack, rightElement }) => (
      <div style={{ background: "#4485bc" }}>
        <div style={{ display: "flex", alignItems: "center", gap: 12, padding: "16px 20px 14px" }}>
          <div onClick={onBack} style={{
            width: 32, height: 32, borderRadius: "50%", background: "rgba(255,255,255,0.2)",
            display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer",
          }}>
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#fff" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><polyline points="15 18 9 12 15 6" /></svg>
          </div>
          <h1 style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 24, fontWeight: 700, color: "#fff", margin: 0, letterSpacing: -0.3, flex: 1 }}>{title}</h1>
          {rightElement}
        </div>
      </div>
    );

    const WireBox = ({ width, height, label, style: extraStyle = {} }) => (
      <div style={{
        width, height, background: "#e8e8e8", border: "1.5px solid #d0d0d0",
        borderRadius: 8, display: "flex", alignItems: "center", justifyContent: "center",
        flexShrink: 0, ...extraStyle,
      }}>
        {label && <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, color: "#b0b0b0", letterSpacing: 0.5 }}>{label}</span>}
      </div>
    );

    const bannerImages = [
      "visual_elements/home_screen_banner_1.PNG",
      "visual_elements/home_screen_banner_3.png",
      "visual_elements/home_screen_banner_4.PNG",
      "visual_elements/home_screen_banner_5.PNG",
    ];

    const articleImages = [
      "visual_elements/home_screen_article.PNG",
      "visual_elements/home_screen_article_2.png",
      "visual_elements/home_screen_article_3.png",
    ];

    const articleData = [
      { title: "Lent 2025: A Journey of Renewal", source: "Relevant Radio", image: "visual_elements/home_screen_article.PNG" },
      { title: "Pope Leo XIV Announces Year of Prayer", source: "Vatican News", image: "visual_elements/home_screen_article_2.png" },
      { title: "Why More Young Adults Are Returning to the Faith", source: "Relevant Radio", image: "visual_elements/home_screen_article_3.png" },
    ];

    const HomeScreen = ({ triggerLive, homeDemoLive, onPlayVideo, articleDesign }) => {
      const [bannerIdx, setBannerIdx] = useState(0);
      const [articleIdx, setArticleIdx] = useState(0);
      const touchStartX = useRef(null);
      const articleTouchX = useRef(null);

      useEffect(() => {
        const timer = setInterval(() => {
          setBannerIdx(i => (i + 1) % bannerImages.length);
        }, 5000);
        return () => clearInterval(timer);
      }, []);

      return (
      <div style={{ overflowY: "auto", height: "100%", paddingBottom: 184, scrollbarWidth: "none", background: colors.pageBg }} className="hide-scrollbar">

        {/* Rotating Promotional Banner Carousel — hidden when live card is showing */}
        {!homeDemoLive && <div
          onTouchStart={e => { touchStartX.current = e.touches[0].clientX; }}
          onTouchEnd={e => {
            if (touchStartX.current === null) return;
            const diff = touchStartX.current - e.changedTouches[0].clientX;
            if (Math.abs(diff) > 40) {
              if (diff > 0) setBannerIdx(i => (i + 1) % bannerImages.length);
              else setBannerIdx(i => (i - 1 + bannerImages.length) % bannerImages.length);
            }
            touchStartX.current = null;
          }}
          style={{ cursor: "pointer", overflow: "hidden" }}
        >
          <img src={bannerImages[bannerIdx]} alt="Promotional banner" style={{ width: "100%", display: "block" }} />
        </div>}

        {/* Now Praying — live card (demo toggle only) */}
        {homeDemoLive && (<>
          <div style={{ padding: "14px 18px 12px" }}>
            <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 26, fontWeight: 800, color: "#1a1a1a", letterSpacing: -0.5 }}>Now Praying</div>
          </div>
          <div style={{ padding: "0 16px" }}>
            <div onClick={() => onPlayVideo("Luminous Mysteries", "Family Rosary Across America", true)}
              style={{ borderRadius: 16, overflow: "hidden", cursor: "pointer", background: wC.liveBg, border: "1px solid rgba(212,51,51,0.12)", boxShadow: wC.shadow }}>
              <div style={{ height: 170, position: "relative", display: "flex", alignItems: "center", justifyContent: "center", overflow: "hidden" }}>
                <video src="visual_elements/FRAA-clip.mp4" autoPlay loop muted playsInline style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} />
                <div style={{ width: 56, height: 56, borderRadius: "50%", background: wC.live, display: "flex", alignItems: "center", justifyContent: "center", boxShadow: "0 4px 16px rgba(212,51,51,0.25)", position: "relative", zIndex: 1 }}>
                  <WatchPlayFill size={24} />
                </div>
                <div style={{ position: "absolute", top: 12, right: 12, display: "flex", alignItems: "center", gap: 5, background: wC.live, borderRadius: 20, padding: "4px 12px" }}>
                  <div style={{ width: 6, height: 6, borderRadius: "50%", background: "#fff", animation: "pulse 2s ease-in-out infinite" }} />
                  <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 10, fontWeight: 800, color: "#fff", letterSpacing: 1 }}>LIVE</span>
                </div>
              </div>
              <div style={{ padding: "14px 16px 16px", background: homeDemoLive === "blue" ? "#009fe0" : homeDemoLive === "darkblue" ? "#105187" : "#fff" }}>
                <h2 style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 20, fontWeight: 800, color: homeDemoLive === "white" ? wC.text1 : "#fff", letterSpacing: -0.3 }}>Family Rosary Across America</h2>
                <p style={{ margin: "4px 0 0", fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: homeDemoLive === "white" ? wC.live : "#fff", fontWeight: 500 }}>Fr. Rocky · Streaming now</p>
              </div>
            </div>
          </div>
        </>)}

        {/* Featured Tiles Row */}
        <div style={{ padding: "10px 10px 0" }}>
          <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 16, fontWeight: 700, color: "#1a1a1a", marginBottom: 6 }}>Featured</div>
          <div style={{ display: "flex", gap: 8 }}>
            {[
              { label: "Listen Live", image: "rr_shows/morning_air.jpg" },
              { label: "Lent with the Sai...", image: "rr_shows/lent_with_the_saints.jpeg" },
              { label: "Lenten Lessons on the Mass", image: "rr_shows/lenten_lessons_on_the_mass.png" },
            ].map((tile, i) => (
              <div key={i} onClick={tile.label === "Listen Live" ? triggerLive : undefined} style={{ flex: 1, cursor: "pointer", minWidth: 0 }}>
                <div style={{ width: "100%", paddingBottom: "100%", borderRadius: 10, overflow: "hidden", boxShadow: "0 2px 8px rgba(0,0,0,0.12)", position: "relative" }}>
                  <img src={tile.image} alt={tile.label} style={{ position: "absolute", inset: 0, width: "100%", height: "100%", objectFit: "cover", display: "block" }} />
                </div>
                <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 12, fontWeight: 500, color: colors.text, marginTop: 5, lineHeight: 1.3, overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap" }}>{tile.label}</div>
              </div>
            ))}
          </div>
        </div>

        {/* Hero Article Card — 3 design variants */}
        {(() => {
          const swipeHandlers = {
            onTouchStart: e => { articleTouchX.current = e.touches[0].clientX; },
            onTouchEnd: e => {
              if (articleTouchX.current === null) return;
              const diff = articleTouchX.current - e.changedTouches[0].clientX;
              if (Math.abs(diff) > 40) {
                if (diff > 0) setArticleIdx(i => (i + 1) % articleData.length);
                else setArticleIdx(i => (i - 1 + articleData.length) % articleData.length);
              }
              articleTouchX.current = null;
            }
          };
          const dotsRow = (
            <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", padding: "8px 12px" }}>
              <div style={{ display: "flex", gap: 6 }}>
                {articleData.map((_, i) => (
                  <div key={i} onClick={() => setArticleIdx(i)} style={{ width: 8, height: 8, borderRadius: "50%", background: i === articleIdx ? "#d32f2f" : "#ccc", cursor: "pointer" }} />
                ))}
              </div>
              <div style={{ display: "flex", alignItems: "center", gap: 5, cursor: "pointer" }}>
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke={colors.textMuted} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg>
                <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 11, fontWeight: 600, color: colors.textMuted, letterSpacing: 0.3 }}>VIEW ALL</span>
              </div>
            </div>
          );
          const art = articleData[articleIdx];

          /* ─── Option A: Current design — full-width image carousel ─── */
          if (articleDesign === 0) return (
            <div style={{ marginTop: 14 }}>
              <div {...swipeHandlers} style={{ cursor: "pointer" }}>
                <img src={art.image} alt="Featured article" style={{ width: "100%", display: "block" }} />
              </div>
              {dotsRow}
            </div>
          );

          /* ─── Option B: Card with title on top, image below ─── */
          const articlesHeader = <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 16, fontWeight: 700, color: "#1a1a1a", marginBottom: 8 }}>Articles</div>;
          if (articleDesign === 1) return (
            <div style={{ marginTop: 14, padding: "0 10px" }}>
              {articlesHeader}
              <div {...swipeHandlers} style={{ borderRadius: 16, overflow: "hidden", background: "#fff", boxShadow: "0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04)", cursor: "pointer" }}>
                <div style={{ padding: "16px 16px 10px" }}>
                  <h3 style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 18, fontWeight: 800, color: "#1a1a1a", lineHeight: 1.3, height: 47, overflow: "hidden" }}>{art.title}</h3>
                  <p style={{ margin: "4px 0 0", fontFamily: "'DM Sans', sans-serif", fontSize: 11, color: colors.textMuted, fontWeight: 500 }}>{art.source} · 3 min read</p>
                </div>
                <img src={art.image} alt={art.title} style={{ width: "100%", display: "block" }} />
              </div>
              {dotsRow}
            </div>
          );

          /* ─── Option C: Card modeled after the Now Praying live card ─── */
          if (articleDesign === 2) return (
            <div style={{ marginTop: 14, padding: "0 16px" }}>
              {articlesHeader}
              <div {...swipeHandlers} style={{ borderRadius: 16, overflow: "hidden", background: "#fff", boxShadow: wC.shadow, border: "1px solid " + wC.border, cursor: "pointer" }}>
                <div style={{ height: 170, position: "relative", overflow: "hidden" }}>
                  <img src={art.image} alt={art.title} style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} />
                </div>
                <div style={{ padding: "14px 16px 16px" }}>
                  <h3 style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 20, fontWeight: 800, color: wC.text1, letterSpacing: -0.3, height: 52, overflow: "hidden" }}>{art.title}</h3>
                  <p style={{ margin: "4px 0 0", fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: wC.text2, fontWeight: 500 }}>{art.source} · 3 min read</p>
                </div>
              </div>
              {dotsRow}
            </div>
          );

          /* ─── Option D: Stacked horizontal cards — image left, text right ─── */
          return (
            <div style={{ marginTop: 14, padding: "0 10px" }}>
              {articlesHeader}
              <div style={{ display: "flex", flexDirection: "column", gap: 8 }}>
                {articleData.map((a, i) => (
                  <div key={i} style={{ display: "flex", borderRadius: 12, overflow: "hidden", background: "#fff", boxShadow: "0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04)", cursor: "pointer" }}>
                    <div style={{ width: 120, flexShrink: 0, position: "relative", overflow: "hidden" }}>
                      <img src={a.image} alt={a.title} style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} />
                    </div>
                    <div style={{ padding: "12px 14px", display: "flex", flexDirection: "column", justifyContent: "center", minHeight: 80 }}>
                      <h3 style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 14, fontWeight: 700, color: "#1a1a1a", lineHeight: 1.3 }}>{a.title}</h3>
                      <p style={{ margin: "4px 0 0", fontFamily: "'DM Sans', sans-serif", fontSize: 11, color: colors.textMuted, fontWeight: 500 }}>{a.source} · 3 min read</p>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          );
        })()}

      </div>
    );
    };

    // ═══ WATCH TAB — ICONS ═══
    const WatchSearchIcon = ({ size = 16 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round"><circle cx="11" cy="11" r="8" /><line x1="21" y1="21" x2="16.65" y2="16.65" /></svg>
    );
    const WatchPlayFill = ({ size = 20, color = "#fff" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none"><path d="M8 5.14v13.72a1 1 0 001.5.86l11.04-6.86a1 1 0 000-1.72L9.5 4.28A1 1 0 008 5.14z" fill={color} /></svg>
    );

    // ═══ WATCH TAB — PRIMITIVES ═══
    const WatchProgressBar = ({ progress }) => {
      if (!progress || progress <= 0) return null;
      return (
        <div style={{ position: "absolute", bottom: 0, left: 0, right: 0, height: 3, background: "rgba(0,0,0,0.15)" }}>
          <div style={{ width: (Math.min(progress, 1) * 100) + "%", height: "100%", background: wC.gold, borderRadius: "0 2px 2px 0" }} />
        </div>
      );
    };

    // ═══ WATCH TAB — BADGE, EPISODE CARD, SECTION HEADER, SCROLL ROW ═══
    const WATCH_BADGE_STYLES = {
      live: { bg: wC.live, color: "#fff", label: "LIVE", dot: true },
      upnext: { bg: "rgba(46,125,76,0.85)", color: "#fff", label: "UP NEXT" },
      new: { bg: "rgba(26,107,58,0.85)", color: "#fff", label: "NEW" },
    };
    const WatchBadge = ({ type }) => {
      if (!type || !WATCH_BADGE_STYLES[type]) return null;
      const s = WATCH_BADGE_STYLES[type];
      return (
        <div style={{ position: "absolute", top: 6, right: 6, display: "flex", alignItems: "center", gap: 3, background: s.bg, borderRadius: 20, padding: "2px 8px" }}>
          {s.dot && <div style={{ width: 5, height: 5, borderRadius: "50%", background: "#fff", animation: "pulse 2s ease-in-out infinite" }} />}
          <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 7, fontWeight: 700, color: s.color, letterSpacing: 0.5 }}>{s.label}</span>
        </div>
      );
    };

    const WatchEpisodeCard = ({ series, title, duration, badge, progress, color, image, onClick }) => (
      <div onClick={onClick} style={{ flexShrink: 0, width: 155, borderRadius: 12, overflow: "hidden", background: wC.card, border: "1px solid " + wC.border, boxShadow: wC.shadow, cursor: "pointer" }}>
        <div style={{ aspectRatio: "16/9", background: color || wC.surface, display: "flex", alignItems: "center", justifyContent: "center", position: "relative" }}>
          {image && <img src={image} style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} />}
          {!image && <WatchPlayFill size={16} color="rgba(0,0,0,0.08)" />}
          <WatchBadge type={badge} />
          <WatchDurationStamp duration={duration} />
          <WatchProgressBar progress={progress} />
        </div>
        <div style={{ padding: "8px 10px 10px" }}>
          {series && <p style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 8, fontWeight: 700, color: wC.text3, letterSpacing: 0.6, textTransform: "uppercase" }}>{series}</p>}
          <p style={{ margin: series ? "2px 0 0" : 0, fontFamily: "'DM Sans', sans-serif", fontSize: 11, fontWeight: 700, color: wC.text1, lineHeight: 1.25, overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap" }}>{title}</p>
        </div>
      </div>
    );

    const WatchSectionHeader = ({ title, right, onRightClick }) => (
      <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", padding: "0 16px", marginBottom: 8 }}>
        <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 18, fontWeight: 800, color: wC.text1 }}>{title}</span>
        {right && <div onClick={onRightClick} style={{ display: "flex", alignItems: "center", gap: 2, fontFamily: "'DM Sans', sans-serif", color: wC.text3, fontSize: 11, fontWeight: 600, cursor: "pointer" }}>{right}</div>}
      </div>
    );

    const WatchSeriesCard = ({ title, subtitle, host, episodes, gradient, badge, image, onClick }) => (
      <div onClick={onClick} style={{ flexShrink: 0, width: 220, borderRadius: 12, overflow: "hidden", background: wC.card, border: "1px solid " + wC.border, boxShadow: wC.shadow, cursor: "pointer" }}>
        <div style={{ aspectRatio: "16/9", background: gradient || wC.surface, display: "flex", alignItems: "center", justifyContent: "center", position: "relative" }}>
          {image && <img src={image} style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} />}
          {!image && <WatchPlayFill size={22} color="rgba(0,0,0,0.08)" />}
          <WatchBadge type={badge} />
        </div>
        <div style={{ padding: "10px 12px 12px" }}>
          {host && <p style={{ margin: "0 0 2px", fontFamily: "'DM Sans', sans-serif", fontSize: 9, fontWeight: 700, color: wC.text3, letterSpacing: 0.5, textTransform: "uppercase", overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap" }}>{host}</p>}
          <p style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 14, fontWeight: 700, color: wC.text1, lineHeight: 1.2, overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap" }}>{title}</p>
          {episodes && <p style={{ margin: "3px 0 0", fontFamily: "'DM Sans', sans-serif", fontSize: 10, color: wC.text3 }}>{episodes} {episodes === 1 ? "episode" : "episodes"}</p>}
        </div>
      </div>
    );

    const WatchScrollRow = ({ children }) => (
      <div style={{ display: "flex", gap: 10, overflowX: "auto", padding: "0 16px 4px", scrollbarWidth: "none" }} className="hide-scrollbar">{children}</div>
    );

    // ═══ WATCH TAB — HERO BILLBOARD ═══
    const HERO_SLIDES = [
      { title: "Lenten Lessons on the Mass", subtitle: "Fr. Rocky · 40 episodes", gradient: "linear-gradient(140deg, #EDE6F5, #D8CEE8)", seriesId: "lenten-mass", image: "visual_elements/watch_tab/LLOTM_v1_SERIES_CARD.jpg" },
      { title: "Life Is Worth Living", subtitle: "Fulton Sheen · Ep. 4 of 12", gradient: "linear-gradient(140deg, #E8E4F0, #D0C8E0)", seriesId: "fulton-sheen", isContinue: true, progress: 0.65, image: "visual_elements/watch_tab/fulton_sheen.png" },
      { title: "Into the Breach", subtitle: "Knights of Columbus · Ep. 2 of 8", gradient: "linear-gradient(140deg, #E8E4E0, #D8D0C8)", seriesId: "into-the-breach", isContinue: true, progress: 0.38, image: "visual_elements/watch_tab/into_the_breach.png" },
    ];

    const HeroBillboard = ({ liveNow, liveStyle, onTapSeries, onPlayVideo }) => {
      const [hover, setHover] = useState(false);
      const [activeSlide, setActiveSlide] = useState(0);

      // Live mode
      if (liveNow) {
        return (
          <div style={{ padding: "0 16px" }}>
            <div onClick={() => onPlayVideo && onPlayVideo(liveNow.detail, liveNow.label, true)} onMouseEnter={() => setHover(true)} onMouseLeave={() => setHover(false)}
              style={{ borderRadius: 16, overflow: "hidden", cursor: "pointer", background: wC.liveBg, border: "1px solid rgba(212,51,51,0.12)", boxShadow: hover ? wC.shadowMd : wC.shadow, transition: "all 0.2s" }}>
              <div style={{ height: 170, position: "relative", background: "linear-gradient(140deg, #F5E8E8, #E8DDDD)", display: "flex", alignItems: "center", justifyContent: "center", overflow: "hidden" }}>
                {(SERIES_IMAGES[liveNow.seriesId]?.[0] || liveNow.photo) && <img src={SERIES_IMAGES[liveNow.seriesId]?.[0] || liveNow.photo} style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} />}
                <div style={{ width: 56, height: 56, borderRadius: "50%", background: wC.live, display: "flex", alignItems: "center", justifyContent: "center", boxShadow: "0 4px 16px rgba(212,51,51,0.25)", transform: hover ? "scale(1.06)" : "scale(1)", transition: "transform 0.15s", position: "relative", zIndex: 1 }}>
                  <WatchPlayFill size={24} />
                </div>
                <div style={{ position: "absolute", top: 12, right: 12, display: "flex", alignItems: "center", gap: 5, background: wC.live, borderRadius: 20, padding: "4px 12px" }}>
                  <div style={{ width: 6, height: 6, borderRadius: "50%", background: "#fff", animation: "pulse 2s ease-in-out infinite" }} />
                  <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 10, fontWeight: 800, color: "#fff", letterSpacing: 1 }}>LIVE</span>
                </div>
              </div>
              <div style={{ padding: "14px 16px 16px", background: liveStyle === "blue" ? "#009fe0" : liveStyle === "darkblue" ? "#105187" : "#fff" }}>
                <h2 style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 20, fontWeight: 800, color: liveStyle === "white" ? wC.text1 : "#fff", letterSpacing: -0.3 }}>{liveNow.label}</h2>
                <p style={{ margin: "4px 0 0", fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: liveStyle === "white" ? wC.live : "#fff", fontWeight: 500 }}>{liveNow.detail} · Streaming now</p>
              </div>
            </div>
          </div>
        );
      }

      // Carousel mode
      const slide = HERO_SLIDES[activeSlide];
      return (
        <div style={{ padding: "0 16px" }}>
          <div style={{ position: "relative" }}>
            <div onClick={() => onTapSeries(slide.seriesId)} onMouseEnter={() => setHover(true)} onMouseLeave={() => setHover(false)}
              style={{ borderRadius: 16, overflow: "hidden", cursor: "pointer", background: wC.card, border: "1px solid " + wC.border, boxShadow: hover ? wC.shadowMd : wC.shadow, transition: "all 0.2s" }}>
              <div style={{ height: 170, position: "relative", background: slide.gradient, display: "flex", alignItems: "center", justifyContent: "center", transition: "background 0.4s" }}>
                {slide.image && <img src={slide.image} style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} />}
                <div style={{ width: 56, height: 56, borderRadius: "50%", background: slide.isContinue ? "rgba(0,0,0,0.45)" : slide.image ? "rgba(0,0,0,0.35)" : "rgba(0,0,0,0.06)", border: slide.isContinue || slide.image ? "none" : "1.5px solid rgba(0,0,0,0.08)", display: "flex", alignItems: "center", justifyContent: "center", transform: hover ? "scale(1.06)" : "scale(1)", transition: "transform 0.15s", position: "relative", zIndex: 1 }}>
                  <WatchPlayFill size={22} color={slide.isContinue || slide.image ? "#fff" : "rgba(0,0,0,0.25)"} />
                </div>
                {slide.isContinue && (
                  <div style={{ position: "absolute", top: 12, right: 12, background: "rgba(0,0,0,0.55)", borderRadius: 20, padding: "4px 12px", backdropFilter: "blur(4px)" }}>
                    <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, fontWeight: 700, color: "#fff", letterSpacing: 0.5 }}>CONTINUE</span>
                  </div>
                )}
                {slide.isContinue && slide.progress && <WatchProgressBar progress={slide.progress} />}
              </div>
              <div style={{ padding: "14px 16px 16px" }}>
                <h2 style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 20, fontWeight: 800, color: wC.text1, letterSpacing: -0.3 }}>{slide.title}</h2>
                <p style={{ margin: "4px 0 0", fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: wC.text2 }}>{slide.subtitle}</p>
              </div>
            </div>
            <div style={{ display: "flex", justifyContent: "center", gap: 6, marginTop: 10 }}>
              {HERO_SLIDES.map((_, i) => (
                <div key={i} onClick={(e) => { e.stopPropagation(); setActiveSlide(i); }}
                  style={{ width: activeSlide === i ? 18 : 6, height: 6, borderRadius: 3, background: activeSlide === i ? wC.gold : wC.text4, cursor: "pointer", transition: "all 0.25s" }} />
              ))}
            </div>
          </div>
        </div>
      );
    };

    // ═══ WATCH TAB — PRAYER CARDS (3-STATE STRIP) ═══
    const WatchPrayerCards = ({ simHour, simMin, onTapSeries, reminders, toggleReminder }) => {

      return (
        <div style={{ padding: "0 16px" }}>
          <div style={{ marginBottom: 8 }}>
            <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 18, fontWeight: 800, color: wC.text1 }}>Live Daily Prayer</span>
            <p style={{ margin: "2px 0 0", fontFamily: "'DM Sans', sans-serif", fontSize: 12, fontWeight: 500, color: wC.text2 }}>Pray live with your Catholic family</p>
          </div>
          <div style={{ display: "flex", gap: 8, alignItems: "flex-start" }}>
            {WATCH_PRAYERS.map(p => {
              const st = getWatchCountdown(p, simHour, simMin);
              const rem = reminders[p.id];
              const stripState = st.isLive ? "live" : rem ? "set" : "unset";

              return (
                <div key={p.id} style={{ flex: 1, display: "flex", flexDirection: "column" }}>
                  {/* Card: thumbnail + title row */}
                  <div onClick={() => onTapSeries(p.seriesId)} style={{ borderRadius: "12px 12px 0 0", overflow: "hidden", background: "#fff", border: "1px solid " + (st.isLive ? "rgba(212,51,51,0.18)" : wC.border), borderBottom: "none", boxShadow: st.isLive ? "0 2px 8px rgba(212,51,51,0.1)" : wC.shadow, cursor: "pointer", transition: "all 0.25s" }}>
                    <div style={{ height: 72, position: "relative", background: p.photoGrad, display: "flex", alignItems: "center", justifyContent: "center", overflow: "hidden" }}>
                      {p.photo ? <img src={p.photo} style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} /> : <div style={{ fontSize: 22, fontWeight: 700, color: "rgba(255,255,255,0.25)", fontFamily: "'DM Sans', sans-serif", position: "absolute", top: "50%", left: "50%", transform: "translate(-50%, -50%)" }}>{p.hostInitials}</div>}
                    </div>
                    <div style={{ padding: "7px 8px 8px" }}>
                      <p style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 14, fontWeight: 800, color: wC.text1, letterSpacing: -0.2, lineHeight: 1.1 }}>{p.shortLabel}</p>
                      <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 11, fontWeight: 600, color: st.isLive ? wC.live : wC.text2, marginTop: 2, display: "block" }}>{st.isLive ? "● Live Now" : p.time}</span>
                    </div>
                  </div>

                  {/* Strip: 3 states */}
                  {stripState === "live" ? (
                    <div onClick={() => onTapSeries(p.seriesId)} style={{ background: wC.live, borderRadius: "0 0 12px 12px", border: "1px solid " + wC.live, borderTop: "none", padding: "6px 6px 7px", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", gap: 5, minHeight: 36, transition: "all 0.25s" }}>
                      <div style={{ width: 10, height: 10, borderRadius: "50%", background: "#fff", animation: "pulse 2s ease-in-out infinite", flexShrink: 0 }} />
                      <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 12, fontWeight: 800, color: "#fff", lineHeight: 1, textTransform: "uppercase", letterSpacing: 0.5 }}>Live</span>
                    </div>
                  ) : stripState === "set" ? (
                    <div onClick={(e) => toggleReminder(p.id, e)} style={{ background: "rgba(46,125,76,0.1)", borderRadius: "0 0 12px 12px", border: "1px solid rgba(46,125,76,0.25)", borderTop: "1px solid rgba(46,125,76,0.25)", padding: "6px 6px 7px", cursor: "pointer", display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center", gap: 3, transition: "all 0.25s" }}>
                      <svg width={20} height={20} viewBox="0 0 24 24" fill={wC.prayerAccent} stroke={wC.prayerAccent} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9" /><path d="M13.73 21a2 2 0 01-3.46 0" /></svg>
                      <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 11, fontWeight: 700, color: wC.prayerAccent, lineHeight: 1, width: "100%", textAlign: "center" }}>Reminder set</span>
                    </div>
                  ) : (
                    <div onClick={(e) => toggleReminder(p.id, e)} style={{ background: wC.goldSoft, borderRadius: "0 0 12px 12px", border: "1px solid rgba(184,146,46,0.18)", borderTop: "1px dashed rgba(184,146,46,0.25)", padding: "6px 6px 7px", cursor: "pointer", display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center", gap: 3, transition: "all 0.25s" }}>
                      <svg width={20} height={20} viewBox="0 0 24 24" fill="none" stroke={wC.goldText} strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9" /><path d="M13.73 21a2 2 0 01-3.46 0" /></svg>
                      <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 11, fontWeight: 700, color: wC.goldText, lineHeight: 1, width: "100%", textAlign: "center" }}>Remind me</span>
                    </div>
                  )}
                </div>
              );
            })}
          </div>
        </div>
      );
    };

    // ═══ WATCH TAB — ALL SERIES PAGE ═══
    const WatchChevLeft = ({ size = 22 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><polyline points="15 18 9 12 15 6" /></svg>
    );

    const AllSeriesPage = ({ onBack, onTapSeries }) => {
      const [activeCategory, setActiveCategory] = useState("All");
      const [searchQuery, setSearchQuery] = useState("");
      const filtered = WATCH_SERIES.filter(s => {
        const matchCat = activeCategory === "All" || s.category === activeCategory;
        const matchSearch = searchQuery === "" || s.title.toLowerCase().includes(searchQuery.toLowerCase());
        return matchCat && matchSearch;
      });

      return (
        <div style={{ height: "100%", display: "flex", flexDirection: "column", background: wC.bg }}>
          <div style={{ padding: "14px 18px 0" }}>
            <div style={{ display: "flex", alignItems: "center", gap: 10, marginBottom: 14 }}>
              <div onClick={onBack} style={{ cursor: "pointer", color: wC.text1, display: "flex", alignItems: "center" }}><WatchChevLeft size={22} /></div>
              <h1 style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 22, fontWeight: 800, color: wC.text1, letterSpacing: -0.3 }}>All Series</h1>
            </div>
            <div style={{ display: "flex", alignItems: "center", gap: 8, background: wC.surface, borderRadius: 10, padding: "8px 12px", border: "1px solid " + wC.border, marginBottom: 12 }}>
              <WatchSearchIcon size={15} />
              <input type="text" placeholder="Search series..." value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} style={{ border: "none", background: "transparent", outline: "none", fontSize: 13, fontFamily: "'DM Sans', sans-serif", color: wC.text1, width: "100%" }} />
            </div>
            <div style={{ display: "flex", gap: 6, overflowX: "auto", paddingBottom: 12, scrollbarWidth: "none" }} className="hide-scrollbar">
              {WATCH_CATEGORIES.map(cat => (
                <button key={cat} onClick={() => setActiveCategory(cat)} style={{ flexShrink: 0, padding: "6px 14px", borderRadius: 20, fontSize: 11, fontWeight: 600, fontFamily: "'DM Sans', sans-serif", cursor: "pointer", background: activeCategory === cat ? wC.text1 : wC.surface, color: activeCategory === cat ? "#fff" : wC.text2, border: "1px solid " + (activeCategory === cat ? wC.text1 : wC.border), transition: "all 0.2s" }}>{cat}</button>
              ))}
            </div>
          </div>
          <div style={{ flex: 1, overflowY: "auto", padding: "0 16px 16px", scrollbarWidth: "none" }} className="hide-scrollbar">
            <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 10 }}>
              {filtered.map(s => (
                <div key={s.id} onClick={() => onTapSeries(s.id)} style={{ borderRadius: 12, overflow: "hidden", background: wC.card, border: "1px solid " + wC.border, boxShadow: wC.shadow, cursor: "pointer" }}>
                  <div style={{ aspectRatio: "16/9", background: s.gradient, display: "flex", alignItems: "center", justifyContent: "center", position: "relative" }}>
                    {SERIES_IMAGES[s.id] && SERIES_IMAGES[s.id][0] && <img src={SERIES_IMAGES[s.id][0]} style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} />}
                    {!(SERIES_IMAGES[s.id] && SERIES_IMAGES[s.id][0]) && <WatchPlayFill size={18} color="rgba(0,0,0,0.08)" />}
                  </div>
                  <div style={{ padding: "8px 10px 10px" }}>
                    {s.host && <p style={{ margin: "0 0 2px", fontFamily: "'DM Sans', sans-serif", fontSize: 8, fontWeight: 700, color: wC.text3, letterSpacing: 0.5, textTransform: "uppercase", overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap" }}>{s.host}</p>}
                    <p style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 12, fontWeight: 700, color: wC.text1, lineHeight: 1.2, overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap" }}>{s.title}</p>
                    <p style={{ margin: "3px 0 0", fontFamily: "'DM Sans', sans-serif", fontSize: 9, color: wC.text3 }}>{s.episodes} {s.episodes === 1 ? "episode" : "episodes"}</p>
                  </div>
                </div>
              ))}
            </div>
            {filtered.length === 0 && <p style={{ textAlign: "center", fontFamily: "'DM Sans', sans-serif", fontSize: 13, color: wC.text3, marginTop: 40 }}>No series found</p>}
          </div>
        </div>
      );
    };

    // ═══ WATCH TAB — EPISODE GENERATOR ═══
    function generateEpisodes(series) {
      const eps = [];
      const baseDate = new Date(2026, 1, 22);
      const titles = {
        "fulton-sheen": ["Life Is Worth Living", "The Meaning of Love", "War & Peace", "The Role of Conscience", "How to Think", "Science & Faith", "The Divine Sense of Humor", "Three Kinds of Love"],
        "family-rosary": ["Luminous Mysteries", "Sorrowful Mysteries", "Glorious Mysteries", "Joyful Mysteries"],
        "daily-mass": ["Tuesday of the 7th Week", "Monday of the 7th Week", "7th Sunday in Ordinary Time", "Saturday of the 6th Week", "Friday of the 6th Week", "Thursday of the 6th Week"],
        "patrick-madrid": ["Confession Q&A", "Defending the Faith", "Marriage & Family", "Sola Scriptura Debunked", "Why Be Catholic?", "The Real Presence", "Purgatory Explained"],
        "5min-homilies": ["Sunday Feb 22", "Sunday Feb 15", "Sunday Feb 8", "Sunday Feb 1", "Sunday Jan 25", "Sunday Jan 18"],
        "vatican-today": ["Pope Leo's Lenten Message", "Synod Follow-Up Report", "Vatican-China Agreement Update", "New Cardinals Announced"],
        "the-quest": ["Trailer", "The Good", "The True", "The Beautiful", "Justice", "Courage", "Temperance", "Prudence", "Faith", "Hope", "Love"],
        "virtuous-leadership": ["Introduction", "Prudence in Leadership", "Justice & Accountability", "Fortitude Under Pressure", "Temperance & Balance", "Faith & Vision", "Hope & Resilience", "Charity & Service", "The Integrated Leader"],
        "pray-film": ["Pray: The Story of Patrick Peyton"],
        "mother-teresa": ["Mother Teresa: No Greater Love"],
        "face-of-mercy": ["The Face of Mercy"],
        "apparition-hill": ["Apparition Hill"],
        "eucharistic-encounters": ["The Bread of Life Discourse", "Eucharistic Miracles", "St. Thomas Aquinas on the Eucharist", "The Mass of the Early Church", "Adoration Through the Ages", "Corpus Christi", "Real Presence in Scripture", "The Saints & the Eucharist", "Transubstantiation Explained", "Eucharistic Revival", "The Tabernacle", "Living Eucharistically"],
        "lenten-mass": ["The Entrance", "The Sign of the Cross", "The Greeting", "The Penitential Act", "The Gloria", "The Collect", "The First Reading", "The Responsorial Psalm"],
        "lenten-sacraments": ["Baptism: The Door", "Confirmation: The Seal", "Eucharist: Source and Summit", "Reconciliation: Mercy", "Anointing of the Sick", "Holy Orders", "Matrimony", "The Sacramental Life"],
      };
      const list = titles[series.id] || ["Episode"];
      for (let i = 0; i < Math.min(series.episodes, 15); i++) {
        const d = new Date(baseDate); d.setDate(d.getDate() - (series.id === "vatican-today" ? i * 7 : i));
        const docIds = ["pray-film","mother-teresa","face-of-mercy","apparition-hill"];
        const mins = series.id === "5min-homilies" ? 5 : series.id === "family-rosary" ? 25 : series.id === "daily-mass" ? 42 : series.id === "divine-mercy" ? 18 : series.id === "vatican-today" ? 27 : docIds.includes(series.id) ? (75 + Math.floor(Math.random() * 30)) : Math.floor(Math.random() * 25) + 8;
        const secs = Math.floor(Math.random() * 59);
        eps.push({ id: series.id + "-" + i, title: list[i % list.length], date: d.toLocaleDateString("en-US", { month: "short" }) + " " + d.getDate(), duration: mins + ":" + String(secs).padStart(2, "0"), progress: i === 1 ? 0.65 : i === 2 ? 1.0 : 0, episodeNum: series.episodes - i });
      }
      return eps;
    }

    // ═══ WATCH TAB — SERIES DETAIL PAGE ═══
    const WatchShareIcon = ({ size = 14 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8" /><polyline points="16 6 12 2 8 6" /><line x1="12" y1="2" x2="12" y2="15" /></svg>
    );
    const WatchBellIcon = ({ active, size = 14 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill={active ? "currentColor" : "none"} stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9" /><path d="M13.73 21a2 2 0 01-3.46 0" /></svg>
    );
    const WatchDurationStamp = ({ duration }) => {
      if (!duration) return null;
      return (<div style={{ position: "absolute", bottom: 5, right: 5, background: "rgba(0,0,0,0.5)", borderRadius: 4, padding: "3px 5px", lineHeight: 1, display: "flex", alignItems: "center" }}><span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 8, fontWeight: 600, color: "#fff" }}>{duration}</span></div>);
    };

    // ═══ SERIES IMAGE MAP ═══
    const SERIES_IMAGES = {
      "daily-mass": ["visual_elements/watch_tab/Daily_Mass.jpeg"],
      "family-rosary": ["visual_elements/watch_tab/Family_Rosary.jpeg"],
      "divine-mercy": ["visual_elements/watch_tab/Divine_Mercy_Chaplet.jpeg"],
      "fulton-sheen": ["visual_elements/watch_tab/fulton_sheen.png"],
      "lenten-mass": ["visual_elements/watch_tab/LLOTM_Video-Lesson1-1280x720-v3 1.jpg","visual_elements/watch_tab/LLOTM_Video-Lesson2-1280x720-v2 1.jpg","visual_elements/watch_tab/LLOTM_Video-Lesson3-1280x720-v2 1.jpg","visual_elements/watch_tab/LLOTM_Video-Lesson4-1280x720-v2 1.jpg","visual_elements/watch_tab/LLOTM_Video-Lesson5-1280x720-v2 1.jpg","visual_elements/watch_tab/LLOTM_Video-Lesson6-1280x720-v2 1.jpg"],
      "lenten-sacraments": ["visual_elements/watch_tab/LLOTS.png"],
      "eucharistic-encounters": ["visual_elements/watch_tab/EE.png","visual_elements/watch_tab/NEC content 1.png","visual_elements/watch_tab/NEC content 2.png","visual_elements/watch_tab/NEC content 3.png"],
      "5min-homilies": ["visual_elements/watch_tab/5-MinuteHomilies_HowAquinasConqueredLust_v2 1.png","visual_elements/watch_tab/5-MinuteHomilies_MaybeICanGetAMiracleToo_v2 1.png","visual_elements/watch_tab/5-MinuteHomilies_BeGenerousInSowingTheSeed_v2 1.png","visual_elements/watch_tab/5-MinuteHomilies_HigherDutiesOfCharityThanMass_v2 1.png","visual_elements/watch_tab/5-MinuteHomilies_ProLifeActivityAndTheHolyEucharist_v2 1.png","visual_elements/watch_tab/5-MinuteHomilies_HowMuchIsASoulWorth_v2 1.png"],
      "into-the-breach": ["visual_elements/watch_tab/into_the_breach.png"],
      "patrick-madrid": ["visual_elements/watch_tab/PatrickMadrid_v1.jpg"],
      "vatican-today": ["visual_elements/watch_tab/vatican_today.png","visual_elements/watch_tab/pope_leo.png"],
      "seek-2026": ["visual_elements/watch_tab/SEEK_2026.jpg","visual_elements/watch_tab/SEEK1.png","visual_elements/watch_tab/SEEK2.png","visual_elements/watch_tab/SEEK3.png","visual_elements/watch_tab/SEEK4.png"],
      "seek-2025": ["visual_elements/watch_tab/SEEK_2026.jpg"],
      "pray-film": ["visual_elements/watch_tab/PatrickPayton_Pray.jpg"],
      "mother-teresa": ["visual_elements/watch_tab/MotherTeresa_NoGreaterLove.jpg"],
      "face-of-mercy": ["visual_elements/watch_tab/FaceofMercy.jpg"],
      "apparition-hill": ["visual_elements/watch_tab/ApparitionHill.jpg"],
    };

    const SeriesDetailPage = ({ series, onBack, onPlayVideo }) => {
      const [subscribed, setSubscribed] = useState(series.isLive || false);
      const episodes = useMemo(() => generateEpisodes(series), [series.id]);
      const seriesImgs = SERIES_IMAGES[series.id] || [];
      const getEpImg = (i) => seriesImgs.length > 0 ? seriesImgs[i % seriesImgs.length] : null;

      return (
        <div style={{ height: "100%", background: wC.bg, overflowY: "auto", scrollbarWidth: "none" }} className="hide-scrollbar">
          {/* Hero Banner */}
          <div style={{ position: "relative", aspectRatio: "16/9", background: series.gradient, display: "flex", alignItems: "flex-end", padding: "0 18px 14px", overflow: "hidden" }}>
            {seriesImgs[0] && <img src={seriesImgs[0]} style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} />}
            <div style={{ position: "absolute", inset: 0, background: "linear-gradient(to top, rgba(0,0,0,0.5), transparent 60%)" }} />
            <div onClick={onBack} style={{ position: "absolute", top: 12, left: 12, width: 32, height: 32, borderRadius: "50%", background: "rgba(255,255,255,0.8)", backdropFilter: "blur(4px)", display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer", zIndex: 2 }}><WatchChevLeft size={18} /></div>
            <div style={{ position: "absolute", top: 12, right: 12, width: 32, height: 32, borderRadius: "50%", background: "rgba(255,255,255,0.8)", backdropFilter: "blur(4px)", display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer", color: wC.text2, zIndex: 2 }}><WatchShareIcon size={14} /></div>
            {series.isLive && (<div style={{ position: "absolute", top: 12, left: "50%", transform: "translateX(-50%)", display: "flex", alignItems: "center", gap: 5, background: wC.live, borderRadius: 6, padding: "4px 10px", zIndex: 2 }}>
              <div style={{ width: 5, height: 5, borderRadius: "50%", background: "#fff", animation: "pulse 2s ease-in-out infinite" }} />
              <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, fontWeight: 800, color: "#fff", letterSpacing: 0.5 }}>LIVE DAILY · {series.liveTime}</span>
            </div>)}
          </div>
          {/* Sticky Title Bar */}
          <div style={{ position: "sticky", top: 0, zIndex: 10, background: wC.bg, padding: "10px 18px", display: "flex", alignItems: "center", gap: 10, borderBottom: "1px solid " + wC.border }}>
            <div onClick={onBack} style={{ width: 28, height: 28, borderRadius: "50%", background: wC.surface, border: "1px solid " + wC.border, display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer", flexShrink: 0 }}><WatchChevLeft size={14} /></div>
            <h1 style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 16, fontWeight: 800, color: wC.text1, overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap" }}>{series.title}</h1>
          </div>
          {/* Series Info + Subscribe */}
          <div style={{ padding: "14px 18px 0" }}>
            <p style={{ margin: "2px 0 0", fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: wC.text2 }}>{series.host}</p>
            <p style={{ margin: "8px 0 0", fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: wC.text3, lineHeight: 1.5 }}>{series.description}</p>
            <div style={{ display: "flex", gap: 8, marginTop: 12 }}>
              {["patrick-madrid","vatican-today","drew-mariani","timmerie","family-rosary","daily-mass","divine-mercy","5min-homilies","lenten-mass","lenten-sacraments"].includes(series.id) && (
              <button onClick={() => setSubscribed(!subscribed)} style={{ display: "flex", alignItems: "center", gap: 5, padding: "8px 16px", borderRadius: 20, cursor: "pointer", fontFamily: "'DM Sans', sans-serif", background: subscribed ? wC.goldSoft : wC.text1, color: subscribed ? wC.goldText : "#fff", border: subscribed ? "1px solid rgba(184,146,46,0.2)" : "1px solid transparent", fontSize: 12, fontWeight: 700 }}>
                <WatchBellIcon active={subscribed} size={14} />{subscribed ? "Subscribed" : "Subscribe"}
              </button>)}
              <div style={{ display: "flex", alignItems: "center", gap: 4, padding: "8px 14px", borderRadius: 20, fontFamily: "'DM Sans', sans-serif", background: wC.surface, border: "1px solid " + wC.border, fontSize: 11, color: wC.text3 }}>{series.episodes} {series.episodes === 1 ? "episode" : "episodes"}</div>
            </div>
            <div style={{ height: 1, background: wC.border, margin: "14px 0 10px" }} />
            {/* Continue Watching within series */}
            {(() => {
              const inProgress = episodes.filter(ep => ep.progress > 0 && ep.progress < 1);
              if (inProgress.length === 0) return null;
              return (<div style={{ margin: "0 0 12px" }}>
                <p style={{ margin: "0 0 8px", fontFamily: "'DM Sans', sans-serif", fontSize: 11, fontWeight: 700, color: wC.text3, letterSpacing: 1, textTransform: "uppercase" }}>Continue Watching</p>
                {inProgress.map(ep => (
                  <div key={ep.id} onClick={() => onPlayVideo && onPlayVideo(ep.title, series.title, series.isLive)} style={{ borderRadius: 10, background: wC.card, border: "1px solid " + wC.border, boxShadow: wC.shadow, cursor: "pointer", marginBottom: 6 }}>
                    <div style={{ display: "flex", gap: 12, padding: 10 }}>
                      <div style={{ width: 120, height: 68, borderRadius: 8, flexShrink: 0, background: series.gradient, position: "relative", display: "flex", alignItems: "center", justifyContent: "center", overflow: "hidden" }}>
                        {getEpImg(episodes.indexOf(ep)) && <img src={getEpImg(episodes.indexOf(ep))} style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} />}
                        <div style={{ width: 32, height: 32, borderRadius: "50%", background: "rgba(0,0,0,0.5)", display: "flex", alignItems: "center", justifyContent: "center", zIndex: 1 }}><WatchPlayFill size={16} /></div>
                        <WatchDurationStamp duration={ep.duration} />
                        <WatchProgressBar progress={ep.progress} />
                      </div>
                      <div style={{ flex: 1, display: "flex", flexDirection: "column", justifyContent: "center" }}>
                        <p style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 13, fontWeight: 700, color: wC.text1, lineHeight: 1.25 }}>{ep.title}</p>
                        <p style={{ margin: "3px 0 0", fontFamily: "'DM Sans', sans-serif", fontSize: 10, color: wC.text3 }}>Ep. {ep.episodeNum} · {ep.date}</p>
                        <p style={{ margin: "3px 0 0", fontFamily: "'DM Sans', sans-serif", fontSize: 10, color: wC.gold, fontWeight: 600 }}>{Math.round(ep.progress * 100)}% — resume</p>
                      </div>
                    </div>
                  </div>
                ))}
              </div>);
            })()}
            <p style={{ margin: "0 0 8px", fontFamily: "'DM Sans', sans-serif", fontSize: 11, fontWeight: 700, color: wC.text3, letterSpacing: 1, textTransform: "uppercase" }}>{series.episodes === 1 ? "Episode" : "Episodes"} · Newest first</p>
          </div>
          {/* Episode List */}
          <div style={{ padding: "0 0 80px" }}>
            {episodes.map((ep, i) => (
              <div key={ep.id} onClick={() => onPlayVideo && onPlayVideo(ep.title, series.title, i === 0 && series.isLive)} style={{ display: "flex", gap: 10, padding: "8px 18px", cursor: "pointer", borderBottom: "1px solid " + wC.border, background: i === 0 && series.isLive ? wC.liveBg : "transparent" }}>
                <div style={{ width: 110, height: 64, borderRadius: 8, flexShrink: 0, background: series.gradient, position: "relative", display: "flex", alignItems: "center", justifyContent: "center", overflow: "hidden" }}>
                  {getEpImg(i) && <img src={getEpImg(i)} style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} />}
                  <WatchPlayFill size={18} color="rgba(0,0,0,0.12)" />
                  <WatchDurationStamp duration={ep.duration} />
                  <WatchProgressBar progress={ep.progress > 0 && ep.progress < 1 ? ep.progress : 0} />
                  {ep.progress >= 1 && (<div style={{ position: "absolute", top: 4, right: 4, width: 16, height: 16, borderRadius: "50%", background: "rgba(46,125,76,0.85)", display: "flex", alignItems: "center", justifyContent: "center" }}><span style={{ fontSize: 9, color: "#fff" }}>✓</span></div>)}
                  {i === 0 && series.isLive && <WatchBadge type="live" />}
                </div>
                <div style={{ flex: 1, display: "flex", flexDirection: "column", justifyContent: "center", minWidth: 0 }}>
                  <p style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 13, fontWeight: 600, color: wC.text1, lineHeight: 1.25, overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap" }}>{ep.title}</p>
                  <div style={{ display: "flex", alignItems: "center", gap: 6, marginTop: 3 }}>
                    <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 10, color: wC.text3 }}>{ep.date}</span>
                    <span style={{ fontSize: 10, color: wC.text4 }}>·</span>
                    <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 10, color: wC.text3 }}>{ep.duration}</span>
                    {ep.progress > 0 && ep.progress < 1 && (<><span style={{ fontSize: 10, color: wC.text4 }}>·</span><span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 10, color: wC.gold, fontWeight: 600 }}>{Math.round(ep.progress * 100)}%</span></>)}
                    {ep.progress >= 1 && (<><span style={{ fontSize: 10, color: wC.text4 }}>·</span><span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 10, color: wC.prayerAccent, fontWeight: 600 }}>Watched</span></>)}
                  </div>
                  <p style={{ margin: "2px 0 0", fontFamily: "'DM Sans', sans-serif", fontSize: 10, color: wC.text3 }}>{series.category === "Documentaries" ? "" : "Ep. " + ep.episodeNum}</p>
                </div>
              </div>
            ))}
            {series.episodes > 15 && (<div style={{ padding: "16px 18px", textAlign: "center" }}><span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 12, fontWeight: 600, color: wC.goldText, cursor: "pointer" }}>Load more ({series.episodes - 15} remaining)</span></div>)}
          </div>
        </div>
      );
    };

    // ═══ WATCH TAB — WATCH HOME ═══
    const WatchHome = ({ onNavigate, onTapSeries, onPlayVideo, reminders, toggleReminder, demoLive }) => {
      // Only go live when demo toggle is on (7:10 PM = Rosary live). Otherwise safe time (2 AM) so nothing triggers mid-demo.
      const simHour = demoLive ? 19 : 2;
      const simMin = demoLive ? 10 : 0;
      const liveNow = getWatchLiveState(simHour, simMin);

      return (
        <div style={{ height: "100%", overflowY: "auto", background: wC.bg, paddingBottom: 80 }} className="hide-scrollbar">
          {/* Watch Home Header */}
          <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", padding: "14px 18px 12px" }}>
            <div style={{ display: "flex", alignItems: "center", gap: 10 }}>
              <h1 style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 26, fontWeight: 800, color: wC.text1, letterSpacing: -0.5 }}>Watch</h1>
            </div>
            <div style={{ display: "flex", alignItems: "center", gap: 12 }}>
              <span onClick={() => onNavigate("allSeries")} style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 13, fontWeight: 600, color: wC.goldText, cursor: "pointer" }}>All Series</span>
              <div style={{ width: 34, height: 34, borderRadius: 10, background: wC.surface, border: "1px solid " + wC.border, display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer", color: wC.text3 }}>
                <WatchSearchIcon size={16} />
              </div>
            </div>
          </div>
          {/* Hero Billboard */}
          <HeroBillboard liveNow={liveNow} liveStyle={demoLive} onTapSeries={onTapSeries} onPlayVideo={onPlayVideo} />
          <div style={{ height: 12 }} />
          {/* Prayer Cards */}
          <WatchPrayerCards simHour={simHour} simMin={simMin} onTapSeries={onTapSeries} reminders={reminders} toggleReminder={toggleReminder} />
          <div style={{ height: 16 }} />
          {/* Continue Watching */}
          <WatchSectionHeader title="Continue Watching" />
          <WatchScrollRow>
            <WatchEpisodeCard series="BP. FULTON SHEEN" title="Life Is Worth Living" duration="27:14" progress={0.38} color="#E8E4F0" image="visual_elements/watch_tab/fulton_sheen.png" onClick={() => onPlayVideo && onPlayVideo("Life Is Worth Living", "Life Is Worth Living")} />
            <WatchEpisodeCard series="KNIGHTS OF COLUMBUS" title="Into the Breach" duration="32:15" progress={0.72} color="#E8E4E0" image="visual_elements/watch_tab/into_the_breach.png" onClick={() => onPlayVideo && onPlayVideo("The Mission of the Family", "Into the Breach")} />
            <WatchEpisodeCard series="5-MIN HOMILIES" title="Sunday Feb 23" duration="5:12" badge="upnext" color="#E4F0E8" image="visual_elements/watch_tab/5-MinuteHomilies_HowAquinasConqueredLust_v2 1.png" onClick={() => onPlayVideo && onPlayVideo("Sunday Feb 23", "5-Minute Homilies")} />
          </WatchScrollRow>
          <div style={{ height: 16 }} />
          {/* New This Week */}
          <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", padding: "0 16px", marginBottom: 8 }}>
            <div style={{ display: "flex", alignItems: "center", gap: 8 }}>
              <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 18, fontWeight: 800, color: wC.text1 }}>New This Week</span>
              <span style={{ fontFamily: "'DM Sans', sans-serif", background: wC.newBadgeSoft, color: wC.newBadge, fontSize: 8, fontWeight: 700, padding: "2px 7px", borderRadius: 6, letterSpacing: 0.3 }}>4 new</span>
            </div>
          </div>
          <WatchScrollRow>
            <WatchEpisodeCard series="THE VATICAN TODAY" title="Pope Leo's Lenten Message" duration="27:14" badge="new" color="#D8E4F0" image="visual_elements/watch_tab/pope_leo.png" onClick={() => onPlayVideo && onPlayVideo("Pope Leo's Lenten Message", "The Vatican Today")} />
            <WatchEpisodeCard series="HOLY MASS" title="Tuesday of the 7th Week" duration="42:08" badge="new" color="#E8E0D4" image="visual_elements/watch_tab/Daily_Mass.jpeg" onClick={() => onPlayVideo && onPlayVideo("Tuesday of the 7th Week", "Holy Mass")} />
            <WatchEpisodeCard series="5-MIN HOMILIES" title="Sunday Feb 23" duration="5:12" badge="new" color="#E4F0E8" image="visual_elements/watch_tab/5-MinuteHomilies_MaybeICanGetAMiracleToo_v2 1.png" onClick={() => onPlayVideo && onPlayVideo("Sunday Feb 23", "5-Minute Homilies")} />

          </WatchScrollRow>
          <div style={{ height: 16 }} />
          {/* Featured Series */}
          <WatchSectionHeader title="Featured Series" right="All Series →" onRightClick={() => onNavigate("allSeries")} />
          <WatchScrollRow>
            <WatchSeriesCard title="SEEK 2026" host="FOCUS" episodes={24} gradient="linear-gradient(140deg, #E8E0F0, #D0C8E0)" image="visual_elements/watch_tab/SEEK_2026.jpg" onClick={() => onTapSeries("seek-2026")} />
            <WatchSeriesCard title="Life Is Worth Living" host="Bp. Fulton Sheen" episodes={60} gradient="linear-gradient(140deg, #E8E4F0, #D8D0E8)" image="visual_elements/watch_tab/fulton_sheen.png" onClick={() => onTapSeries("fulton-sheen")} />
            <WatchSeriesCard title="Into the Breach" host="Knights of Columbus" episodes={8} gradient="linear-gradient(140deg, #E8E4E0, #D8D0C8)" image="visual_elements/watch_tab/into_the_breach.png" onClick={() => onTapSeries("into-the-breach")} />
          </WatchScrollRow>
          <div style={{ height: 16 }} />
          {/* Fr. Rocky Teaching */}
          <WatchSectionHeader title="Fr. Rocky Teaching" />
          <WatchScrollRow>
            <WatchSeriesCard title="Lessons on the Mass" host="Fr. Rocky" episodes={40} gradient="linear-gradient(140deg, #EDE6F5, #D8CEE8)" image="visual_elements/watch_tab/LLOTM_v1_SERIES_CARD.jpg" onClick={() => onTapSeries("lenten-mass")} />
            <WatchSeriesCard title="Lessons on the Sacraments" host="Fr. Rocky" episodes={40} gradient="linear-gradient(140deg, #E6EDF5, #CED8E8)" image="visual_elements/watch_tab/LLOTS.png" onClick={() => onTapSeries("lenten-sacraments")} />
            <WatchSeriesCard title="Eucharistic Encounters" host="Fr. Rocky" episodes={12} gradient="linear-gradient(140deg, #F0E8DC, #E0D4C0)" image="visual_elements/watch_tab/EE.png" onClick={() => onTapSeries("eucharistic-encounters")} />
          </WatchScrollRow>
          <div style={{ height: 16 }} />
          {/* Relevant Radio Live Prayer */}
          <WatchSectionHeader title="Relevant Radio Live Prayer" />
          <WatchScrollRow>
            <WatchSeriesCard title="Family Rosary Across America" host="Fr. Rocky" episodes={230} gradient="linear-gradient(170deg, #5B6B4F, #2A3B22)" image="visual_elements/watch_tab/Family_Rosary.jpeg" onClick={() => onTapSeries("family-rosary")} />
            <WatchSeriesCard title="The Divine Mercy Chaplet" host="Drew Mariani" episodes={160} gradient="linear-gradient(170deg, #4F6275, #253A4D)" image="visual_elements/watch_tab/Divine_Mercy_Chaplet.jpeg" onClick={() => onTapSeries("divine-mercy")} />
            <WatchSeriesCard title="Holy Mass" host="Fr. Rocky" episodes={180} gradient="linear-gradient(170deg, #7A6B52, #3D3528)" image="visual_elements/watch_tab/Daily_Mass.jpeg" onClick={() => onTapSeries("daily-mass")} />
          </WatchScrollRow>
          <div style={{ height: 16 }} />
          {/* Relevant Radio Shows */}
          <WatchSectionHeader title="Relevant Radio Shows" />
          <WatchScrollRow>
            <WatchSeriesCard title="The Vatican Today" host="Relevant Radio" episodes={4} gradient="linear-gradient(140deg, #D8E4F0, #C0D0E8)" image="visual_elements/watch_tab/vatican_today.png" onClick={() => onTapSeries("vatican-today")} />
            <WatchSeriesCard title="Patrick Madrid" host="Patrick Madrid" episodes={10} gradient="linear-gradient(140deg, #F0E8E4, #E0D4CC)" image="visual_elements/watch_tab/PatrickMadrid_v1.jpg" onClick={() => onTapSeries("patrick-madrid")} />
            <WatchSeriesCard title="Trending with Timmerie" host="Timmerie Millington" episodes={22} gradient="linear-gradient(140deg, #F0E4E8, #E8D0D8)" onClick={() => onTapSeries("timmerie")} />
          </WatchScrollRow>
          <div style={{ height: 16 }} />
          {/* Conferences & Events */}
          <WatchSectionHeader title="Conferences & Events" />
          <WatchScrollRow>
            <WatchSeriesCard title="National Eucharistic Congress" host="NEC" episodes={12} gradient="linear-gradient(140deg, #F0E8DC, #E0D4C0)" image="visual_elements/watch_tab/NEC.png" onClick={() => onTapSeries("eucharistic-encounters")} />
            <WatchSeriesCard title="SEEK 2026" host="FOCUS" episodes={24} gradient="linear-gradient(140deg, #E8E0F0, #D0C8E0)" image="visual_elements/watch_tab/SEEK_2026.jpg" onClick={() => onTapSeries("seek-2026")} />
            <WatchSeriesCard title="SEEK 2025" host="FOCUS" episodes={9} gradient="linear-gradient(140deg, #E0D8F0, #D0C8E0)" onClick={() => onTapSeries("seek-2025")} />
          </WatchScrollRow>
          <div style={{ height: 16 }} />
          {/* Formation */}
          <WatchSectionHeader title="Formation" />
          <WatchScrollRow>
            <WatchSeriesCard title="Into the Breach" host="Knights of Columbus" episodes={8} gradient="linear-gradient(140deg, #E8E4E0, #D8D0C8)" image="visual_elements/watch_tab/into_the_breach.png" onClick={() => onTapSeries("into-the-breach")} />
            <WatchSeriesCard title="The Quest" host="University of Dallas" episodes={11} gradient="linear-gradient(140deg, #E8E0D4, #D4CCB8)" onClick={() => onTapSeries("the-quest")} />
          </WatchScrollRow>
          <div style={{ height: 16 }} />
          {/* Documentaries & Films */}
          <WatchSectionHeader title="Documentaries & Films" />
          <WatchScrollRow>
            <WatchSeriesCard title="Pray: Patrick Peyton" host="Holy Cross Ministries" episodes={1} gradient="linear-gradient(140deg, #D8D4CC, #C0BCB4)" image="visual_elements/watch_tab/PatrickPayton_Pray.jpg" onClick={() => onTapSeries("pray-film")} />
            <WatchSeriesCard title="Mother Teresa: No Greater Love" host="Knights of Columbus" episodes={1} gradient="linear-gradient(140deg, #E4DCD0, #D0C8BC)" image="visual_elements/watch_tab/MotherTeresa_NoGreaterLove.jpg" onClick={() => onTapSeries("mother-teresa")} />
            <WatchSeriesCard title="The Face of Mercy" host="Knights of Columbus" episodes={1} gradient="linear-gradient(140deg, #DCD8D0, #C8C4BC)" image="visual_elements/watch_tab/FaceofMercy.jpg" onClick={() => onTapSeries("face-of-mercy")} />
            <WatchSeriesCard title="Apparition Hill" host="Holy Cross Ministries" episodes={1} gradient="linear-gradient(140deg, #E0DCD4, #C8C0B4)" image="visual_elements/watch_tab/ApparitionHill.jpg" onClick={() => onTapSeries("apparition-hill")} />
          </WatchScrollRow>
          <div style={{ height: 20 }} />
        </div>
      );
    };

    // ═══════════════════════════════════════════
    // VIDEO PLAYER — SHARED PRIMITIVES
    // ═══════════════════════════════════════════
    // Design tokens for the video player (dark mode)
    const vP = {
      bg: "#000",
      surface: "#1a1a1a",
      elevated: "#111",
      white: "#fff",
      text1: "#fff",
      text2: "#666",
      text3: "#999",
      accent: "#2563eb",
      liveRed: "#e53e3e",
      scrubTrack: "#333",
      iconColor: "#aaa",
      iconColorLand: "#888",
      backPillBg: "rgba(255,255,255,0.08)",
      postBg: "#0f1520",
    };

    // TASK 1: Player Status Bar
    // Dark-mode status bar with time, dynamic island notch, and signal bars.
    // Accepts `light` prop for light-mode variant (used in prayer modal context).
    const PlayerStatusBar = ({ light }) => (
      <div style={{
        height: 50, display: "flex", alignItems: "center",
        justifyContent: "space-between", padding: "0 28px", flexShrink: 0,
      }}>
        <span style={{
          color: light ? "#333" : "#888",
          fontSize: 14, fontWeight: 500, fontFamily: "system-ui",
        }}>9:41</span>
        <div style={{
          width: 80, height: 26,
          background: light ? "#eee" : "#111",
          borderRadius: 13,
        }} />
        <svg width={16} height={12} viewBox="0 0 16 12" fill="none">
          {[{ x: 0, y: 8, h: 4 }, { x: 4.5, y: 5, h: 7 }, { x: 9, y: 2, h: 10 }, { x: 13, y: 0, h: 12 }].map((r, i) => (
            <rect key={i} x={r.x} y={r.y} width="3" height={r.h} rx="0.5"
              fill={i < 3 ? (light ? "#333" : "#888") : (light ? "#ccc" : "#444")} />
          ))}
        </svg>
      </div>
    );

    // TASK 2: Back Button (Pill)
    // Translucent pill-shaped button with left chevron + "Back" text.
    // Used on Portrait, Live, and Landscape states.
    // Down arrow dismiss button — matches the green audio player pattern
    const PlayerDownArrow = ({ onClick }) => (
      <div onClick={onClick} style={{
        display: "flex", justifyContent: "center",
        paddingTop: 4, paddingBottom: 4, cursor: "pointer",
        flexShrink: 0,
      }}>
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none"
          stroke="rgba(255,255,255,0.6)" strokeWidth="2.5"
          strokeLinecap="round" strokeLinejoin="round">
          <polyline points="6 9 12 15 18 9" />
        </svg>
      </div>
    );

    // TASK 3: Video Tile
    // Full-width 16:9 video container with optional LIVE badge and fullscreen button.
    const PlayerFullscreenButton = ({ onClick, collapse }) => (
      <button onClick={onClick} style={{
        position: "absolute", bottom: 10, right: 10,
        width: 30, height: 30, background: vP.white,
        border: "none", borderRadius: 5, cursor: "pointer",
        display: "flex", alignItems: "center", justifyContent: "center",
      }}>
        <svg width={14} height={14} viewBox="0 0 24 24" fill="none" stroke="#000" strokeWidth="2.5">
          {collapse
            ? <><polyline points="4,14 10,14 10,20" /><polyline points="20,10 14,10 14,4" /><line x1="14" y1="10" x2="21" y2="3" /><line x1="3" y1="21" x2="10" y2="14" /></>
            : <><polyline points="15,3 21,3 21,9" /><polyline points="9,21 3,21 3,15" /><line x1="21" y1="3" x2="14" y2="10" /><line x1="3" y1="21" x2="10" y2="14" /></>
          }
        </svg>
      </button>
    );

    const PlayerVideoTile = ({ label = "Video Content", live, onFullscreen, onTapVideo, image }) => (
      <div onClick={onTapVideo} style={{
        width: "100%", aspectRatio: "16/9", flexShrink: 0,
        position: "relative", cursor: onTapVideo ? "pointer" : "default",
        background: "linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 50%, #1a1a1a 100%)",
        display: "flex", alignItems: "center", justifyContent: "center",
        overflow: "hidden",
      }}>
        {image && <img src={image} style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} />}
        {!image && <div style={{
          color: "#444", fontSize: 13, fontFamily: "monospace",
          textTransform: "uppercase", letterSpacing: 2,
        }}>{label}{onTapVideo ? " · tap to end" : ""}</div>}
        {live && (
          <div style={{
            position: "absolute", top: 10, right: 10,
            background: vP.liveRed, borderRadius: 4,
            padding: "3px 8px", display: "flex", alignItems: "center", gap: 5,
          }}>
            <div style={{ width: 6, height: 6, background: vP.white, borderRadius: "50%" }} />
            <span style={{
              color: vP.white, fontSize: 10, fontWeight: 700,
              fontFamily: "system-ui", letterSpacing: "0.05em",
            }}>LIVE</span>
          </div>
        )}
        <PlayerFullscreenButton onClick={onFullscreen} />
      </div>
    );

    // TASK 4: Play/Pause Button
    // 60px white circle with play or pause icon. Toggles isPlaying state on click.
    const PlayerPlayPause = ({ isPlaying, onToggle }) => (
      <button onClick={onToggle} style={{
        width: 60, height: 60, borderRadius: "50%",
        background: vP.white, border: "none", cursor: "pointer",
        display: "flex", alignItems: "center", justifyContent: "center",
      }}>
        {isPlaying
          ? <svg width={24} height={24} viewBox="0 0 24 24" fill="#000">
              <rect x="6" y="4" width="4" height="16" rx="1" />
              <rect x="14" y="4" width="4" height="16" rx="1" />
            </svg>
          : <svg width={24} height={24} viewBox="0 0 24 24" fill="#000">
              <polygon points="7,3 21,12 7,21" />
            </svg>
        }
      </button>
    );

    // TASK 5: Skip Buttons (15s Back/Forward)
    // Circular arrow with "15s" label. viewBox -2 -2 28 28 prevents bottom curve clipping.
    const PlayerSkip = ({ fwd }) => (
      <button style={{
        background: "none", border: "none", cursor: "pointer",
        padding: 12, display: "flex", flexDirection: "column", alignItems: "center",
      }}>
        <svg width={34} height={34} viewBox="-2 -2 28 28" fill="none"
          stroke={vP.white} strokeWidth="1.8" strokeLinecap="round">
          {fwd
            ? <><path d="M23 4v6h-6" /><path d="M20.49 15a9 9 0 11-5.64-8.36L23 10" /></>
            : <><path d="M1 4v6h6" /><path d="M3.51 15a9 9 0 105.64-8.36L1 10" /></>
          }
        </svg>
        <span style={{
          fontSize: 13, fontWeight: 600, color: vP.text3,
          fontFamily: "system-ui", marginTop: 3,
        }}>15s</span>
      </button>
    );

    // TASK 6: Scrub Bar + Timestamps
    // Progress bar with handle and elapsed/remaining timestamps.
    const PlayerScrubBar = ({ progress = 35 }) => (
      <div style={{ padding: "18px 20px 6px", flexShrink: 0 }}>
        <div style={{ position: "relative", height: 6, background: vP.scrubTrack, borderRadius: 3 }}>
          <div style={{
            position: "absolute", left: 0, top: 0, height: "100%",
            width: `${progress}%`, background: vP.white, borderRadius: 3,
          }} />
          <div style={{
            position: "absolute", top: "50%", left: `${progress}%`,
            transform: "translate(-50%, -50%)",
            width: 14, height: 14, background: vP.white, borderRadius: "50%",
          }} />
        </div>
        <div style={{ display: "flex", justifyContent: "space-between", marginTop: 8 }}>
          <span style={{ color: "#777", fontSize: 13, fontFamily: "system-ui", fontWeight: 500, fontVariantNumeric: "tabular-nums" }}>7:42</span>
          <span style={{ color: "#777", fontSize: 13, fontFamily: "system-ui", fontWeight: 500, fontVariantNumeric: "tabular-nums" }}>-14:26</span>
        </div>
      </div>
    );

    // TASK 7: Bottom Icon Row
    // Share + Prayer (conditional) + Sleep + Series (conditional).
    // Portrait: all 4 icons. Live: 3 icons (no prayer — it has its own button).
    const PlayerIconRow = ({ showAll = true, onPrayer }) => (
      <div style={{
        display: "flex", alignItems: "center", justifyContent: "space-evenly",
        padding: "0 20px 36px", flexShrink: 0,
      }}>
        {/* Share */}
        <button style={{ background: "none", border: "none", cursor: "pointer", padding: 10 }}>
          <svg width={22} height={22} viewBox="0 0 24 24" fill="none" stroke={vP.iconColor} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8" /><polyline points="16,6 12,2 8,6" /><line x1="12" y1="2" x2="12" y2="15" />
          </svg>
        </button>
        {/* Prayer — only shown when onPrayer provided */}
        {onPrayer && (
          <button onClick={onPrayer} style={{ background: "none", border: "none", cursor: "pointer", padding: 10 }}>
            <svg width={22} height={22} viewBox="0 0 24 24" fill="none" stroke={vP.iconColor} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
              <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z" />
            </svg>
          </button>
        )}
        {/* Sleep */}
        <button style={{ background: "none", border: "none", cursor: "pointer", padding: 10 }}>
          <svg width={22} height={22} viewBox="0 0 24 24" fill="none" stroke={vP.iconColor} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
          </svg>
        </button>
        {/* Cast to TV */}
        <button style={{ background: "none", border: "none", cursor: "pointer", padding: 10 }}>
          <svg width={22} height={22} viewBox="0 0 24 24" fill={vP.iconColor}>
            <path d="M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/>
            <path d="M1 18v3h3c0-1.66-1.34-3-3-3z"/>
            <path d="M1 14v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7z"/>
            <path d="M1 10v2c4.97 0 9 4.03 9 10h2c0-6.08-4.93-11-11-12z"/>
          </svg>
        </button>
        {/* Series — only shown when showAll is true */}
        {showAll && (
          <button style={{ background: "none", border: "none", cursor: "pointer", padding: 10 }}>
            <svg width={22} height={22} viewBox="0 0 24 24" fill="none" stroke={vP.iconColor} strokeWidth="2" strokeLinecap="round">
              <line x1="8" y1="6" x2="21" y2="6" /><line x1="8" y1="12" x2="21" y2="12" /><line x1="8" y1="18" x2="21" y2="18" />
              <line x1="3" y1="6" x2="3.01" y2="6" strokeWidth="3" /><line x1="3" y1="12" x2="3.01" y2="12" strokeWidth="3" /><line x1="3" y1="18" x2="3.01" y2="18" strokeWidth="3" />
            </svg>
          </button>
        )}
      </div>
    );

    // TASK 8: Prayer Request Modal
    // White bottom sheet — drag handle, name field, prayer text area, submit button.
    // Light mode form on dark overlay.
    const PlayerPrayerModal = ({ onClose }) => (
      <div style={{
        position: "absolute", inset: 0, zIndex: 50,
        display: "flex", flexDirection: "column", justifyContent: "flex-end",
      }}>
        {/* Backdrop */}
        <div onClick={onClose} style={{ position: "absolute", inset: 0, background: "rgba(0,0,0,0.6)" }} />
        {/* Sheet */}
        <div style={{
          position: "relative", background: "#fff",
          borderRadius: "20px 20px 0 0", padding: "20px 20px 40px", zIndex: 51,
        }}>
          {/* Drag handle */}
          <div style={{ width: 36, height: 4, background: "#ddd", borderRadius: 2, margin: "0 auto 16px" }} />
          {/* Header + close */}
          <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 16 }}>
            <div style={{ color: "#111", fontSize: 17, fontWeight: 700, fontFamily: "system-ui" }}>Prayer Request</div>
            <button onClick={onClose} style={{
              background: "#f0f0f0", border: "none", borderRadius: "50%",
              width: 28, height: 28, cursor: "pointer",
              display: "flex", alignItems: "center", justifyContent: "center",
            }}>
              <svg width={14} height={14} viewBox="0 0 24 24" fill="none" stroke="#666" strokeWidth="2.5" strokeLinecap="round">
                <line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" />
              </svg>
            </button>
          </div>
          {/* Subtitle */}
          <div style={{ color: "#888", fontSize: 13, fontFamily: "system-ui", marginBottom: 14, lineHeight: 1.4 }}>
            Share your prayer intention with the Relevant Radio family.
          </div>
          {/* Name field */}
          <div style={{
            background: "#f5f5f5", border: "1px solid #e8e8e8", borderRadius: 10,
            padding: "12px 14px", marginBottom: 10, color: "#aaa", fontSize: 14, fontFamily: "system-ui",
          }}>Your name (optional)</div>
          {/* Prayer field */}
          <div style={{
            background: "#f5f5f5", border: "1px solid #e8e8e8", borderRadius: 10,
            padding: "12px 14px", marginBottom: 16, color: "#aaa", fontSize: 14, fontFamily: "system-ui", minHeight: 80,
          }}>Write your prayer request...</div>
          {/* Submit */}
          <button style={{
            width: "100%", padding: "14px 0", background: "#111", border: "none",
            borderRadius: 12, color: "#fff", fontSize: 15, fontWeight: 600,
            fontFamily: "system-ui", cursor: "pointer",
          }}>Submit Prayer Request</button>
        </div>
      </div>
    );

    // ═══ STATE SWITCHER — dev/demo toggle strip ═══

    function AudiobooksApp() {
      const [demoLive, setDemoLive] = useState(null); // null | "blue" | "white"
      const [homeDemoLive, setHomeDemoLive] = useState(null); // null | "blue" | "white"
      const [articleDesign, setArticleDesign] = useState(0); // 0=A, 1=B, 2=C
      const [activeTab, setActiveTab] = useState("home");
      const [view, setView] = useState("main");
      const [selectedBook, setSelectedBook] = useState(null);
      const [categorySearch, setCategorySearch] = useState("");
      const [allTitlesSearch, setAllTitlesSearch] = useState("");
      const [mainSearchOpen, setMainSearchOpen] = useState(false);
      const [mainSearch, setMainSearch] = useState("");
      const [previousView, setPreviousView] = useState("main");
      const [settingsOpen, setSettingsOpen] = useState(false);
      const [livePlayerOpen, setLivePlayerOpen] = useState(false);
      const [previousTab, setPreviousTab] = useState("home");
      const [listenView, setListenView] = useState("landing");
      const [watchView, setWatchView] = useState("home");
      const [selectedSeries, setSelectedSeries] = useState(null);
      const [liveAnimating, setLiveAnimating] = useState(false);
      const triggerLive = () => {
        if (livePlayerOpen) { setActiveTab(previousTab); setLivePlayerOpen(false); return; }
        // Audio wins — close any active video player first
        setVideoPlayerOpen(false); setVideoPlayerData(null); setPrayerModalOpen(false); setPlayerMode("portrait");
        if (activeTab !== "live") setPreviousTab(activeTab);
        setActiveTab("live"); setLivePlayerOpen(true); setLiveAnimating(true); setTimeout(() => setLiveAnimating(false), 900);
      };
      const goToWatchSeries = (seriesId) => {
        const series = WATCH_SERIES.find(s => s.id === seriesId);
        if (series) { setSelectedSeries(series); setWatchView("seriesDetail"); }
      };
      const [autoplayLive, setAutoplayLive] = useState(false);
      const [autoplayPodcast, setAutoplayPodcast] = useState(true);
      const [pushNotifs, setPushNotifs] = useState(true);
      // Video Player state
      const [videoPlayerOpen, setVideoPlayerOpen] = useState(false);
      const [videoPlayerData, setVideoPlayerData] = useState(null);
      const [isPlaying, setIsPlaying] = useState(true);
      // Map series display name → WATCH_SERIES id for thumbnail lookup
      const seriesNameToId = useMemo(() => {
        const map = {};
        WATCH_SERIES.forEach(s => {
          map[s.title.toLowerCase()] = s.id;
          // Also map common short names
        });
        // Manual aliases for display names used in onPlayVideo calls
        map["fulton sheen"] = "fulton-sheen";
        map["life is worth living"] = "fulton-sheen";
        map["into the breach"] = "into-the-breach";
        map["5-minute homilies"] = "5min-homilies";
        map["family rosary"] = "family-rosary";
        map["family rosary across america"] = "family-rosary";
        map["daily mass"] = "daily-mass";
        map["divine mercy"] = "divine-mercy";
        map["divine mercy chaplet"] = "divine-mercy";
        map["patrick madrid"] = "patrick-madrid";
        map["the vatican today"] = "vatican-today";
        map["vatican today"] = "vatican-today";
        map["seek 2026"] = "seek-2026";
        map["documentaries"] = "doc-collection";
        map["lenten lessons on the mass"] = "lenten-mass";
        map["lenten lessons on the sacraments"] = "lenten-sacraments";
        map["eucharistic encounters"] = "eucharistic-encounters";
        return map;
      }, []);
      const getSeriesImage = (seriesName) => {
        const id = seriesNameToId[(seriesName || "").toLowerCase()];
        const imgs = id ? (SERIES_IMAGES[id] || []) : [];
        return imgs.length > 0 ? imgs[0] : null;
      };
      const openVideoPlayer = (episodeTitle, seriesName, isLive) => {
        setVideoPlayerData({ title: episodeTitle || "The Mission of the Family", series: seriesName || "Into the Breach", live: !!isLive });
        setVideoPlayerOpen(true);
        setIsPlaying(true);
        setPlayerMode(isLive ? "live" : "portrait");
      };
      const closeVideoPlayer = () => { setVideoPlayerOpen(false); setVideoPlayerData(null); setPrayerModalOpen(false); setPlayerMode("portrait"); };
      const collapseToMini = () => { setPrayerModalOpen(false); setPlayerMode("mini"); };
      const expandFromMini = () => { setPlayerMode(videoPlayerData?.live ? "live" : "portrait"); };
      const [prayerModalOpen, setPrayerModalOpen] = useState(false);
      const [playerMode, setPlayerMode] = useState("portrait"); // portrait | landscape | live | mini | postVideo | postLive

      // Reminders state (lifted from WatchPrayerCards so postLive end screen can share it)
      const [reminders, setReminders] = useState({ mass: true, rosary: false, chaplet: false });
      const toggleReminder = (id, e) => { if (e) e.stopPropagation(); setReminders(prev => ({ ...prev, [id]: !prev[id] })); };
      const seriesToPrayerId = { "holy mass": "mass", "daily mass": "mass", "family rosary across america": "rosary", "family rosary": "rosary", "the divine mercy chaplet": "chaplet", "divine mercy": "chaplet" };
      const getLiveReminderState = () => {
        if (!videoPlayerData) return { prayerId: null, isSet: false };
        const pid = seriesToPrayerId[(videoPlayerData.series || "").toLowerCase()];
        return { prayerId: pid, isSet: pid ? !!reminders[pid] : false };
      };

      const openBook = (book) => { setPreviousView(view); setSelectedBook(book); setView("detail"); };
      const goBack = () => {
        if (view === "detail") { setSelectedBook(null); setView(previousView); }
        else { setView("main"); setCategorySearch(""); setAllTitlesSearch(""); setMainSearchOpen(false); setMainSearch(""); }
      };

      const searchBooks = (books, query) => {
        if (!query.trim()) return books;
        const q = query.toLowerCase();
        return books.filter(b => b.title.toLowerCase().includes(q) || b.author.toLowerCase().includes(q) || b.narrator.toLowerCase().includes(q));
      };

      const filteredAllTitles = useMemo(() => searchBooks(allBooks, allTitlesSearch), [allTitlesSearch]);

      return (
        <div style={{ position: "relative", margin: "20px auto", width: "fit-content" }}>
          {activeTab === "home" && (
            <div style={{ position: "absolute", top: 80, left: 393, display: "flex", flexDirection: "column", gap: 6, zIndex: 10 }}>
              <div onClick={() => setHomeDemoLive(homeDemoLive === "blue" ? null : "blue")} style={{ display: "flex", alignItems: "center", gap: 6, padding: "6px 14px", borderRadius: 20, cursor: "pointer", whiteSpace: "nowrap", background: homeDemoLive === "blue" ? "#d32f2f" : "#fff", border: homeDemoLive === "blue" ? "1px solid #d32f2f" : "1px solid rgba(0,0,0,0.15)", transition: "all 0.2s" }}>
                <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, fontWeight: 700, color: homeDemoLive === "blue" ? "#fff" : "rgba(0,0,0,0.55)", letterSpacing: 0.5 }}>6:45 PM CT Blue</span>
              </div>
              <div onClick={() => setHomeDemoLive(homeDemoLive === "white" ? null : "white")} style={{ display: "flex", alignItems: "center", gap: 6, padding: "6px 14px", borderRadius: 20, cursor: "pointer", whiteSpace: "nowrap", background: homeDemoLive === "white" ? "#d32f2f" : "#fff", border: homeDemoLive === "white" ? "1px solid #d32f2f" : "1px solid rgba(0,0,0,0.15)", transition: "all 0.2s" }}>
                <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, fontWeight: 700, color: homeDemoLive === "white" ? "#fff" : "rgba(0,0,0,0.55)", letterSpacing: 0.5 }}>6:45 PM CT White</span>
              </div>
              <div onClick={() => setHomeDemoLive(homeDemoLive === "darkblue" ? null : "darkblue")} style={{ display: "flex", alignItems: "center", gap: 6, padding: "6px 14px", borderRadius: 20, cursor: "pointer", whiteSpace: "nowrap", background: homeDemoLive === "darkblue" ? "#d32f2f" : "#fff", border: homeDemoLive === "darkblue" ? "1px solid #d32f2f" : "1px solid rgba(0,0,0,0.15)", transition: "all 0.2s" }}>
                <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, fontWeight: 700, color: homeDemoLive === "darkblue" ? "#fff" : "rgba(0,0,0,0.55)", letterSpacing: 0.5 }}>6:45 PM CT Dark Blue</span>
              </div>
            </div>
          )}
          {activeTab === "home" && (
            <div style={{ position: "absolute", top: 500, left: 393, display: "flex", flexDirection: "column", gap: 6, zIndex: 10 }}>
              {["Article A", "Article B", "Article C", "Article D"].map((label, i) => (
                <div key={label} onClick={() => setArticleDesign(i)} style={{ display: "flex", alignItems: "center", gap: 6, padding: "6px 14px", borderRadius: 20, cursor: "pointer", whiteSpace: "nowrap", background: articleDesign === i ? "#3b6fa0" : "#fff", border: articleDesign === i ? "1px solid #3b6fa0" : "1px solid rgba(0,0,0,0.15)", transition: "all 0.2s" }}>
                  <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, fontWeight: 700, color: articleDesign === i ? "#fff" : "rgba(0,0,0,0.55)", letterSpacing: 0.5 }}>{label}</span>
                </div>
              ))}
            </div>
          )}
          {activeTab === "watch" && (
            <div style={{ position: "absolute", top: 80, left: 393, display: "flex", flexDirection: "column", gap: 6, zIndex: 10 }}>
              <div onClick={() => setDemoLive(demoLive === "blue" ? null : "blue")} style={{ display: "flex", alignItems: "center", gap: 6, padding: "6px 14px", borderRadius: 20, cursor: "pointer", whiteSpace: "nowrap", background: demoLive === "blue" ? "#d32f2f" : "#fff", border: demoLive === "blue" ? "1px solid #d32f2f" : "1px solid rgba(0,0,0,0.15)", transition: "all 0.2s" }}>
                <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, fontWeight: 700, color: demoLive === "blue" ? "#fff" : "rgba(0,0,0,0.55)", letterSpacing: 0.5 }}>6:45 PM CT Blue</span>
              </div>
              <div onClick={() => setDemoLive(demoLive === "white" ? null : "white")} style={{ display: "flex", alignItems: "center", gap: 6, padding: "6px 14px", borderRadius: 20, cursor: "pointer", whiteSpace: "nowrap", background: demoLive === "white" ? "#d32f2f" : "#fff", border: demoLive === "white" ? "1px solid #d32f2f" : "1px solid rgba(0,0,0,0.15)", transition: "all 0.2s" }}>
                <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, fontWeight: 700, color: demoLive === "white" ? "#fff" : "rgba(0,0,0,0.55)", letterSpacing: 0.5 }}>6:45 PM CT White</span>
              </div>
              <div onClick={() => setDemoLive(demoLive === "darkblue" ? null : "darkblue")} style={{ display: "flex", alignItems: "center", gap: 6, padding: "6px 14px", borderRadius: 20, cursor: "pointer", whiteSpace: "nowrap", background: demoLive === "darkblue" ? "#d32f2f" : "#fff", border: demoLive === "darkblue" ? "1px solid #d32f2f" : "1px solid rgba(0,0,0,0.15)", transition: "all 0.2s" }}>
                <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, fontWeight: 700, color: demoLive === "darkblue" ? "#fff" : "rgba(0,0,0,0.55)", letterSpacing: 0.5 }}>6:45 PM CT Dark Blue</span>
              </div>

            </div>
          )}
        <div style={{
          width: 375, height: 812,
          background: activeTab === "watch" ? wC.bg : (activeTab !== "home" && view === "detail") ? "#0b1e33" : colors.pageBg,
          borderRadius: 40, overflow: "hidden", position: "relative",
          boxShadow: "0 20px 60px rgba(0,0,0,0.3), 0 0 0 2px rgba(0,0,0,0.08)",
          fontFamily: "'DM Sans', sans-serif",
        }}>
          <style>{`.hide-scrollbar::-webkit-scrollbar{display:none}input::placeholder{color:${colors.textMuted}!important}.search-dark input::placeholder{color:rgba(255,255,255,0.4)!important}`}</style>

          {/* Header: status bar strip + logo section with RR icon button */}
          <div style={{ background: "#3b6394" }}>
            {/* Status bar strip */}
            <img src="current_app_state/header_strip.png" style={{ width: "100%", display: "block" }} />
            {/* Logo area — fixed height to match header_full total */}
            <div style={{ position: "relative", height: 79, display: "flex", alignItems: "center", justifyContent: "center" }}>
              <img src="current_app_state/header_logo.png" style={{ height: "100%", objectFit: "contain", display: "block" }} />
              {/* Back arrow — only when More screen is open */}
              {settingsOpen && (
                <div onClick={() => setSettingsOpen(false)} style={{
                  position: "absolute", left: 12, top: "50%", transform: "translateY(-50%)",
                  cursor: "pointer",
                  width: 34, height: 34, borderRadius: "50%",
                  background: "rgba(255,255,255,0.2)",
                  display: "flex", alignItems: "center", justifyContent: "center",
                }}>
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#fff" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><polyline points="15 18 9 12 15 6"/></svg>
                </div>
              )}
              {/* Profile icon button */}
              <div onClick={() => setSettingsOpen(!settingsOpen)} style={{
                position: "absolute", right: 12, top: "50%", transform: "translateY(-50%)",
                cursor: "pointer",
                width: 34, height: 34, borderRadius: "50%",
                background: "rgba(255,255,255,0.2)",
                display: "flex", alignItems: "center", justifyContent: "center",
              }}>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#fff" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
              </div>
            </div>
          </div>

          <div style={{ height: 560, overflow: "hidden" }}>
            {settingsOpen ? (
              (() => {
                const Toggle = ({ on, onToggle }) => (
                  <div onClick={onToggle} style={{
                    width: 50, height: 30, borderRadius: 15, background: on ? "#34c759" : "#ccc",
                    position: "relative", cursor: "pointer", flexShrink: 0, transition: "background 0.2s",
                  }}>
                    <div style={{
                      position: "absolute", top: 3, left: on ? 23 : 3, width: 24, height: 24,
                      borderRadius: "50%", background: "#fff", boxShadow: "0 1px 4px rgba(0,0,0,0.25)",
                      transition: "left 0.2s",
                    }} />
                  </div>
                );
                const menuItems = [
                  { label: "Find a Station", icon: <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke={colors.textMuted} strokeWidth="1.8" strokeLinecap="round" strokeLinejoin="round"><path d="M5 12.55a11 11 0 0 1 14.08 0"/><path d="M1.42 9a16 16 0 0 1 21.16 0"/><path d="M8.53 16.11a6 6 0 0 1 6.95 0"/><circle cx="12" cy="20" r="1" fill={colors.textMuted} stroke="none"/></svg> },
                  { label: "Live Show Schedule", icon: <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke={colors.textMuted} strokeWidth="1.8" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg> },
                  { label: "Contact", icon: <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke={colors.textMuted} strokeWidth="1.8" strokeLinecap="round" strokeLinejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07A19.5 19.5 0 0 1 4.69 12 19.79 19.79 0 0 1 1.61 3.36 2 2 0 0 1 3.59 1h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L7.91 8.56a16 16 0 0 0 5.55 5.55l.92-.92a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/></svg> },
                  { label: "My Downloads", icon: <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke={colors.textMuted} strokeWidth="1.8" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg> },
                  { label: "Parish Ambassadors", icon: <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke={colors.textMuted} strokeWidth="1.8" strokeLinecap="round" strokeLinejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg> },
                  { label: "About", icon: <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke={colors.textMuted} strokeWidth="1.8" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg> },
                ];
                return (
                  <div style={{ height: "100%", display: "flex", flexDirection: "column", background: "#fff" }}>
                    <div style={{ flex: 1, overflowY: "auto", scrollbarWidth: "none" }} className="hide-scrollbar">
                      <div style={{ padding: "16px 20px 4px" }}>
                        <div style={{
                          background: colors.headerBg, borderRadius: 10, padding: "14px 20px",
                          display: "flex", alignItems: "center", justifyContent: "space-between",
                          cursor: "pointer", marginBottom: 10,
                        }}>
                          <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 16, fontWeight: 600, color: "#fff" }}>Prayer Requests</span>
                          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="rgba(255,255,255,0.7)" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><polyline points="9 18 15 12 9 6"/></svg>
                        </div>
                        <div style={{
                          background: "#d32f2f", borderRadius: 10, padding: "14px 20px",
                          display: "flex", alignItems: "center", justifyContent: "space-between",
                          cursor: "pointer",
                        }}>
                          <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 16, fontWeight: 600, color: "#fff" }}>Give Now</span>
                          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="rgba(255,255,255,0.7)" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><polyline points="9 18 15 12 9 6"/></svg>
                        </div>
                      </div>
                      <div style={{ marginTop: 8 }}>
                        {menuItems.map((item, i) => (
                          <div key={i} style={{
                            display: "flex", alignItems: "center", gap: 14, padding: "14px 20px",
                            borderBottom: "1px solid #f0f0f0", cursor: "pointer",
                          }}>
                            <div style={{ flexShrink: 0 }}>{item.icon}</div>
                            <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 15, color: colors.text, flex: 1 }}>{item.label}</span>
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke={colors.textMuted} strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><polyline points="9 18 15 12 9 6"/></svg>
                          </div>
                        ))}
                      </div>
                      <div style={{ padding: "16px 20px 6px", fontFamily: "'DM Sans', sans-serif", fontSize: 11, fontWeight: 700, color: colors.textMuted, letterSpacing: 1, textTransform: "uppercase" }}>Settings</div>
                      {[
                        { label: "Autoplay Live Stream Upon Open", value: autoplayLive, set: setAutoplayLive },
                        { label: "Autoplay Next Podcast or Audio Prayer", value: autoplayPodcast, set: setAutoplayPodcast },
                        { label: "Allow Push Notifications", value: pushNotifs, set: setPushNotifs },
                      ].map((setting, i, arr) => (
                        <div key={i} style={{
                          display: "flex", alignItems: "center", padding: "14px 20px",
                          borderBottom: i < arr.length - 1 ? "1px solid #f0f0f0" : "none",
                        }}>
                          <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 15, color: colors.text, flex: 1, paddingRight: 16 }}>{setting.label}</span>
                          <Toggle on={setting.value} onToggle={() => setting.set(v => !v)} />
                        </div>
                      ))}
                      <div style={{ padding: "32px 20px 24px", textAlign: "center", fontFamily: "'DM Sans', sans-serif", fontSize: 11, color: colors.textMuted, lineHeight: 1.7 }}>
                        Relevant Radio Version: 5.20.0 (1)<br />© Relevant Radio, Inc.
                      </div>
                    </div>
                  </div>
                );
              })()
            ) : activeTab === "home" ? (
              <HomeScreen triggerLive={triggerLive} homeDemoLive={homeDemoLive} onPlayVideo={openVideoPlayer} articleDesign={articleDesign} />
            ) : activeTab === "pray" ? (
              <div style={{ height: "100%", display: "flex", alignItems: "center", justifyContent: "center", background: colors.pageBg }}>
                <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 14, color: colors.textMuted }}>Pray — coming soon</span>
              </div>
            ) : activeTab === "watch" && watchView === "seriesDetail" && selectedSeries ? (
              <SeriesDetailPage series={selectedSeries} onBack={() => setWatchView("home")} onPlayVideo={openVideoPlayer} />
            ) : activeTab === "watch" && watchView === "allSeries" ? (
              <AllSeriesPage onBack={() => setWatchView("home")} onTapSeries={goToWatchSeries} />
            ) : activeTab === "watch" ? (
              <WatchHome onNavigate={setWatchView} onTapSeries={goToWatchSeries} onPlayVideo={openVideoPlayer} reminders={reminders} toggleReminder={toggleReminder} demoLive={demoLive} />
            ) : activeTab === "listen" && listenView === "landing" ? (
              <div style={{ height: "100%", background: colors.pageBg }}>
                <div style={{ background: colors.headerBg, padding: "16px 20px 14px" }}>
                  <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 24, fontWeight: 700, color: "#fff" }}>Listen</span>
                </div>
                <div style={{ padding: "20px 16px" }}>
                  <div onClick={() => setListenView("audiobooks")} style={{ background: "#fff", borderRadius: 12, padding: "16px 18px", display: "flex", alignItems: "center", gap: 14, cursor: "pointer", boxShadow: "0 1px 4px rgba(0,0,0,0.08)" }}>
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke={colors.headerBg} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 18v-6a9 9 0 0 1 18 0v6"/><path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3z"/><path d="M3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"/></svg>
                    <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 16, fontWeight: 600, color: colors.text, flex: 1 }}>Audiobooks</span>
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke={colors.textMuted} strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><polyline points="9 18 15 12 9 6"/></svg>
                  </div>
                </div>
              </div>
            ) : view === "detail" && selectedBook ? (
              <TitleDetailPage book={selectedBook} onBack={goBack} onSuggest={openBook} />
            ) : (
              <div style={{ overflowY: "auto", height: "100%", paddingBottom: 140, scrollbarWidth: "none" }} className="hide-scrollbar">

                {view === "main" && (
                  <>
                    <PageHeader title="Audiobooks" onBack={() => setListenView("landing")}
                      rightElement={
                        <div style={{ display: "flex", alignItems: "center", gap: 14 }}>
                          <div onClick={() => { setMainSearchOpen(o => !o); setMainSearch(""); }} style={{ cursor: "pointer", display: "flex", alignItems: "center", opacity: 0.75 }}>
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#fff" strokeWidth="2.2" strokeLinecap="round" strokeLinejoin="round">
                              <circle cx="11" cy="11" r="8" /><line x1="21" y1="21" x2="16.65" y2="16.65" />
                            </svg>
                          </div>
                          <div onClick={() => { setView("allTitles"); setAllTitlesSearch(""); }} style={{
                            fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: "rgba(255,255,255,0.7)",
                            fontWeight: 600, cursor: "pointer", whiteSpace: "nowrap",
                          }}>All Titles →</div>
                        </div>
                      }
                    />
                    {mainSearchOpen && (
                      <div style={{ background: "#4485bc", paddingBottom: 16 }} className="search-dark">
                        <SearchBar value={mainSearch} onChange={setMainSearch} placeholder="Search all titles..." variant="dark" />
                      </div>
                    )}
                    {mainSearchOpen && mainSearch.trim() ? (
                      <div style={{ background: colors.contentBg, minHeight: 400 }}>
                        <div style={{ padding: "14px 20px 8px", fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: colors.textMuted }}>
                          {searchBooks(allBooks, mainSearch).length} result{searchBooks(allBooks, mainSearch).length !== 1 ? "s" : ""} for "{mainSearch}"
                        </div>
                        {searchBooks(allBooks, mainSearch).length > 0 ? searchBooks(allBooks, mainSearch).map((book, i) => <SearchResultItem key={i} book={book} onClick={() => openBook(book)} />) : (
                          <div style={{ padding: "40px 20px", textAlign: "center", fontFamily: "'DM Sans', sans-serif", fontSize: 14, color: colors.textMuted }}>No audiobooks found</div>
                        )}
                      </div>
                    ) : (
                      <div style={{ padding: "12px 0 0" }}>
                        {/* Continue Listening — 2x2 grid */}
                        <div style={{ marginBottom: 8 }}>
                          <div style={{ padding: "0 20px", marginBottom: 6 }}>
                            <div style={{ display: "flex", justifyContent: "space-between", alignItems: "baseline" }}>
                              <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 19, fontWeight: 700, color: colors.text, letterSpacing: -0.3 }}>Continue Listening</div>
                              <div onClick={() => setView("allContinueListening")} style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 11, color: colors.accent, fontWeight: 600, cursor: "pointer", letterSpacing: 0.3 }}>See All →</div>
                            </div>
                          </div>
                          <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: "8px 10px", padding: "0 20px 8px" }}>
                            {continueListeningData.slice(0, 4).map((item, i) => (
                              <ContinueListeningItem key={i} book={item.book} progress={item.progress} timeLeft={item.timeLeft} onClick={() => openBook(item.book)} />
                            ))}
                          </div>
                        </div>
                        <HorizontalRow title="Spiritual Reading" books={audiobooks.spiritual} onSeeAll={() => { setView("allSpiritual"); setCategorySearch(""); }} onBookClick={openBook} />
                        <HorizontalRow title="Classic Fiction" subtitle="from The Merry Beggars" books={audiobooks.fiction} onSeeAll={() => { setView("allFiction"); setCategorySearch(""); }} onBookClick={openBook} />
                      </div>
                    )}
                  </>
                )}

                {(view === "allSpiritual" || view === "allFiction") && (() => {
                  const categoryBooks = view === "allSpiritual" ? audiobooks.spiritual : audiobooks.fiction;
                  const filtered = searchBooks(categoryBooks, categorySearch);
                  const isSearchingCategory = categorySearch.trim().length > 0;
                  return (
                    <>
                      <PageHeader title={view === "allSpiritual" ? "Spiritual Reading" : "Classic Fiction"} onBack={goBack} />
                      <div style={{ background: "#4485bc", paddingBottom: 16 }} className="search-dark">
                        <SearchBar value={categorySearch} onChange={setCategorySearch} placeholder={`Search ${view === "allSpiritual" ? "spiritual reading" : "fiction"}...`} variant="dark" />
                      </div>
                      {isSearchingCategory ? (
                        <div style={{ background: colors.contentBg, minHeight: 400 }}>
                          <div style={{ padding: "14px 20px 8px", fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: colors.textMuted }}>
                            {filtered.length} result{filtered.length !== 1 ? "s" : ""} for "{categorySearch}"
                          </div>
                          {filtered.length > 0 ? filtered.map((book, i) => <SearchResultItem key={i} book={book} onClick={() => openBook(book)} />) : (
                            <div style={{ padding: "40px 20px", textAlign: "center", fontFamily: "'DM Sans', sans-serif", fontSize: 14, color: colors.textMuted }}>No titles found</div>
                          )}
                        </div>
                      ) : (
                        <div style={{ display: "flex", flexWrap: "wrap", gap: 14, padding: "16px 20px" }}>
                          {categoryBooks.map((book, i) => <GridCover key={i} book={book} onClick={() => openBook(book)} />)}
                        </div>
                      )}
                    </>
                  );
                })()}

                {view === "allContinueListening" && (
                  <div style={{ background: colors.contentBg, minHeight: 400 }}>
                    <PageHeader title="Continue Listening" onBack={goBack} />
                    <div>
                      {continueListeningData.map((item, i) => (
                        <div key={i} onClick={() => openBook(item.book)} style={{ display: "flex", gap: 12, padding: "10px 20px", cursor: "pointer", borderBottom: "1px solid #f0f0f0" }}>
                          <div style={{ width: 50, height: 50, borderRadius: 8, flexShrink: 0, overflow: "hidden", background: item.book.color }}>
                            <img src={item.book.image} alt={item.book.title} style={{ width: "100%", height: "100%", objectFit: "cover", display: "block" }} />
                          </div>
                          <div style={{ flex: 1, minWidth: 0 }}>
                            <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 13, color: colors.text, fontWeight: 600, whiteSpace: "nowrap", overflow: "hidden", textOverflow: "ellipsis" }}>{item.book.title}</div>
                            <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 11, color: colors.textMuted, marginTop: 2 }}>{item.book.author}</div>
                            <div style={{ display: "flex", alignItems: "center", gap: 8, marginTop: 4 }}>
                              <div style={{ flex: 1, height: 4, background: "#e0e0e0", borderRadius: 2, overflow: "hidden" }}>
                                <div style={{ height: "100%", width: `${item.progress}%`, background: "#2e7d32", borderRadius: 2 }} />
                              </div>
                              <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 10, color: colors.textMuted, whiteSpace: "nowrap", flexShrink: 0 }}>{item.timeLeft} left</span>
                            </div>
                          </div>
                          <div style={{ display: "flex", alignItems: "center" }}>
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke={colors.textMuted} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="9 18 15 12 9 6" /></svg>
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                )}

                {view === "allTitles" && (
                  <>
                    <PageHeader title="All Titles" onBack={goBack} />
                    <div style={{ background: "#4485bc", paddingBottom: 16 }} className="search-dark">
                      <SearchBar value={allTitlesSearch} onChange={setAllTitlesSearch} placeholder="Search all titles..." variant="dark" />
                    </div>
                    {allTitlesSearch.trim().length > 0 ? (
                      <div style={{ background: colors.contentBg, minHeight: 400 }}>
                        <div style={{ padding: "14px 20px 8px", fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: colors.textMuted }}>
                          {filteredAllTitles.length} result{filteredAllTitles.length !== 1 ? "s" : ""} for "{allTitlesSearch}"
                        </div>
                        {filteredAllTitles.length > 0 ? filteredAllTitles.map((book, i) => <SearchResultItem key={i} book={book} onClick={() => openBook(book)} />) : (
                          <div style={{ padding: "40px 20px", textAlign: "center", fontFamily: "'DM Sans', sans-serif", fontSize: 14, color: colors.textMuted }}>No titles found</div>
                        )}
                      </div>
                    ) : (
                      <div style={{ display: "flex", flexWrap: "wrap", gap: 14, padding: "16px 20px" }}>
                        {allBooks.map((book, i) => <GridCover key={i} book={book} onClick={() => openBook(book)} />)}
                      </div>
                    )}
                  </>
                )}
              </div>
            )}
          </div>

          {/* Sponsor Banner — home screen only, visible even with mini player */}
          {activeTab === "home" && (!videoPlayerOpen || playerMode === "mini") && (
            <div style={{
              position: "absolute", bottom: 72, left: 0, right: 0,
              zIndex: 10, cursor: "pointer", lineHeight: 0,
            }}>
              <img src="visual_elements/home_screen_sponsor_banner.PNG" alt="Charity Mobile — Pro-Life Cell Phone Service" style={{ width: "100%", display: "block" }} />
            </div>
          )}

          {/* Now Playing bar — hidden when video player is active */}
          {!videoPlayerOpen && <div onClick={() => { setActiveTab("live"); setLivePlayerOpen(true); }} style={{
            position: "absolute", bottom: activeTab === "home" ? 128 : 72, left: 0, right: 0,
            background: "linear-gradient(135deg, #1b5e20, #2e7d32)",
            display: "flex", alignItems: "center", justifyContent: "space-between",
            padding: "10px 14px 10px 10px", zIndex: 10, cursor: "pointer",
          }}>
            <div style={{ display: "flex", alignItems: "center", gap: 12 }}>
              <div style={{ width: 60, height: 60, flexShrink: 0, overflow: "hidden", borderRadius: 10 }}>
                <img src="rr_shows/morning_air.jpg" alt="Morning Air" style={{ width: "100%", height: "100%", objectFit: "cover", display: "block" }} />
              </div>
              <div>
                <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, color: "rgba(255,255,255,0.7)", fontWeight: 700, letterSpacing: 1, textTransform: "uppercase", marginBottom: 3 }}>Listen Live · Now Playing</div>
                <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 15, color: "#fff", fontWeight: 700 }}>Morning Air</div>
              </div>
            </div>
            <div style={{ width: 38, height: 38, borderRadius: "50%", background: "#fff", display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer", flexShrink: 0 }}>
              <svg width="19" height="19" viewBox="0 0 24 24" fill="#2e7d32"><path d="M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z"/></svg>
            </div>
          </div>}

          {/* ═══ MINI PLAYER BAR — replaces Now Playing bar ═══ */}
          {videoPlayerOpen && videoPlayerData && playerMode === "mini" && (
            <div onClick={expandFromMini} style={{
              position: "absolute", bottom: activeTab === "home" ? 126 : 70, left: 0, right: 0, height: 66,
              background: "#0d2240", borderRadius: "10px 10px 0 0",
              display: "flex", alignItems: "center", padding: "0 14px", gap: 12,
              zIndex: 150, cursor: "pointer",
            }}>
              {/* Thumbnail — landscape */}
              <div style={{
                width: 72, height: 44, background: "#2a2a2a", borderRadius: 6,
                flexShrink: 0, display: "flex", alignItems: "center", justifyContent: "center",
                overflow: "hidden", position: "relative",
              }}>
                {getSeriesImage(videoPlayerData.series)
                  ? <img src={getSeriesImage(videoPlayerData.series)} style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} />
                  : <svg width={12} height={12} viewBox="0 0 24 24" fill="#555"><polygon points="6,3 20,12 6,21" /></svg>
                }
              </div>
              {/* Title + subtitle + progress */}
              <div style={{ flex: 1, minWidth: 0 }}>
                <div style={{
                  color: "#fff", fontSize: 13, fontWeight: 600, fontFamily: "system-ui",
                  overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap",
                }}>{videoPlayerData.title}</div>
                <div style={{ color: "#666", fontSize: 11, fontFamily: "system-ui", marginBottom: 6 }}>{videoPlayerData.series}</div>
                <div style={{ height: 2, background: "#333", borderRadius: 1 }}>
                  <div style={{ height: "100%", width: "35%", background: "#fff", borderRadius: 1 }} />
                </div>
              </div>
              {/* Play/pause — circle button */}
              <button onClick={(e) => { e.stopPropagation(); setIsPlaying(!isPlaying); }} style={{ background: "rgba(255,255,255,0.15)", border: "none", cursor: "pointer", padding: 0, width: 36, height: 36, borderRadius: "50%", display: "flex", alignItems: "center", justifyContent: "center", flexShrink: 0 }}>
                {isPlaying
                  ? <svg width={18} height={18} viewBox="0 0 24 24" fill="white"><rect x="6" y="4" width="4" height="16" rx="1" /><rect x="14" y="4" width="4" height="16" rx="1" /></svg>
                  : <svg width={18} height={18} viewBox="0 0 24 24" fill="white"><polygon points="8,4 20,12 8,20" /></svg>
                }
              </button>
            </div>
          )}
          )}

          {/* Bottom nav — 5 evenly-spaced flex items */}
          <div style={{
            position: "absolute", bottom: 0, left: 0, right: 0, height: 72,
            background: "#3f6080",
            display: "flex", alignItems: "center",
            paddingBottom: 8, zIndex: 10,
          }}>
            {/* HOME */}
            <div onClick={() => { setActiveTab("home"); setLivePlayerOpen(false); setSettingsOpen(false); }} style={{ flex: 1, display: "flex", flexDirection: "column", alignItems: "center", gap: 4, cursor: "pointer", color: activeTab === "home" ? "#fff" : "rgba(255,255,255,0.5)" }}>
              <img src="visual_elements/nav_bar_bottom/noun-home-button-8216844-FFFFFF.png" style={{ width: 24, height: 24, opacity: activeTab === "home" ? 1 : 0.5 }} />
              <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, fontWeight: 700, letterSpacing: 0.5 }}>HOME</span>
            </div>
            {/* LISTEN */}
            <div onClick={() => { setActiveTab("listen"); setListenView("landing"); setView("main"); setMainSearchOpen(false); setMainSearch(""); setLivePlayerOpen(false); setSettingsOpen(false); }} style={{ flex: 1, display: "flex", flexDirection: "column", alignItems: "center", gap: 4, cursor: "pointer", color: activeTab === "listen" ? "#fff" : "rgba(255,255,255,0.5)" }}>
              <img src="visual_elements/nav_bar_bottom/noun-headphone-6065706-FFFFFF.png" style={{ width: 24, height: 24, opacity: activeTab === "listen" ? 1 : 0.5 }} />
              <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, fontWeight: 700, letterSpacing: 0.5 }}>LISTEN</span>
            </div>
            {/* LIVE — center slot, red circle */}
            <div onClick={triggerLive} style={{ flex: 1, display: "flex", flexDirection: "column", alignItems: "center", gap: 3, cursor: "pointer" }}>
              <div style={{
                width: 44, height: 44, borderRadius: "50%",
                background: "linear-gradient(145deg, #d32f2f, #b71c1c)",
                display: "flex", alignItems: "center", justifyContent: "center",
                boxShadow: "0 2px 8px rgba(211,47,47,0.4)",
              }}>
                <StaticWaveform animating={liveAnimating} />
              </div>
              <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, fontWeight: 700, letterSpacing: 0.5, color: activeTab === "live" ? "#fff" : "rgba(255,255,255,0.5)" }}>LIVE</span>
            </div>
            {/* WATCH */}
            <div onClick={() => { setActiveTab("watch"); setWatchView("home"); setSelectedSeries(null); setLivePlayerOpen(false); setSettingsOpen(false); }} style={{ flex: 1, display: "flex", flexDirection: "column", alignItems: "center", gap: 4, cursor: "pointer", color: activeTab === "watch" ? "#fff" : "rgba(255,255,255,0.5)" }}>
              <img src="visual_elements/nav_bar_bottom/noun-play-6444203-FFFFFF.png" style={{ width: 24, height: 24, opacity: activeTab === "watch" ? 1 : 0.5 }} />
              <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, fontWeight: 700, letterSpacing: 0.5 }}>WATCH</span>
            </div>
            {/* PRAY */}
            <div onClick={() => { setActiveTab("pray"); setLivePlayerOpen(false); setSettingsOpen(false); }} style={{ flex: 1, display: "flex", flexDirection: "column", alignItems: "center", gap: 4, cursor: "pointer", color: activeTab === "pray" ? "#fff" : "rgba(255,255,255,0.5)" }}>
              <img src="visual_elements/nav_bar_bottom/noun-pray-1480648-FFFFFF.png" style={{ width: 24, height: 24, opacity: activeTab === "pray" ? 1 : 0.5 }} />
              <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, fontWeight: 700, letterSpacing: 0.5 }}>PRAY</span>
            </div>
          </div>

          {/* Live Player overlay */}
          {livePlayerOpen && (
            <div style={{ position: "absolute", top: 0, left: 0, right: 0, bottom: 72, zIndex: 100, background: "linear-gradient(180deg, #058340 0%, #112a15 100%)", display: "flex", flexDirection: "column", alignItems: "center" }}>
              {/* Status bar strip — transparent PNG overlaid on gradient */}
              <img src="current_app_state/big_livestream_player_top_strip.PNG" style={{ position: "absolute", top: 0, left: 0, width: "100%", zIndex: 1, pointerEvents: "none" }} />
              {/* Spacer to push content below status bar */}
              <div style={{ height: 44, flexShrink: 0, width: "100%" }} />
              {/* Down chevron — tap to close */}
              <div onClick={() => { setActiveTab(previousTab); setLivePlayerOpen(false); }} style={{ display: "flex", justifyContent: "center", paddingTop: 10, paddingBottom: 4, cursor: "pointer", width: "100%" }}>
                <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="rgba(255,255,255,0.6)" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
              </div>
              {/* NOW PLAYING */}
              <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 12, fontWeight: 700, letterSpacing: 3, color: "rgba(255,255,255,0.6)", textTransform: "uppercase", marginTop: 6 }}>Now Playing</div>
              {/* Show art */}
              <div style={{ marginTop: 20, flexShrink: 0 }}>
                <img src="rr_shows/morning_air.jpg" style={{ width: 258, height: 258, borderRadius: 14, boxShadow: "0 12px 48px rgba(0,0,0,0.5)", objectFit: "cover", display: "block" }} />
              </div>
              {/* LISTEN LIVE */}
              <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 13, fontWeight: 700, letterSpacing: 3, color: "rgba(255,255,255,0.6)", textTransform: "uppercase", marginTop: 28 }}>Listen Live</div>
              {/* Show title */}
              <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 24, fontWeight: 700, color: "#fff", marginTop: 8, lineHeight: 1.2, textAlign: "center", padding: "0 32px" }}>Morning Air</div>
              {/* Share icon */}
              <div style={{ marginTop: 16, cursor: "pointer" }}>
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="rgba(255,255,255,0.6)" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" y1="2" x2="12" y2="15"/></svg>
              </div>
              {/* Pause button */}
              <div style={{ marginTop: 28 }}>
                <div style={{ width: 82, height: 82, borderRadius: "50%", background: "#fff", display: "flex", alignItems: "center", justifyContent: "center", boxShadow: "0 6px 24px rgba(0,0,0,0.4)", cursor: "pointer" }}>
                  <svg width="34" height="34" viewBox="0 0 24 24" fill="#1a5c28" stroke="none"><rect x="5" y="3" width="5" height="18" rx="1.5"/><rect x="14" y="3" width="5" height="18" rx="1.5"/></svg>
                </div>
              </div>
            </div>
          )}

          {/* ═══ VIDEO PLAYER OVERLAY ═══ */}
          {videoPlayerOpen && videoPlayerData && playerMode === "portrait" && (
            <div style={{
              position: "absolute", top: 0, left: 0, right: 0, bottom: 0,
              zIndex: 200, background: vP.bg,
              display: "flex", flexDirection: "column",
            }}>
              <PlayerStatusBar />
              <PlayerDownArrow onClick={collapseToMini} />
              <div style={{ flex: 1 }} />
              <PlayerVideoTile onFullscreen={() => setPlayerMode("landscape")} onTapVideo={() => setPlayerMode("postVideo")} image={getSeriesImage(videoPlayerData.series)} />
              <div style={{ flex: 1 }} />
              {/* Title + series name */}
              <div style={{ padding: "0 20px", flexShrink: 0 }}>
                <div style={{ color: vP.text1, fontSize: 19, fontWeight: 700, fontFamily: "system-ui", lineHeight: 1.25, letterSpacing: "-0.01em" }}>
                  {videoPlayerData.title}
                </div>
                <div style={{ color: vP.text2, fontSize: 13, fontFamily: "system-ui", marginTop: 4 }}>
                  {videoPlayerData.series}
                </div>
              </div>
              <PlayerScrubBar />
              {/* Transport controls */}
              <div style={{ display: "flex", alignItems: "center", justifyContent: "center", gap: 40, padding: "10px 20px 20px", flexShrink: 0 }}>
                <PlayerSkip />
                <PlayerPlayPause isPlaying={isPlaying} onToggle={() => setIsPlaying(!isPlaying)} />
                <PlayerSkip fwd />
              </div>
              <PlayerIconRow />
              {prayerModalOpen && <PlayerPrayerModal onClose={() => setPrayerModalOpen(false)} />}
            </div>
          )}

          {/* ═══ LANDSCAPE PLAYER ═══ */}
          {videoPlayerOpen && videoPlayerData && playerMode === "landscape" && (
            <div style={{
              position: "absolute", top: 0, left: 0, right: 0, bottom: 0,
              zIndex: 200, background: vP.bg, overflow: "hidden",
            }}>
              {/* Video fills entire frame */}
              <div style={{
                position: "absolute", inset: 0,
                background: "linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 50%, #1a1a1a 100%)",
                display: "flex", alignItems: "center", justifyContent: "center",
              }}>
                {getSeriesImage(videoPlayerData.series)
                  ? <img src={getSeriesImage(videoPlayerData.series)} style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} />
                  : <div style={{ color: "#444", fontSize: 14, fontFamily: "monospace", textTransform: "uppercase", letterSpacing: 2 }}>Video Content — Landscape</div>
                }
              </div>
              {/* Top gradient */}
              <div style={{ position: "absolute", top: 0, left: 0, right: 0, height: 80, background: "linear-gradient(to bottom, rgba(0,0,0,0.6), transparent)" }} />
              {/* Bottom gradient */}
              <div style={{ position: "absolute", bottom: 0, left: 0, right: 0, height: 160, background: "linear-gradient(to top, rgba(0,0,0,0.7), transparent)" }} />
              {/* Top bar: title left, exit fullscreen right */}
              <div style={{ position: "absolute", top: 20, left: 20, right: 20, display: "flex", justifyContent: "space-between", alignItems: "flex-start" }}>
                <div>
                  <div style={{ color: vP.white, fontSize: 14, fontWeight: 700, fontFamily: "system-ui" }}>{videoPlayerData.title}</div>
                  <div style={{ color: "#aaa", fontSize: 11, fontFamily: "system-ui", marginTop: 2 }}>{videoPlayerData.series}</div>
                </div>
                <button onClick={() => setPlayerMode("portrait")} style={{
                  width: 30, height: 30, background: vP.white, border: "none",
                  borderRadius: 5, cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center",
                }}>
                  <svg width={14} height={14} viewBox="0 0 24 24" fill="none" stroke="#000" strokeWidth="2.5">
                    <polyline points="4,14 10,14 10,20" /><polyline points="20,10 14,10 14,4" />
                    <line x1="14" y1="10" x2="21" y2="3" /><line x1="3" y1="21" x2="10" y2="14" />
                  </svg>
                </button>
              </div>
              {/* Center: transport controls */}
              <div style={{ position: "absolute", top: "50%", left: "50%", transform: "translate(-50%, -50%)", display: "flex", alignItems: "center", gap: 36 }}>
                <button style={{ background: "none", border: "none", cursor: "pointer", padding: 14, display: "flex", flexDirection: "column", alignItems: "center" }}>
                  <svg width={34} height={34} viewBox="-2 -2 28 28" fill="none" stroke="white" strokeWidth="1.8" strokeLinecap="round">
                    <path d="M1 4v6h6" /><path d="M3.51 15a9 9 0 105.64-8.36L1 10" />
                  </svg>
                  <span style={{ fontSize: 12, fontWeight: 600, color: "#aaa", fontFamily: "system-ui", marginTop: 3 }}>15s</span>
                </button>
                <button onClick={() => setIsPlaying(!isPlaying)} style={{
                  background: "rgba(255,255,255,0.15)", border: "2px solid rgba(255,255,255,0.3)",
                  borderRadius: "50%", width: 56, height: 56, cursor: "pointer",
                  display: "flex", alignItems: "center", justifyContent: "center",
                }}>
                  {isPlaying
                    ? <svg width={24} height={24} viewBox="0 0 24 24" fill="white"><rect x="6" y="4" width="4" height="16" rx="1" /><rect x="14" y="4" width="4" height="16" rx="1" /></svg>
                    : <svg width={24} height={24} viewBox="0 0 24 24" fill="white"><polygon points="7,3 21,12 7,21" /></svg>
                  }
                </button>
                <button style={{ background: "none", border: "none", cursor: "pointer", padding: 14, display: "flex", flexDirection: "column", alignItems: "center" }}>
                  <svg width={34} height={34} viewBox="-2 -2 28 28" fill="none" stroke="white" strokeWidth="1.8" strokeLinecap="round">
                    <path d="M23 4v6h-6" /><path d="M20.49 15a9 9 0 11-5.64-8.36L23 10" />
                  </svg>
                  <span style={{ fontSize: 12, fontWeight: 600, color: "#aaa", fontFamily: "system-ui", marginTop: 3 }}>15s</span>
                </button>
              </div>
              {/* Bottom: scrub bar + timestamps + icon row */}
              <div style={{ position: "absolute", bottom: 24, left: 20, right: 20 }}>
                <div style={{ position: "relative", height: 4, background: "rgba(255,255,255,0.2)", borderRadius: 2 }}>
                  <div style={{ position: "absolute", left: 0, top: 0, height: "100%", width: "35%", background: vP.white, borderRadius: 2 }} />
                  <div style={{ position: "absolute", top: "50%", left: "35%", transform: "translate(-50%, -50%)", width: 10, height: 10, background: vP.white, borderRadius: "50%" }} />
                </div>
                <div style={{ display: "flex", justifyContent: "space-between", marginTop: 4 }}>
                  <span style={{ color: "#888", fontSize: 11, fontFamily: "system-ui", fontWeight: 500, fontVariantNumeric: "tabular-nums" }}>7:42</span>
                  <span style={{ color: "#888", fontSize: 11, fontFamily: "system-ui", fontWeight: 500, fontVariantNumeric: "tabular-nums" }}>-14:26</span>
                </div>
                <div style={{ display: "flex", justifyContent: "center", gap: 24, marginTop: 6 }}>
                  {/* Share */}
                  <button style={{ background: "none", border: "none", cursor: "pointer", padding: 4 }}>
                    <svg width={20} height={20} viewBox="0 0 24 24" fill="none" stroke="#888" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8" /><polyline points="16,6 12,2 8,6" /><line x1="12" y1="2" x2="12" y2="15" /></svg>
                  </button>
                  {/* Prayer */}
                  <button style={{ background: "none", border: "none", cursor: "pointer", padding: 4 }}>
                    <svg width={20} height={20} viewBox="0 0 24 24" fill="none" stroke="#888" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z" /></svg>
                  </button>
                  {/* Sleep */}
                  <button style={{ background: "none", border: "none", cursor: "pointer", padding: 4 }}>
                    <svg width={20} height={20} viewBox="0 0 24 24" fill="none" stroke="#888" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" /></svg>
                  </button>
                  {/* Series — navigate to series page */}
                  <button onClick={(e) => { e.stopPropagation(); const sid = seriesNameToId[(videoPlayerData.series || "").toLowerCase()]; closeVideoPlayer(); setActiveTab("watch"); if (sid) goToWatchSeries(sid); }} style={{ background: "none", border: "none", cursor: "pointer", padding: 4 }}>
                    <svg width={20} height={20} viewBox="0 0 24 24" fill="none" stroke="#888" strokeWidth="2" strokeLinecap="round"><line x1="8" y1="6" x2="21" y2="6" /><line x1="8" y1="12" x2="21" y2="12" /><line x1="8" y1="18" x2="21" y2="18" /><line x1="3" y1="6" x2="3.01" y2="6" strokeWidth="3" /><line x1="3" y1="12" x2="3.01" y2="12" strokeWidth="3" /><line x1="3" y1="18" x2="3.01" y2="18" strokeWidth="3" /></svg>
                  </button>
                </div>
              </div>
            </div>
          )}

          {/* ═══ LIVE PLAYER ═══ */}
          {videoPlayerOpen && videoPlayerData && playerMode === "live" && (
            <div style={{
              position: "absolute", top: 0, left: 0, right: 0, bottom: 0,
              zIndex: 200, background: vP.bg,
              display: "flex", flexDirection: "column",
            }}>
              <PlayerStatusBar />
              <PlayerDownArrow onClick={collapseToMini} />
              <div style={{ flex: 1 }} />
              <PlayerVideoTile label="Live Video" live image={getSeriesImage(videoPlayerData.series)} onTapVideo={() => setPlayerMode("postLive")} />
              <div style={{ flex: 1 }} />
              {/* Title + series name */}
              <div style={{ padding: "0 20px", flexShrink: 0 }}>
                <div style={{ color: vP.text1, fontSize: 19, fontWeight: 700, fontFamily: "system-ui", lineHeight: 1.25, letterSpacing: "-0.01em" }}>
                  {videoPlayerData.title}
                </div>
                <div style={{ color: vP.text2, fontSize: 13, fontFamily: "system-ui", marginTop: 4 }}>
                  {videoPlayerData.series}
                </div>
              </div>
              {/* Live indicator bar — thin line with red dot at right end */}
              <div style={{ padding: "18px 20px 10px", flexShrink: 0 }}>
                <div style={{ height: 3, background: vP.scrubTrack, borderRadius: 2, position: "relative" }}>
                  <div style={{ position: "absolute", right: 0, top: "50%", transform: "translateY(-50%)", width: 8, height: 8, background: vP.liveRed, borderRadius: "50%" }} />
                </div>
              </div>
              {/* Play/pause only — NO skip buttons */}
              <div style={{ display: "flex", alignItems: "center", justifyContent: "center", padding: "10px 20px 16px", flexShrink: 0 }}>
                <PlayerPlayPause isPlaying={isPlaying} onToggle={() => setIsPlaying(!isPlaying)} />
              </div>
              {/* Standalone prayer request button */}
              <div style={{ padding: "8px 30px 24px", flexShrink: 0 }}>
                <button onClick={() => setPrayerModalOpen(true)} style={{
                  width: "100%", padding: "14px 0", background: vP.white,
                  border: "none", borderRadius: 12, cursor: "pointer",
                  display: "flex", alignItems: "center", justifyContent: "center", gap: 8,
                }}>
                  <svg width={16} height={16} viewBox="0 0 24 24" fill="none" stroke="#000" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z" />
                  </svg>
                  <span style={{ color: "#000", fontSize: 14, fontFamily: "system-ui", fontWeight: 600 }}>Submit a Prayer Request</span>
                </button>
              </div>
              {/* Bottom icons — NO prayer icon (it has its own button above) */}
              <PlayerIconRow showAll={true} onPrayer={null} />
              {prayerModalOpen && <PlayerPrayerModal onClose={() => setPrayerModalOpen(false)} />}
            </div>
          )}

          {/* ═══ POST-LIVE END SCREEN ═══ */}
          {videoPlayerOpen && videoPlayerData && playerMode === "postLive" && (() => {
            const { prayerId, isSet } = getLiveReminderState();
            return (
            <div style={{
              position: "absolute", top: 0, left: 0, right: 0, bottom: 0,
              zIndex: 200, background: vP.postBg,
              display: "flex", flexDirection: "column", overflow: "auto",
            }}>
              <PlayerStatusBar />
              {/* Done pill — top right */}
              <div style={{ display: "flex", justifyContent: "flex-end", padding: "0 20px", flexShrink: 0 }}>
                <button onClick={closeVideoPlayer} style={{
                  background: "rgba(180,200,230,0.2)", border: "none",
                  borderRadius: 20, padding: "7px 16px", cursor: "pointer",
                }}>
                  <span style={{ color: "#fff", fontSize: 14, fontWeight: 600, fontFamily: "system-ui" }}>Done</span>
                </button>
              </div>
              {/* Header */}
              <div style={{ padding: "24px 20px 0", flexShrink: 0, textAlign: "center" }}>
                <div style={{ fontSize: 12, color: "rgba(255,255,255,0.35)", fontFamily: "system-ui", fontWeight: 600, letterSpacing: "0.08em", textTransform: "uppercase", marginBottom: 8 }}>Stream Ended</div>
                <div style={{ fontSize: 34, fontWeight: 800, color: "#fff", fontFamily: "system-ui", lineHeight: 1.1, letterSpacing: "-0.02em" }}>Want to know{"\n"}next time?</div>
                <div style={{ fontSize: 18, color: "rgba(255,255,255,0.8)", fontFamily: "system-ui", marginTop: 6, fontWeight: 500 }}>Get reminded when {videoPlayerData.series} goes live</div>
              </div>
              {/* Reminder card */}
              {prayerId && (
              <div style={{ padding: "20px 20px 0", flexShrink: 0 }}>
                <div onClick={() => toggleReminder(prayerId)} style={{
                  background: "#fff", borderRadius: 16, padding: "18px 20px",
                  display: "flex", alignItems: "center", gap: 14, cursor: "pointer",
                  transition: "all 0.25s",
                }}>
                  {/* Bell circle */}
                  <div style={{
                    width: 48, height: 48, borderRadius: "50%",
                    background: isSet ? "rgba(46,125,76,0.1)" : wC.goldSoft,
                    display: "flex", alignItems: "center", justifyContent: "center",
                    transition: "background 0.25s",
                  }}>
                    <svg width={24} height={24} viewBox="0 0 24 24" fill={isSet ? wC.prayerAccent : "none"} stroke={isSet ? wC.prayerAccent : wC.goldText} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                      <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9" /><path d="M13.73 21a2 2 0 01-3.46 0" />
                    </svg>
                  </div>
                  {/* Text */}
                  <div style={{ flex: 1 }}>
                    <div style={{ color: "#111", fontSize: 16, fontWeight: 700, fontFamily: "system-ui", lineHeight: 1.3 }}>{videoPlayerData.series}</div>
                    <div style={{ color: isSet ? wC.prayerAccent : wC.goldText, fontSize: 13, fontWeight: 600, fontFamily: "system-ui", marginTop: 2, transition: "color 0.25s" }}>
                      {isSet ? "Reminder set" : "Remind me"}
                    </div>
                  </div>
                  {/* Toggle indicator */}
                  <div style={{
                    width: 32, height: 32, borderRadius: "50%",
                    background: isSet ? "rgba(46,125,76,0.1)" : wC.goldSoft,
                    display: "flex", alignItems: "center", justifyContent: "center",
                    transition: "background 0.25s",
                  }}>
                    {isSet ? (
                      <svg width={16} height={16} viewBox="0 0 24 24" fill="none" stroke={wC.prayerAccent} strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"><polyline points="20,6 9,17 4,12" /></svg>
                    ) : (
                      <svg width={16} height={16} viewBox="0 0 24 24" fill="none" stroke={wC.goldText} strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" /></svg>
                    )}
                  </div>
                </div>
              </div>
              )}
              {/* Share card */}
              <div style={{ padding: "16px 20px 0", flexShrink: 0 }}>
                <div style={{ background: "#fff", borderRadius: 16, overflow: "hidden" }}>
                  <div style={{ width: "100%", aspectRatio: "16/9", background: "#ddd", display: "flex", alignItems: "center", justifyContent: "center", position: "relative", overflow: "hidden" }}>
                    {getSeriesImage(videoPlayerData.series)
                      ? <img src={getSeriesImage(videoPlayerData.series)} style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} />
                      : <svg width={28} height={28} viewBox="0 0 24 24" fill="#bbb"><polygon points="6,3 20,12 6,21" /></svg>
                    }
                    {/* LIVE badge on thumbnail */}
                    <div style={{ position: "absolute", top: 8, left: 8, background: vP.liveRed, borderRadius: 4, padding: "3px 7px", display: "flex", alignItems: "center", gap: 4 }}>
                      <div style={{ width: 6, height: 6, borderRadius: "50%", background: "#fff" }} />
                      <span style={{ color: "#fff", fontSize: 10, fontWeight: 700, fontFamily: "system-ui", textTransform: "uppercase", letterSpacing: "0.04em", lineHeight: 1 }}>Live</span>
                    </div>
                  </div>
                  <div style={{ padding: "12px 14px 14px" }}>
                    <div style={{ color: "#111", fontSize: 15, fontWeight: 700, fontFamily: "system-ui", lineHeight: 1.3 }}>{videoPlayerData.title}</div>
                    <div style={{ color: "#888", fontSize: 12, fontFamily: "system-ui", marginTop: 3 }}>{videoPlayerData.series}</div>
                    <button style={{ marginTop: 12, width: "100%", padding: "13px 0", background: vP.accent, border: "none", borderRadius: 10, cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", gap: 8 }}>
                      <svg width={16} height={16} viewBox="0 0 24 24" fill="none" stroke="#fff" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                        <path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8" /><polyline points="16,6 12,2 8,6" /><line x1="12" y1="2" x2="12" y2="15" />
                      </svg>
                      <span style={{ color: "#fff", fontSize: 14, fontWeight: 600, fontFamily: "system-ui" }}>Share Stream</span>
                    </button>
                  </div>
                </div>
              </div>
              {/* Back to Live Stream button */}
              <div style={{ padding: "16px 20px 0", flexShrink: 0 }}>
                <button onClick={triggerLive} style={{
                  width: "100%", padding: "14px 0",
                  background: "transparent",
                  border: "1px solid rgba(255,255,255,0.2)",
                  borderRadius: 12, cursor: "pointer",
                  display: "flex", alignItems: "center", justifyContent: "center", gap: 8,
                }}>
                  <div style={{ width: 7, height: 7, background: vP.liveRed, borderRadius: "50%" }} />
                  <span style={{ color: "#fff", fontSize: 14, fontWeight: 600, fontFamily: "system-ui" }}>Back to Live Stream</span>
                </button>
              </div>
              <div style={{ flex: 1 }} />
            </div>
            );
          })()}

          {/* ═══ POST-VIDEO SCREEN ═══ */}
          {videoPlayerOpen && videoPlayerData && playerMode === "postVideo" && (
            <div style={{
              position: "absolute", top: 0, left: 0, right: 0, bottom: 0,
              zIndex: 200, background: vP.postBg,
              display: "flex", flexDirection: "column", overflow: "hidden",
            }}>
              <PlayerStatusBar />
              {/* Done pill — top right */}
              <div style={{ display: "flex", justifyContent: "flex-end", padding: "0 20px", flexShrink: 0 }}>
                <button onClick={closeVideoPlayer} style={{
                  background: "rgba(180,200,230,0.2)", border: "none",
                  borderRadius: 20, padding: "7px 16px", cursor: "pointer",
                }}>
                  <span style={{ color: "#fff", fontSize: 14, fontWeight: 600, fontFamily: "system-ui" }}>Done</span>
                </button>
              </div>
              {/* Share prompt */}
              <div style={{ padding: "24px 20px 0", flexShrink: 0, textAlign: "center" }}>
                <div style={{ fontSize: 12, color: "rgba(255,255,255,0.35)", fontFamily: "system-ui", fontWeight: 600, letterSpacing: "0.08em", textTransform: "uppercase", marginBottom: 8 }}>Episode Complete</div>
                <div style={{ fontSize: 34, fontWeight: 800, color: "#fff", fontFamily: "system-ui", lineHeight: 1.1, letterSpacing: "-0.02em" }}>Loved it?</div>
                <div style={{ fontSize: 18, color: "rgba(255,255,255,0.8)", fontFamily: "system-ui", marginTop: 6, fontWeight: 500 }}>Share it with a friend or family!</div>
              </div>
              {/* Share card */}
              <div style={{ padding: "20px 20px 0", flexShrink: 0 }}>
                <div style={{ background: "#fff", borderRadius: 16, overflow: "hidden" }}>
                  <div style={{ width: "100%", aspectRatio: "16/9", background: "#ddd", display: "flex", alignItems: "center", justifyContent: "center", position: "relative", overflow: "hidden" }}>
                    {getSeriesImage(videoPlayerData.series)
                      ? <img src={getSeriesImage(videoPlayerData.series)} style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} />
                      : <svg width={28} height={28} viewBox="0 0 24 24" fill="#bbb"><polygon points="6,3 20,12 6,21" /></svg>
                    }
                    <div style={{ position: "absolute", bottom: 8, right: 8, background: "rgba(0,0,0,0.6)", borderRadius: 4, padding: "3px 6px" }}>
                      <span style={{ color: "#fff", fontSize: 10, fontWeight: 600, fontFamily: "system-ui", fontVariantNumeric: "tabular-nums", lineHeight: 1 }}>22:18</span>
                    </div>
                  </div>
                  <div style={{ padding: "12px 14px 14px" }}>
                    <div style={{ color: "#111", fontSize: 15, fontWeight: 700, fontFamily: "system-ui", lineHeight: 1.3 }}>{videoPlayerData.title}</div>
                    <div style={{ color: "#888", fontSize: 12, fontFamily: "system-ui", marginTop: 3 }}>{videoPlayerData.series}</div>
                    <button style={{ marginTop: 12, width: "100%", padding: "13px 0", background: vP.accent, border: "none", borderRadius: 10, cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", gap: 8 }}>
                      <svg width={16} height={16} viewBox="0 0 24 24" fill="none" stroke="#fff" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                        <path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8" /><polyline points="16,6 12,2 8,6" /><line x1="12" y1="2" x2="12" y2="15" />
                      </svg>
                      <span style={{ color: "#fff", fontSize: 14, fontWeight: 600, fontFamily: "system-ui" }}>Share Video</span>
                    </button>
                  </div>
                </div>
              </div>
              {/* Next Up card */}
              <div style={{ padding: "16px 20px 0", flexShrink: 0 }}>
                <div onClick={() => { setVideoPlayerData({ title: "Fatherhood", series: videoPlayerData.series }); setPlayerMode("portrait"); setIsPlaying(true); }} style={{ display: "flex", gap: 12, background: "#fff", borderRadius: 14, cursor: "pointer", padding: 10, alignItems: "center" }}>
                  <div style={{ width: 100, height: 60, background: "#ddd", borderRadius: 8, flexShrink: 0, display: "flex", alignItems: "center", justifyContent: "center", position: "relative", overflow: "hidden" }}>
                    {getSeriesImage(videoPlayerData.series)
                      ? <img src={getSeriesImage(videoPlayerData.series)} style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} />
                      : <svg width={16} height={16} viewBox="0 0 24 24" fill="#bbb"><polygon points="6,3 20,12 6,21" /></svg>
                    }
                    <div style={{ position: "absolute", bottom: 3, right: 3, background: "rgba(0,0,0,0.6)", borderRadius: 3, padding: "2px 4px" }}>
                      <span style={{ color: "#fff", fontSize: 8, fontWeight: 600, fontFamily: "system-ui", lineHeight: 1 }}>24:15</span>
                    </div>
                  </div>
                  <div style={{ flex: 1, minWidth: 0 }}>
                    <div style={{ color: "#999", fontSize: 10, fontWeight: 600, fontFamily: "system-ui", textTransform: "uppercase", letterSpacing: "0.06em", marginBottom: 3 }}>Next Up</div>
                    <div style={{ color: "#111", fontSize: 13, fontWeight: 600, fontFamily: "system-ui", lineHeight: 1.3 }}>Fatherhood</div>
                    <div style={{ color: "#888", fontSize: 11, fontFamily: "system-ui", marginTop: 2 }}>{videoPlayerData.series}</div>
                  </div>
                  {/* Countdown timer ring */}
                  <div style={{ width: 44, height: 44, flexShrink: 0, position: "relative", display: "flex", alignItems: "center", justifyContent: "center" }}>
                    <svg width={44} height={44} viewBox="0 0 44 44" style={{ position: "absolute", transform: "rotate(-90deg)" }}>
                      <circle cx="22" cy="22" r="19" fill="none" stroke="rgba(37,99,235,0.2)" strokeWidth="3" />
                      <circle cx="22" cy="22" r="19" fill="none" stroke={vP.accent} strokeWidth="3"
                        strokeDasharray={`${2 * Math.PI * 19}`} strokeDashoffset={`${2 * Math.PI * 19 * 0.85}`} strokeLinecap="round" />
                    </svg>
                    <div style={{ width: 34, height: 34, background: vP.accent, borderRadius: "50%", display: "flex", alignItems: "center", justifyContent: "center" }}>
                      <svg width={13} height={13} viewBox="0 0 24 24" fill="#fff"><polygon points="7,3 21,12 7,21" /></svg>
                    </div>
                  </div>
                </div>
              </div>
              <div style={{ flex: 1 }} />
            </div>
          )}


        </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<AudiobooksApp />);
  </script>
</body>
</html>
