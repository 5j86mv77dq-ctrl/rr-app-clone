<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RR Audiobooks Prototype — v9</title>
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,400;0,600;0,700;1,400&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { background: #1a1a2e; min-height: 100vh; display: flex; align-items: flex-start; justify-content: center; padding: 20px 0 40px; }
    @keyframes waveBar { 0% { transform: scaleY(1); } 35% { transform: scaleY(var(--peak, 1)); } 65% { transform: scaleY(0.5); } 100% { transform: scaleY(1); } }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }
  </style>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useMemo, useEffect, useRef } = React;

    const colors = {
      headerBg: "#3b6fa0",
      cardBg: "#4a7fb3",
      pageBg: "#f5f5f5",
      contentBg: "#ffffff",
      accent: "#3b6fa0",
      text: "#2a2a2a",
      textMuted: "#7a7a7a",
      red: "#d32f2f",
      searchBg: "rgba(255,255,255,0.15)",
      searchBgLight: "#f0f0f0",
    };

    // ═══ WATCH TAB — DESIGN TOKENS ═══
    const wC = {
      bg: "#FFFFFF", surface: "#F5F5F7", card: "#FFFFFF",
      border: "rgba(0,0,0,0.08)",
      gold: "#B8922E", goldSoft: "rgba(184,146,46,0.08)", goldText: "#8A6D1B",
      prayerAccent: "#2E7D4C",
      live: "#D43333", liveSoft: "rgba(212,51,51,0.05)", liveBg: "#FEF2F2",
      text1: "#1A1A1A", text2: "#6B6B6B", text3: "#9A9A9A", text4: "#C8C8C8",
      newBadge: "#1A6B3A", newBadgeSoft: "rgba(26,107,58,0.08)",
      shadow: "0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04)",
      shadowMd: "0 4px 12px rgba(0,0,0,0.06), 0 1px 3px rgba(0,0,0,0.04)",
    };

    const audiobooks = {
      spiritual: [
        { id: "s1", title: "Mary at the Crossroads of History", author: "Fr. Francis J. Hoffman", narrator: "Fr. Francis J. Hoffman", duration: "3h 38m", color: "#1a3a5c", image: "covers/mary-at-the-crossroads.png",
          summary: "Adam and Eve, our first parents, had free will, and their choices set in motion the entire drama of salvation history. This audiobook traces the thread of Mary's role from Genesis through Revelation, showing how the Blessed Mother stands at every crossroads of human history as a guide, intercessor, and model of faith.",
          credits: { producer: "Michael Torres", director: "Sarah Chen", editor: "James Whitfield", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
        { id: "s2", title: "Confessions", author: "St. Augustine of Hippo", narrator: "Demetrios Troy", duration: "12h 45m", color: "#5c3a1a", image: "covers/confessions.jpg",
          summary: "One of the most influential works in Western literature, the Confessions traces Augustine's spiritual journey from his sinful youth through his conversion to Christianity. Written as a prayer to God, this autobiography reveals the inner struggles of a brilliant mind wrestling with truth, desire, and grace.",
          credits: { producer: "Michael Torres", director: "Sarah Chen", editor: "Demetrios Troy", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
        { id: "s3", title: "The Interior Castle", author: "St. Teresa of Ávila", narrator: "Maria Santos", duration: "6h 12m", color: "#3a1a5c", image: "covers/interior-castle.jpg",
          summary: "St. Teresa of Ávila's masterpiece of mystical theology describes the soul as a castle with seven dwelling places, each representing a stage of spiritual growth. Written for her Carmelite sisters, this work remains one of the most practical and profound guides to the interior life ever composed.",
          credits: { producer: "Michael Torres", director: "James Whitfield", editor: "Maria Santos", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
        { id: "s4", title: "Introduction to the Devout Life", author: "St. Francis de Sales", narrator: "James Whitfield", duration: "8h 30m", color: "#1a5c3a", image: "covers/introduction-devout-life.jpg",
          summary: "Written originally as a series of letters of spiritual direction, St. Francis de Sales composed this timeless guide to show that holiness is possible for everyone, not just monks and nuns. Practical, warm, and deeply human, it covers prayer, the sacraments, temptation, and the virtues needed for daily Christian living.",
          credits: { producer: "Sarah Chen", director: "Michael Torres", editor: "James Whitfield", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
        { id: "s5", title: "Story of a Soul", author: "St. Thérèse of Lisieux", narrator: "Catherine Hart", duration: "5h 55m", color: "#5c1a3a", image: "covers/story-of-a-soul.jpg",
          summary: "The autobiography of St. Thérèse of Lisieux, written under obedience to her religious superiors, reveals her 'Little Way' of spiritual childhood — a path to holiness through small acts of love and trust in God's mercy. This intimate account became one of the most widely read spiritual books of the twentieth century.",
          credits: { producer: "Michael Torres", director: "Sarah Chen", editor: "Catherine Hart", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
      ],
      fiction: [
        { id: "f1", title: "Brideshead Revisited", author: "Evelyn Waugh", narrator: "James Whitfield", duration: "11h 20m", color: "#2a5a2a", image: "covers/brideshead-revisited.jpg",
          summary: "Charles Ryder's enchantment with the aristocratic Flyte family and their crumbling estate, Brideshead, weaves a story of memory, beauty, faith, and the relentless pursuit of grace. Waugh's masterpiece explores how God works through even the most broken and resistant souls.",
          credits: { producer: "Michael Torres", director: "Sarah Chen", editor: "James Whitfield", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
        { id: "f2", title: "The Power and the Glory", author: "Graham Greene", narrator: "Demetrios Troy", duration: "7h 15m", color: "#4a2a1a", image: "covers/power-and-the-glory.jpg",
          summary: "Set during the anti-clerical purges in 1930s Mexico, Greene's novel follows an unnamed 'whiskey priest' — the last remaining clergyman in the state — as he flees persecution while struggling with his own sinfulness. A devastating portrait of grace operating through human weakness.",
          credits: { producer: "Sarah Chen", director: "Michael Torres", editor: "Demetrios Troy", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
        { id: "f3", title: "Kristin Lavransdatter", author: "Sigrid Undset", narrator: "Catherine Hart", duration: "18h 40m", color: "#1a3a5c", image: "covers/kristin-lavransdatter.jpg",
          summary: "Nobel Prize-winning epic set in medieval Norway, following Kristin from her sheltered childhood through a passionate and often turbulent marriage, motherhood, and ultimately a life transformed by faith. Undset's trilogy is one of the great Catholic novels of the twentieth century.",
          credits: { producer: "Michael Torres", director: "James Whitfield", editor: "Catherine Hart", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
        { id: "f4", title: "The Lord of the Rings", author: "J.R.R. Tolkien", narrator: "Martin Shaw", duration: "22h 30m", color: "#3a2a1a", image: "covers/lord-of-the-rings.png",
          summary: "Tolkien's epic tale of hobbits, elves, and the struggle against darkness is fundamentally a Catholic work — a story of providence, sacrifice, mercy, and the power of the small and humble to change the course of history. The greatest fantasy novel ever written, brought to life in audio.",
          credits: { producer: "Michael Torres", director: "Sarah Chen", editor: "Martin Shaw", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
      ],
    };

    const allBooks = [...audiobooks.spiritual, ...audiobooks.fiction];

    const continueListeningData = [
      { book: audiobooks.spiritual[1], progress: 65, timeLeft: "4h 28m" },   // Confessions
      { book: audiobooks.fiction[0], progress: 30, timeLeft: "7h 56m" },     // Brideshead Revisited
      { book: audiobooks.spiritual[4], progress: 85, timeLeft: "53m" },      // Story of a Soul
      { book: audiobooks.fiction[2], progress: 12, timeLeft: "16h 25m" },    // Kristin Lavransdatter
    ];

    // ═══ WATCH TAB — DATA ═══
    const WATCH_SERIES = [
      { id: "daily-mass", title: "Daily Mass", subtitle: "Live from the Chapel", episodes: 180, category: "Prayer", gradient: "linear-gradient(170deg, #7A6B52 0%, #5C4F3A 60%, #3D3528 100%)", description: "Daily Mass celebrated live from the Relevant Radio Chapel. Join us every day at 12:00 PM CT.", host: "Fr. Rocky", isLive: true, liveTime: "12:00 PM CT" },
      { id: "family-rosary", title: "Family Rosary", subtitle: "Pray together every evening", episodes: 230, category: "Prayer", gradient: "linear-gradient(170deg, #5B6B4F 0%, #3F5233 60%, #2A3B22 100%)", description: "Join Fr. Rocky and the Relevant Radio family for the nightly Rosary. Live every evening at 7:00 PM CT.", host: "Fr. Rocky", isLive: true, liveTime: "7:00 PM CT" },
      { id: "divine-mercy", title: "Divine Mercy Chaplet", subtitle: "The Hour of Mercy", episodes: 160, category: "Prayer", gradient: "linear-gradient(170deg, #4F6275 0%, #3A4F63 60%, #253A4D 100%)", description: "Pray the Divine Mercy Chaplet live every day at 3:00 PM CT — the Hour of Mercy.", host: "Drew Mariani", isLive: true, liveTime: "3:00 PM CT" },
      { id: "fulton-sheen", title: "Fulton Sheen", subtitle: "Life Is Worth Living", episodes: 60, category: "Catechesis", gradient: "linear-gradient(140deg, #E8E4F0, #D0C8E0)", description: "The legendary Bishop Fulton J. Sheen in his iconic television series.", host: "Bp. Fulton Sheen" },
      { id: "lenten-mass", title: "Lenten Lessons on the Mass", subtitle: "Fr. Rocky's teaching series", episodes: 40, category: "Catechesis", gradient: "linear-gradient(140deg, #EDE6F5, #D8CEE8)", description: "A structured 40-lesson catechetical journey through the Mass with Fr. Rocky.", host: "Fr. Rocky" },
      { id: "lenten-sacraments", title: "Lenten Lessons on the Sacraments", subtitle: "Fr. Rocky's teaching series", episodes: 40, category: "Catechesis", gradient: "linear-gradient(140deg, #E6EDF5, #CED8E8)", description: "A 40-lesson deep dive into the seven sacraments with Fr. Rocky.", host: "Fr. Rocky" },
      { id: "eucharistic-encounters", title: "Eucharistic Encounters", subtitle: "Fr. Rocky on the Real Presence", episodes: 12, category: "Catechesis", gradient: "linear-gradient(140deg, #F0E8DC, #E0D4C0)", description: "Fr. Rocky explores the mystery and beauty of the Real Presence.", host: "Fr. Rocky" },
      { id: "5min-homilies", title: "5-Minute Homilies", subtitle: "Weekly Sunday reflections", episodes: 50, category: "Catechesis", gradient: "linear-gradient(140deg, #E4F0E8, #D0E8DC)", description: "Short, powerful homilies for every Sunday of the year.", host: "Various Priests" },
      { id: "into-the-breach", title: "Into the Breach", subtitle: "A call to Catholic men", episodes: 8, category: "Catechesis", gradient: "linear-gradient(140deg, #E8E4E0, #D8D0C8)", description: "Knights of Columbus film series challenging Catholic men to step into the breach.", host: "Knights of Columbus" },
      { id: "patrick-madrid", title: "Patrick Madrid", subtitle: "Apologetics & Catholic Living", episodes: 10, category: "Shows", gradient: "linear-gradient(140deg, #F0E8E4, #E0D4CC)", description: "Curated apologetics talks from The Patrick Madrid Show.", host: "Patrick Madrid" },
      { id: "vatican-today", title: "The Vatican Today", subtitle: "Weekly news from Rome", episodes: 4, category: "Shows", gradient: "linear-gradient(140deg, #D8E4F0, #C0D0E8)", description: "Weekly 27-minute news analysis from the heart of the Church.", host: "Relevant Radio" },
      { id: "drew-mariani", title: "Drew Mariani Show", subtitle: "Faith, culture & current events", episodes: 35, category: "Shows", gradient: "linear-gradient(140deg, #E4E8F0, #D0D8E8)", description: "Clips from The Drew Mariani Show.", host: "Drew Mariani" },
      { id: "timmerie", title: "Timmerie", subtitle: "Catholic femininity & culture", episodes: 22, category: "Shows", gradient: "linear-gradient(140deg, #F0E4E8, #E8D0D8)", description: "Clips from Trending with Timmerie.", host: "Timmerie Millington" },
      { id: "seek-2026", title: "SEEK 2026", subtitle: "Full conference talks", episodes: 24, category: "Conferences", gradient: "linear-gradient(140deg, #E8E0F0, #D8D0E8)", description: "Every keynote and breakout from SEEK 2026.", host: "FOCUS" },
      { id: "seek-2025", title: "SEEK 2025", subtitle: "Keynote sessions", episodes: 9, category: "Conferences", gradient: "linear-gradient(140deg, #E0D8F0, #D0C8E0)", description: "Keynote recordings from SEEK 2025.", host: "FOCUS" },
      { id: "lenten-2026", title: "Lenten Series 2026", subtitle: "Seasonal journey through Lent", episodes: 12, category: "Seasonal", gradient: "linear-gradient(140deg, #F0EAE0, #E0D8C8)", description: "A guided Lenten journey with daily reflections.", host: "Various" },
      { id: "doc-collection", title: "Documentaries", subtitle: "Feature-length Catholic films", episodes: 6, category: "Documentaries", gradient: "linear-gradient(140deg, #E0DCD4, #C8C0B4)", description: "Six documentary films exploring the Catholic faith.", host: "Various" },
      { id: "the-quest", title: "The Quest", subtitle: "University of Dallas series", episodes: 11, category: "Documentaries", gradient: "linear-gradient(140deg, #E8E0D4, #D4CCB8)", description: "An 11-episode academic series from the University of Dallas.", host: "University of Dallas" },
      { id: "virtuous-leadership", title: "Virtuous Leadership", subtitle: "Lead with virtue", episodes: 9, category: "Catechesis", gradient: "linear-gradient(140deg, #E4E0EC, #D0CCE0)", description: "A 9-episode leadership teaching series grounded in the virtues.", host: "Various" },
    ];

    const WATCH_PRAYERS = [
      { id: "mass", seriesId: "daily-mass", label: "Daily Mass", shortLabel: "Mass", time: "12:00 PM", startHour: 12, startMin: 0, durationMin: 45, detail: "Live from the Chapel", hostInitials: "FR", photoGrad: "linear-gradient(170deg, #7A6B52 0%, #5C4F3A 60%, #3D3528 100%)", photo: "visual_elements/watch_tab/prayer_strip_mass.jpg" },
      { id: "chaplet", seriesId: "divine-mercy", label: "Divine Mercy", shortLabel: "Chaplet", time: "3:00 PM", startHour: 15, startMin: 0, durationMin: 20, detail: "The Hour of Mercy", hostInitials: "DM", photoGrad: "linear-gradient(170deg, #4F6275 0%, #3A4F63 60%, #253A4D 100%)", photo: "visual_elements/watch_tab/prayer_strip_divine_mercy.jpg" },
      { id: "rosary", seriesId: "family-rosary", label: "Family Rosary Across America", shortLabel: "Rosary", time: "7:00 PM", startHour: 19, startMin: 0, durationMin: 25, detail: "Luminous Mysteries", hostInitials: "FR", photoGrad: "linear-gradient(170deg, #5B6B4F 0%, #3F5233 60%, #2A3B22 100%)", photo: "visual_elements/watch_tab/prayer_strip_family_rosary.jpeg" },
    ];

    const WATCH_CATEGORIES = ["All", "Prayer", "Shows", "Catechesis", "Conferences", "Documentaries", "Seasonal"];

    function getWatchLiveState(h, m) {
      const now = h * 60 + m;
      const live = WATCH_PRAYERS.filter(p => { const s = p.startHour * 60 + p.startMin; return now >= s && now < s + p.durationMin; });
      return live.length > 0 ? live[0] : null;
    }
    function getWatchCountdown(p, h, m) {
      const now = h * 60 + m, s = p.startHour * 60 + p.startMin, end = s + p.durationMin;
      if (now >= s && now < end) return { text: "Streaming now", isLive: true, isPast: false };
      if (now >= end) return { text: "Tomorrow " + p.time, isLive: false, isPast: true };
      const diff = s - now, hr = Math.floor(diff / 60), mn = diff % 60;
      return { text: hr > 0 ? "Starts in " + hr + "h " + mn + "m" : "Starts in " + mn + "m", isLive: false, isPast: false };
    }

    const waveHeights = [40, 70, 100, 60, 30];
    const wavePeaks = waveHeights.map(h => (100 / h).toFixed(3));
    const StaticWaveform = ({ animating }) => (
      <div style={{ display: "flex", alignItems: "center", gap: 2.5, height: 16 }}>
        {waveHeights.map((h, i) => (
          <div key={i} style={{ width: 2.2, height: `${h}%`, background: "#fff", borderRadius: 1.5, transformOrigin: "center",
            ...(animating ? { animation: `waveBar 0.45s ease-in-out ${i * 0.07}s both`, '--peak': wavePeaks[i] } : {}) }} />
        ))}
      </div>
    );

    const SearchBar = ({ value, onChange, placeholder, variant = "light" }) => {
      const isLight = variant === "light";
      return (
        <div style={{
          display: "flex", alignItems: "center", gap: 10, padding: "10px 14px", borderRadius: 10,
          background: isLight ? colors.searchBgLight : colors.searchBg, margin: "0 20px",
        }}>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke={isLight ? colors.textMuted : "rgba(255,255,255,0.5)"} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <circle cx="11" cy="11" r="8" /><line x1="21" y1="21" x2="16.65" y2="16.65" />
          </svg>
          <input type="text" value={value} onChange={(e) => onChange(e.target.value)} placeholder={placeholder}
            style={{ background: "none", border: "none", outline: "none", fontFamily: "'DM Sans', sans-serif", fontSize: 13, color: isLight ? colors.text : "#fff", width: "100%" }} />
          {value && (
            <div onClick={() => onChange("")} style={{
              width: 20, height: 20, borderRadius: "50%", background: isLight ? "#ddd" : "rgba(255,255,255,0.2)",
              display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer", fontSize: 10,
              color: isLight ? colors.textMuted : "rgba(255,255,255,0.6)",
            }}>✕</div>
          )}
        </div>
      );
    };

    const SquareCover = ({ book, onClick }) => (
      <div style={{ flexShrink: 0, width: 140, cursor: "pointer" }} onClick={onClick}>
        <div style={{
          width: 140, height: 140, borderRadius: 10, position: "relative", overflow: "hidden",
          boxShadow: "0 4px 14px rgba(0,0,0,0.2)", background: book.color,
        }}>
          <img src={book.image} alt={book.title} style={{ width: "100%", height: "100%", objectFit: "cover", display: "block" }} />
        </div>
        <div style={{ marginTop: 8, fontFamily: "'DM Sans', sans-serif", fontSize: 11, color: colors.text, fontWeight: 500, lineHeight: 1.3, display: "-webkit-box", WebkitLineClamp: 2, WebkitBoxOrient: "vertical", overflow: "hidden" }}>{book.title}</div>
        <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, color: colors.textMuted, marginTop: 2 }}>Narrated by {book.narrator}</div>
      </div>
    );

    const ContinueListeningItem = ({ book, progress, timeLeft, onClick }) => (
      <div onClick={onClick} style={{ display: "flex", gap: 8, cursor: "pointer", padding: "6px 10px 6px 6px", background: "#fff", borderRadius: 8, boxShadow: "0 1px 4px rgba(0,0,0,0.08)", minWidth: 0, overflow: "hidden" }}>
        <div style={{ width: 44, height: 44, borderRadius: 5, flexShrink: 0, overflow: "hidden", background: book.color }}>
          <img src={book.image} alt={book.title} style={{ width: "100%", height: "100%", objectFit: "cover", display: "block" }} />
        </div>
        <div style={{ flex: 1, minWidth: 0, display: "flex", flexDirection: "column", justifyContent: "space-between" }}>
          <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: colors.text, fontWeight: 600, lineHeight: 1.3, display: "-webkit-box", WebkitLineClamp: 2, WebkitBoxOrient: "vertical", overflow: "hidden" }}>{book.title}</div>
          <div style={{ display: "flex", alignItems: "center", gap: 5 }}>
            <div style={{ flex: 1, height: 5, background: "#e0e0e0", borderRadius: 3, overflow: "hidden" }}>
              <div style={{ height: "100%", width: `${progress}%`, background: "#2e7d32", borderRadius: 3 }} />
            </div>
            <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 10, color: colors.textMuted, whiteSpace: "nowrap", flexShrink: 0 }}>{timeLeft} left</span>
          </div>
        </div>
      </div>
    );

    const GridCover = ({ book, onClick }) => (
      <div style={{ width: "calc(50% - 7px)", cursor: "pointer", marginBottom: 18 }} onClick={onClick}>
        <div style={{
          width: "100%", paddingBottom: "100%", borderRadius: 10, position: "relative", overflow: "hidden",
          boxShadow: "0 4px 14px rgba(0,0,0,0.2)", background: book.color,
        }}>
          <img src={book.image} alt={book.title} style={{ position: "absolute", inset: 0, width: "100%", height: "100%", objectFit: "cover" }} />
        </div>
        <div style={{ marginTop: 8, fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: colors.text, fontWeight: 500, lineHeight: 1.3, display: "-webkit-box", WebkitLineClamp: 2, WebkitBoxOrient: "vertical", overflow: "hidden" }}>{book.title}</div>
        <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, color: colors.textMuted, marginTop: 2 }}>Narrated by {book.narrator}</div>
      </div>
    );

    const SearchResultItem = ({ book, onClick }) => (
      <div onClick={onClick} style={{ display: "flex", gap: 12, padding: "10px 20px", cursor: "pointer", borderBottom: "1px solid #f0f0f0" }}>
        <div style={{ width: 50, height: 50, borderRadius: 8, flexShrink: 0, overflow: "hidden", background: book.color }}>
          <img src={book.image} alt={book.title} style={{ width: "100%", height: "100%", objectFit: "cover", display: "block" }} />
        </div>
        <div style={{ flex: 1, minWidth: 0 }}>
          <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 13, color: colors.text, fontWeight: 600, whiteSpace: "nowrap", overflow: "hidden", textOverflow: "ellipsis" }}>{book.title}</div>
          <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 11, color: colors.textMuted, marginTop: 2 }}>{book.author}</div>
          <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 10, color: colors.textMuted, marginTop: 1 }}>{book.duration} · {book.narrator}</div>
        </div>
        <div style={{ display: "flex", alignItems: "center" }}>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke={colors.textMuted} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="9 18 15 12 9 6" /></svg>
        </div>
      </div>
    );

    const HorizontalRow = ({ title, subtitle, books, onSeeAll, onBookClick }) => (
      <div style={{ marginBottom: 8 }}>
        <div style={{ marginBottom: 10, padding: "0 20px" }}>
          <div style={{ display: "flex", justifyContent: "space-between", alignItems: "baseline" }}>
            <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 19, fontWeight: 700, color: colors.text, letterSpacing: -0.3 }}>{title}</div>
            <div onClick={onSeeAll} style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 11, color: colors.accent, fontWeight: 600, cursor: "pointer", letterSpacing: 0.3 }}>See All →</div>
          </div>
          {subtitle && <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 11, color: colors.textMuted, marginTop: 2 }}>{subtitle}</div>}
        </div>
        <div style={{ display: "flex", gap: 14, overflowX: "auto", padding: "0 20px 8px", scrollbarWidth: "none", msOverflowStyle: "none" }}>
          {books.map((book, i) => <SquareCover key={i} book={book} onClick={() => onBookClick(book)} />)}
        </div>
      </div>
    );

    const TitleDetailPage = ({ book, onBack, onSuggest }) => (
      <div style={{ overflowY: "auto", height: "100%", paddingBottom: 140, scrollbarWidth: "none" }}>
        <div style={{
          background: "linear-gradient(180deg, #0b1e33 0%, #0f2d50 35%, #1e4d7a 65%, #3b6fa0 100%)",
          padding: "16px 20px 44px", display: "flex", flexDirection: "column", alignItems: "center",
        }}>
          <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", width: "100%", marginBottom: 20 }}>
            <div onClick={onBack} style={{ width: 34, height: 34, borderRadius: "50%", background: "rgba(255,255,255,0.2)", display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer" }}>
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#fff" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><polyline points="15 18 9 12 15 6" /></svg>
            </div>
            <div style={{ width: 34, height: 34, borderRadius: "50%", background: "rgba(255,255,255,0.2)", display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer" }}>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#fff" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" /><polyline points="16 6 12 2 8 6" /><line x1="12" y1="2" x2="12" y2="15" /></svg>
            </div>
          </div>
          <div style={{ width: 180, height: 180, borderRadius: 12, overflow: "hidden", boxShadow: "0 8px 30px rgba(0,0,0,0.35)", background: book.color }}>
            <img src={book.image} alt={book.title} style={{ width: "100%", height: "100%", objectFit: "cover", display: "block" }} />
          </div>
          <div style={{ marginTop: 16, padding: "6px 18px", borderRadius: 20, border: "1.5px solid rgba(255,255,255,0.4)", cursor: "pointer", display: "flex", alignItems: "center", gap: 6 }}>
            <span style={{ fontSize: 10, color: "#fff" }}>▶</span>
            <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: "#fff", fontWeight: 500 }}>Preview</span>
          </div>
          <h2 style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 24, fontWeight: 700, color: "#fff", textAlign: "center", margin: "16px 0 4px", lineHeight: 1.2 }}>{book.title}</h2>
          <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 13, color: "rgba(255,255,255,0.6)" }}>{book.duration}</span>
          <div style={{ display: "flex", marginTop: 16, width: "100%", justifyContent: "center" }}>
            <div style={{ textAlign: "center", flex: 1, borderRight: "1px solid rgba(255,255,255,0.2)", paddingRight: 16 }}>
              <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, color: "rgba(255,255,255,0.5)", letterSpacing: 1, textTransform: "uppercase", marginBottom: 4 }}>By</div>
              <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 13, color: "#fff", fontWeight: 500 }}>{book.author}</div>
            </div>
            <div style={{ textAlign: "center", flex: 1, paddingLeft: 16 }}>
              <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, color: "rgba(255,255,255,0.5)", letterSpacing: 1, textTransform: "uppercase", marginBottom: 4 }}>Narrated By</div>
              <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 13, color: "#fff", fontWeight: 500 }}>{book.narrator}</div>
            </div>
          </div>
          <div style={{
            marginTop: 22, padding: "13px 0", borderRadius: 30, background: "#fff", textAlign: "center",
            cursor: "pointer", width: "82%", boxShadow: "0 3px 14px rgba(0,0,0,0.25)",
          }}>
            <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 14, color: "#111", fontWeight: 700, display: "flex", alignItems: "center", justifyContent: "center", gap: 8 }}>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="#111"><path d="M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z"/></svg>
              Create Free Account to Listen
            </span>
          </div>
        </div>
        <div style={{ background: colors.contentBg, borderRadius: "20px 20px 0 0", marginTop: -20, position: "relative", zIndex: 2, padding: "24px 20px", boxShadow: "0 -6px 20px rgba(0,0,0,0.12)" }}>
          <div style={{ marginBottom: 24 }}>
            <h3 style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 18, fontWeight: 700, color: colors.text, margin: "0 0 10px" }}>Summary</h3>
            <p style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 13, color: colors.textMuted, lineHeight: 1.65, margin: 0 }}>{book.summary}</p>
          </div>
          <div style={{ height: 1, background: "#e8e8e8", margin: "0 0 24px" }} />
          <div>
            <h3 style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 18, fontWeight: 700, color: colors.text, margin: "0 0 16px" }}>Details & Credits</h3>
            {[
              { label: "Producer", value: book.credits.producer },
              { label: "Director", value: book.credits.director },
              { label: "Audio Editor", value: book.credits.editor },
              { label: "Sound Design", value: book.credits.sound },
              { label: "Music", value: book.credits.music },
              { label: "Production", value: book.credits.project },
            ].map((credit, i) => (
              <div key={i} style={{
                display: "flex", justifyContent: "space-between", alignItems: "center",
                padding: "10px 0", borderBottom: i < 5 ? "1px solid #f0f0f0" : "none",
              }}>
                <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: colors.textMuted }}>{credit.label}</span>
                <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: colors.text, fontWeight: 500 }}>{credit.value}</span>
              </div>
            ))}
          </div>
          <div style={{ height: 1, background: "#e8e8e8", margin: "24px 0" }} />
          <div>
            <h3 style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 18, fontWeight: 700, color: colors.text, margin: "0 0 14px" }}>You Might Also Enjoy</h3>
            <div style={{ display: "flex", gap: 14 }}>
              {allBooks.filter(b => b.id !== book.id).sort(() => Math.random() - 0.5).slice(0, 2).map((rec, i) => (
                <div key={i} onClick={() => onSuggest(rec)} style={{ flex: 1, cursor: "pointer" }}>
                  <div style={{
                    width: "100%", paddingBottom: "100%", borderRadius: 10, position: "relative", overflow: "hidden",
                    boxShadow: "0 4px 14px rgba(0,0,0,0.2)", background: rec.color,
                  }}>
                    <img src={rec.image} alt={rec.title} style={{ position: "absolute", inset: 0, width: "100%", height: "100%", objectFit: "cover" }} />
                  </div>
                  <div style={{ marginTop: 8, fontFamily: "'DM Sans', sans-serif", fontSize: 11, color: colors.text, fontWeight: 500, lineHeight: 1.3, display: "-webkit-box", WebkitLineClamp: 2, WebkitBoxOrient: "vertical", overflow: "hidden" }}>{rec.title}</div>
                  <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, color: colors.textMuted, marginTop: 2 }}>{rec.duration}</div>
                </div>
              ))}
            </div>
          </div>
        </div>
      </div>
    );

    const PageHeader = ({ title, onBack, rightElement }) => (
      <div style={{ background: "#4485bc" }}>
        <div style={{ display: "flex", alignItems: "center", gap: 12, padding: "16px 20px 14px" }}>
          <div onClick={onBack} style={{
            width: 32, height: 32, borderRadius: "50%", background: "rgba(255,255,255,0.2)",
            display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer",
          }}>
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#fff" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><polyline points="15 18 9 12 15 6" /></svg>
          </div>
          <h1 style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 24, fontWeight: 700, color: "#fff", margin: 0, letterSpacing: -0.3, flex: 1 }}>{title}</h1>
          {rightElement}
        </div>
      </div>
    );

    const WireBox = ({ width, height, label, style: extraStyle = {} }) => (
      <div style={{
        width, height, background: "#e8e8e8", border: "1.5px solid #d0d0d0",
        borderRadius: 8, display: "flex", alignItems: "center", justifyContent: "center",
        flexShrink: 0, ...extraStyle,
      }}>
        {label && <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, color: "#b0b0b0", letterSpacing: 0.5 }}>{label}</span>}
      </div>
    );

    const bannerImages = [
      "visual_elements/home_screen_banner_1.PNG",
      "visual_elements/home_screen_banner_3.png",
      "visual_elements/home_screen_banner_4.PNG",
      "visual_elements/home_screen_banner_5.PNG",
    ];

    const articleImages = [
      "visual_elements/home_screen_article.PNG",
      "visual_elements/home_screen_article_2.png",
      "visual_elements/home_screen_article_3.png",
    ];

    const HomeScreen = ({ triggerLive }) => {
      const [bannerIdx, setBannerIdx] = useState(0);
      const [articleIdx, setArticleIdx] = useState(0);
      const touchStartX = useRef(null);
      const articleTouchX = useRef(null);

      useEffect(() => {
        const timer = setInterval(() => {
          setBannerIdx(i => (i + 1) % bannerImages.length);
        }, 5000);
        return () => clearInterval(timer);
      }, []);

      return (
      <div style={{ overflowY: "auto", height: "100%", paddingBottom: 184, scrollbarWidth: "none", background: colors.pageBg }} className="hide-scrollbar">

        {/* Rotating Promotional Banner Carousel */}
        <div
          onTouchStart={e => { touchStartX.current = e.touches[0].clientX; }}
          onTouchEnd={e => {
            if (touchStartX.current === null) return;
            const diff = touchStartX.current - e.changedTouches[0].clientX;
            if (Math.abs(diff) > 40) {
              if (diff > 0) setBannerIdx(i => (i + 1) % bannerImages.length);
              else setBannerIdx(i => (i - 1 + bannerImages.length) % bannerImages.length);
            }
            touchStartX.current = null;
          }}
          style={{ cursor: "pointer", overflow: "hidden" }}
        >
          <img src={bannerImages[bannerIdx]} alt="Promotional banner" style={{ width: "100%", display: "block" }} />
        </div>

        {/* Featured Tiles Row */}
        <div style={{ padding: "10px 10px 0" }}>
          <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 16, fontWeight: 700, color: "#1a3a5c", marginBottom: 6 }}>Featured</div>
          <div style={{ display: "flex", gap: 8 }}>
            {[
              { label: "Listen Live", image: "rr_shows/morning_air.jpg" },
              { label: "Lent with the Sai...", image: "rr_shows/lent_with_the_saints.jpeg" },
              { label: "Lenten Lessons on the Mass", image: "rr_shows/lenten_lessons_on_the_mass.png" },
            ].map((tile, i) => (
              <div key={i} onClick={tile.label === "Listen Live" ? triggerLive : undefined} style={{ flex: 1, cursor: "pointer", minWidth: 0 }}>
                <div style={{ width: "100%", paddingBottom: "100%", borderRadius: 10, overflow: "hidden", boxShadow: "0 2px 8px rgba(0,0,0,0.12)", position: "relative" }}>
                  <img src={tile.image} alt={tile.label} style={{ position: "absolute", inset: 0, width: "100%", height: "100%", objectFit: "cover", display: "block" }} />
                </div>
                <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 12, fontWeight: 500, color: colors.text, marginTop: 5, lineHeight: 1.3, overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap" }}>{tile.label}</div>
              </div>
            ))}
          </div>
        </div>

        {/* Hero Article Card */}
        <div style={{ marginTop: 14 }}>
          <div
            onTouchStart={e => { articleTouchX.current = e.touches[0].clientX; }}
            onTouchEnd={e => {
              if (articleTouchX.current === null) return;
              const diff = articleTouchX.current - e.changedTouches[0].clientX;
              if (Math.abs(diff) > 40) {
                if (diff > 0) setArticleIdx(i => (i + 1) % articleImages.length);
                else setArticleIdx(i => (i - 1 + articleImages.length) % articleImages.length);
              }
              articleTouchX.current = null;
            }}
            style={{ cursor: "pointer" }}
          >
            <img src={articleImages[articleIdx]} alt="Featured article" style={{ width: "100%", display: "block" }} />
          </div>
          {/* Dots left, VIEW ALL right — below image */}
          <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", padding: "8px 12px" }}>
            <div style={{ display: "flex", gap: 6 }}>
              {articleImages.map((_, i) => (
                <div key={i} onClick={() => setArticleIdx(i)} style={{ width: 8, height: 8, borderRadius: "50%", background: i === articleIdx ? "#d32f2f" : "#ccc", cursor: "pointer" }} />
              ))}
            </div>
            <div style={{ display: "flex", alignItems: "center", gap: 5, cursor: "pointer" }}>
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke={colors.textMuted} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg>
              <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 11, fontWeight: 600, color: colors.textMuted, letterSpacing: 0.3 }}>VIEW ALL</span>
            </div>
          </div>
        </div>

      </div>
    );
    };

    // ═══ WATCH TAB — ICONS ═══
    const WatchSearchIcon = ({ size = 16 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round"><circle cx="11" cy="11" r="8" /><line x1="21" y1="21" x2="16.65" y2="16.65" /></svg>
    );
    const WatchPlayFill = ({ size = 20, color = "#fff" }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none"><path d="M8 5.14v13.72a1 1 0 001.5.86l11.04-6.86a1 1 0 000-1.72L9.5 4.28A1 1 0 008 5.14z" fill={color} /></svg>
    );

    // ═══ WATCH TAB — PRIMITIVES ═══
    const WatchProgressBar = ({ progress }) => {
      if (!progress || progress <= 0) return null;
      return (
        <div style={{ position: "absolute", bottom: 0, left: 0, right: 0, height: 3, background: "rgba(0,0,0,0.15)" }}>
          <div style={{ width: (Math.min(progress, 1) * 100) + "%", height: "100%", background: wC.gold, borderRadius: "0 2px 2px 0" }} />
        </div>
      );
    };

    // ═══ WATCH TAB — BADGE, EPISODE CARD, SECTION HEADER, SCROLL ROW ═══
    const WATCH_BADGE_STYLES = {
      live: { bg: wC.live, color: "#fff", label: "LIVE", dot: true },
      upnext: { bg: "rgba(46,125,76,0.85)", color: "#fff", label: "UP NEXT" },
      new: { bg: "rgba(26,107,58,0.85)", color: "#fff", label: "NEW" },
    };
    const WatchBadge = ({ type }) => {
      if (!type || !WATCH_BADGE_STYLES[type]) return null;
      const s = WATCH_BADGE_STYLES[type];
      return (
        <div style={{ position: "absolute", top: 6, right: 6, display: "flex", alignItems: "center", gap: 3, background: s.bg, borderRadius: 20, padding: "2px 8px" }}>
          {s.dot && <div style={{ width: 5, height: 5, borderRadius: "50%", background: "#fff", animation: "pulse 2s ease-in-out infinite" }} />}
          <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 7, fontWeight: 700, color: s.color, letterSpacing: 0.5 }}>{s.label}</span>
        </div>
      );
    };

    const WatchEpisodeCard = ({ series, title, duration, badge, progress, color, image, onClick }) => (
      <div onClick={onClick} style={{ flexShrink: 0, width: 155, borderRadius: 12, overflow: "hidden", background: wC.card, border: "1px solid " + wC.border, boxShadow: wC.shadow, cursor: "pointer" }}>
        <div style={{ height: 88, background: color || wC.surface, display: "flex", alignItems: "center", justifyContent: "center", position: "relative" }}>
          {image && <img src={image} style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} />}
          {!image && <WatchPlayFill size={16} color="rgba(0,0,0,0.08)" />}
          <WatchBadge type={badge} />
          <WatchProgressBar progress={progress} />
        </div>
        <div style={{ padding: "8px 10px 10px" }}>
          {series && <p style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 8, fontWeight: 700, color: wC.text3, letterSpacing: 0.6, textTransform: "uppercase" }}>{series}</p>}
          <p style={{ margin: series ? "2px 0 0" : 0, fontFamily: "'DM Sans', sans-serif", fontSize: 11, fontWeight: 700, color: wC.text1, lineHeight: 1.25, overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap" }}>{title}</p>
          {duration && <p style={{ margin: "3px 0 0", fontFamily: "'DM Sans', sans-serif", fontSize: 9, color: wC.text4 }}>{duration}</p>}
        </div>
      </div>
    );

    const WatchSectionHeader = ({ title, right, onRightClick }) => (
      <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", padding: "0 16px", marginBottom: 8 }}>
        <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 14, fontWeight: 800, color: wC.text1 }}>{title}</span>
        {right && <div onClick={onRightClick} style={{ display: "flex", alignItems: "center", gap: 2, fontFamily: "'DM Sans', sans-serif", color: wC.text3, fontSize: 11, fontWeight: 600, cursor: "pointer" }}>{right}</div>}
      </div>
    );

    const WatchSeriesCard = ({ title, subtitle, gradient, badge, image, onClick }) => (
      <div onClick={onClick} style={{ flexShrink: 0, width: 220, borderRadius: 12, overflow: "hidden", background: wC.card, border: "1px solid " + wC.border, boxShadow: wC.shadow, cursor: "pointer" }}>
        <div style={{ height: 100, background: gradient || wC.surface, display: "flex", alignItems: "center", justifyContent: "center", position: "relative" }}>
          {image && <img src={image} style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} />}
          {!image && <WatchPlayFill size={22} color="rgba(0,0,0,0.08)" />}
          <WatchBadge type={badge} />
        </div>
        <div style={{ padding: "10px 12px 12px" }}>
          <p style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 14, fontWeight: 700, color: wC.text1, lineHeight: 1.2 }}>{title}</p>
          <p style={{ margin: "3px 0 0", fontFamily: "'DM Sans', sans-serif", fontSize: 10, color: wC.text3 }}>{subtitle}</p>
        </div>
      </div>
    );

    const WatchScrollRow = ({ children }) => (
      <div style={{ display: "flex", gap: 10, overflowX: "auto", padding: "0 16px 4px", scrollbarWidth: "none" }} className="hide-scrollbar">{children}</div>
    );

    // ═══ WATCH TAB — HERO BILLBOARD ═══
    const HERO_SLIDES = [
      { title: "Lenten Lessons on the Mass", subtitle: "Fr. Rocky · 40 episodes", gradient: "linear-gradient(140deg, #EDE6F5, #D8CEE8)", seriesId: "lenten-mass", image: "visual_elements/watch_tab/LLOTM_v1_SERIES_CARD.jpg" },
      { title: "SEEK 2026", subtitle: "24 talks · Watch the full series", gradient: "linear-gradient(140deg, #E8E0F0, #D8D0E8)", seriesId: "seek-2026", image: "visual_elements/watch_tab/SEEK_2026.jpg" },
      { title: "Life Is Worth Living", subtitle: "Fulton Sheen · Ep. 4 of 12", gradient: "linear-gradient(140deg, #E8E4F0, #D0C8E0)", seriesId: "fulton-sheen", isContinue: true, progress: 0.65, image: "visual_elements/watch_tab/fulton_sheen.png" },
      { title: "Into the Breach", subtitle: "Knights of Columbus · Ep. 2 of 8", gradient: "linear-gradient(140deg, #E8E4E0, #D8D0C8)", seriesId: "into-the-breach", isContinue: true, progress: 0.38, image: "visual_elements/watch_tab/into_the_breach.png" },
    ];

    const HeroBillboard = ({ liveNow, onTapSeries }) => {
      const [hover, setHover] = useState(false);
      const [activeSlide, setActiveSlide] = useState(0);

      // Live mode
      if (liveNow) {
        return (
          <div style={{ padding: "0 16px" }}>
            <div onMouseEnter={() => setHover(true)} onMouseLeave={() => setHover(false)}
              style={{ borderRadius: 16, overflow: "hidden", cursor: "pointer", background: wC.liveBg, border: "1px solid rgba(212,51,51,0.12)", boxShadow: hover ? wC.shadowMd : wC.shadow, transition: "all 0.2s" }}>
              <div style={{ height: 170, position: "relative", background: "linear-gradient(140deg, #F5E8E8, #E8DDDD)", display: "flex", alignItems: "center", justifyContent: "center", overflow: "hidden" }}>
                {liveNow.photo && <img src={liveNow.photo} style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} />}
                <div style={{ width: 56, height: 56, borderRadius: "50%", background: wC.live, display: "flex", alignItems: "center", justifyContent: "center", boxShadow: "0 4px 16px rgba(212,51,51,0.25)", transform: hover ? "scale(1.06)" : "scale(1)", transition: "transform 0.15s", position: "relative", zIndex: 1 }}>
                  <WatchPlayFill size={24} />
                </div>
                <div style={{ position: "absolute", top: 12, right: 12, display: "flex", alignItems: "center", gap: 5, background: wC.live, borderRadius: 20, padding: "4px 12px" }}>
                  <div style={{ width: 6, height: 6, borderRadius: "50%", background: "#fff", animation: "pulse 2s ease-in-out infinite" }} />
                  <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 10, fontWeight: 800, color: "#fff", letterSpacing: 1 }}>LIVE</span>
                </div>
              </div>
              <div style={{ padding: "14px 16px 16px" }}>
                <h2 style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 20, fontWeight: 800, color: wC.text1, letterSpacing: -0.3 }}>{liveNow.label}</h2>
                <p style={{ margin: "4px 0 0", fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: wC.live, fontWeight: 500 }}>{liveNow.detail} · Streaming now</p>
              </div>
            </div>
          </div>
        );
      }

      // Carousel mode
      const slide = HERO_SLIDES[activeSlide];
      return (
        <div style={{ padding: "0 16px" }}>
          <div style={{ position: "relative" }}>
            <div onClick={() => onTapSeries(slide.seriesId)} onMouseEnter={() => setHover(true)} onMouseLeave={() => setHover(false)}
              style={{ borderRadius: 16, overflow: "hidden", cursor: "pointer", background: wC.card, border: "1px solid " + wC.border, boxShadow: hover ? wC.shadowMd : wC.shadow, transition: "all 0.2s" }}>
              <div style={{ height: 170, position: "relative", background: slide.gradient, display: "flex", alignItems: "center", justifyContent: "center", transition: "background 0.4s" }}>
                {slide.image && <img src={slide.image} style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} />}
                <div style={{ width: 56, height: 56, borderRadius: "50%", background: slide.isContinue ? "rgba(0,0,0,0.45)" : slide.image ? "rgba(0,0,0,0.35)" : "rgba(0,0,0,0.06)", border: slide.isContinue || slide.image ? "none" : "1.5px solid rgba(0,0,0,0.08)", display: "flex", alignItems: "center", justifyContent: "center", transform: hover ? "scale(1.06)" : "scale(1)", transition: "transform 0.15s", position: "relative", zIndex: 1 }}>
                  <WatchPlayFill size={22} color={slide.isContinue || slide.image ? "#fff" : "rgba(0,0,0,0.25)"} />
                </div>
                {slide.isContinue && (
                  <div style={{ position: "absolute", top: 12, right: 12, background: "rgba(0,0,0,0.55)", borderRadius: 20, padding: "4px 12px", backdropFilter: "blur(4px)" }}>
                    <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, fontWeight: 700, color: "#fff", letterSpacing: 0.5 }}>CONTINUE</span>
                  </div>
                )}
                {slide.isContinue && slide.progress && <WatchProgressBar progress={slide.progress} />}
              </div>
              <div style={{ padding: "14px 16px 16px" }}>
                <h2 style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 20, fontWeight: 800, color: wC.text1, letterSpacing: -0.3 }}>{slide.title}</h2>
                <p style={{ margin: "4px 0 0", fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: wC.text2 }}>{slide.subtitle}</p>
              </div>
            </div>
            <div style={{ display: "flex", justifyContent: "center", gap: 6, marginTop: 10 }}>
              {HERO_SLIDES.map((_, i) => (
                <div key={i} onClick={(e) => { e.stopPropagation(); setActiveSlide(i); }}
                  style={{ width: activeSlide === i ? 18 : 6, height: 6, borderRadius: 3, background: activeSlide === i ? wC.gold : wC.text4, cursor: "pointer", transition: "all 0.25s" }} />
              ))}
            </div>
          </div>
        </div>
      );
    };

    // ═══ WATCH TAB — PRAYER CARDS (3-STATE STRIP) ═══
    const WatchPrayerCards = ({ simHour, simMin, onTapSeries }) => {
      const [reminders, setReminders] = useState({ mass: true, rosary: false, chaplet: false });
      const toggleReminder = (id, e) => { e.stopPropagation(); setReminders(prev => ({ ...prev, [id]: !prev[id] })); };

      return (
        <div style={{ padding: "0 16px" }}>
          <div style={{ marginBottom: 8 }}>
            <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 14, fontWeight: 800, color: wC.text1 }}>Live Daily Prayer</span>
            <p style={{ margin: "2px 0 0", fontFamily: "'DM Sans', sans-serif", fontSize: 11, color: wC.text3 }}>Pray live with your Catholic family</p>
          </div>
          <div style={{ display: "flex", gap: 8, alignItems: "flex-start" }}>
            {WATCH_PRAYERS.map(p => {
              const st = getWatchCountdown(p, simHour, simMin);
              const rem = reminders[p.id];
              const stripState = st.isLive ? "live" : rem ? "set" : "unset";

              return (
                <div key={p.id} style={{ flex: 1, display: "flex", flexDirection: "column" }}>
                  {/* Card: thumbnail + title row */}
                  <div onClick={() => onTapSeries(p.seriesId)} style={{ borderRadius: "12px 12px 0 0", overflow: "hidden", background: "#fff", border: "1px solid " + (st.isLive ? "rgba(212,51,51,0.18)" : wC.border), borderBottom: "none", boxShadow: st.isLive ? "0 2px 8px rgba(212,51,51,0.1)" : wC.shadow, cursor: "pointer", transition: "all 0.25s" }}>
                    <div style={{ height: 72, position: "relative", background: p.photoGrad, display: "flex", alignItems: "center", justifyContent: "center", overflow: "hidden" }}>
                      {p.photo ? <img src={p.photo} style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} /> : <div style={{ fontSize: 22, fontWeight: 700, color: "rgba(255,255,255,0.25)", fontFamily: "'DM Sans', sans-serif", position: "absolute", top: "50%", left: "50%", transform: "translate(-50%, -50%)" }}>{p.hostInitials}</div>}
                    </div>
                    <div style={{ padding: "7px 8px 8px" }}>
                      <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center" }}>
                        <p style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 12, fontWeight: 700, color: wC.text1, letterSpacing: -0.2, lineHeight: 1.1 }}>{p.shortLabel}</p>
                        <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, fontWeight: 600, color: st.isLive ? wC.live : wC.text3 }}>{st.isLive ? "● Now" : p.time}</span>
                      </div>
                    </div>
                  </div>

                  {/* Strip: 3 states */}
                  {stripState === "live" ? (
                    <div onClick={() => onTapSeries(p.seriesId)} style={{ background: wC.live, borderRadius: "0 0 12px 12px", border: "1px solid " + wC.live, borderTop: "none", padding: "6px 6px 7px", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", gap: 5, minHeight: 36, transition: "all 0.25s" }}>
                      <div style={{ width: 10, height: 10, borderRadius: "50%", background: "#fff", animation: "pulse 2s ease-in-out infinite", flexShrink: 0 }} />
                      <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 12, fontWeight: 800, color: "#fff", lineHeight: 1, textTransform: "uppercase", letterSpacing: 0.5 }}>Live</span>
                    </div>
                  ) : stripState === "set" ? (
                    <div onClick={(e) => toggleReminder(p.id, e)} style={{ background: "rgba(46,125,76,0.1)", borderRadius: "0 0 12px 12px", border: "1px solid rgba(46,125,76,0.25)", borderTop: "1px solid rgba(46,125,76,0.25)", padding: "6px 6px 7px", cursor: "pointer", display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center", gap: 3, transition: "all 0.25s" }}>
                      <svg width={20} height={20} viewBox="0 0 24 24" fill={wC.prayerAccent} stroke={wC.prayerAccent} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9" /><path d="M13.73 21a2 2 0 01-3.46 0" /></svg>
                      <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 10, fontWeight: 700, color: wC.prayerAccent, lineHeight: 1, width: "100%", textAlign: "center" }}>Reminder set</span>
                    </div>
                  ) : (
                    <div onClick={(e) => toggleReminder(p.id, e)} style={{ background: wC.goldSoft, borderRadius: "0 0 12px 12px", border: "1px solid rgba(184,146,46,0.18)", borderTop: "1px dashed rgba(184,146,46,0.25)", padding: "6px 6px 7px", cursor: "pointer", display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center", gap: 3, transition: "all 0.25s" }}>
                      <svg width={20} height={20} viewBox="0 0 24 24" fill="none" stroke={wC.goldText} strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9" /><path d="M13.73 21a2 2 0 01-3.46 0" /></svg>
                      <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 10, fontWeight: 700, color: wC.goldText, lineHeight: 1, width: "100%", textAlign: "center" }}>Remind me</span>
                    </div>
                  )}
                </div>
              );
            })}
          </div>
        </div>
      );
    };

    // ═══ WATCH TAB — ALL SERIES PAGE ═══
    const WatchChevLeft = ({ size = 22 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><polyline points="15 18 9 12 15 6" /></svg>
    );

    const AllSeriesPage = ({ onBack, onTapSeries }) => {
      const [activeCategory, setActiveCategory] = useState("All");
      const [searchQuery, setSearchQuery] = useState("");
      const filtered = WATCH_SERIES.filter(s => {
        const matchCat = activeCategory === "All" || s.category === activeCategory;
        const matchSearch = searchQuery === "" || s.title.toLowerCase().includes(searchQuery.toLowerCase());
        return matchCat && matchSearch;
      });

      return (
        <div style={{ height: "100%", display: "flex", flexDirection: "column", background: wC.bg }}>
          <div style={{ padding: "14px 18px 0" }}>
            <div style={{ display: "flex", alignItems: "center", gap: 10, marginBottom: 14 }}>
              <div onClick={onBack} style={{ cursor: "pointer", color: wC.text1, display: "flex", alignItems: "center" }}><WatchChevLeft size={22} /></div>
              <h1 style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 22, fontWeight: 800, color: wC.text1, letterSpacing: -0.3 }}>All Series</h1>
            </div>
            <div style={{ display: "flex", alignItems: "center", gap: 8, background: wC.surface, borderRadius: 10, padding: "8px 12px", border: "1px solid " + wC.border, marginBottom: 12 }}>
              <WatchSearchIcon size={15} />
              <input type="text" placeholder="Search series..." value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} style={{ border: "none", background: "transparent", outline: "none", fontSize: 13, fontFamily: "'DM Sans', sans-serif", color: wC.text1, width: "100%" }} />
            </div>
            <div style={{ display: "flex", gap: 6, overflowX: "auto", paddingBottom: 12, scrollbarWidth: "none" }} className="hide-scrollbar">
              {WATCH_CATEGORIES.map(cat => (
                <button key={cat} onClick={() => setActiveCategory(cat)} style={{ flexShrink: 0, padding: "6px 14px", borderRadius: 20, fontSize: 11, fontWeight: 600, fontFamily: "'DM Sans', sans-serif", cursor: "pointer", background: activeCategory === cat ? wC.text1 : wC.surface, color: activeCategory === cat ? "#fff" : wC.text2, border: "1px solid " + (activeCategory === cat ? wC.text1 : wC.border), transition: "all 0.2s" }}>{cat}</button>
              ))}
            </div>
          </div>
          <div style={{ flex: 1, overflowY: "auto", padding: "0 16px 16px", scrollbarWidth: "none" }} className="hide-scrollbar">
            <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 10 }}>
              {filtered.map(s => (
                <div key={s.id} onClick={() => onTapSeries(s.id)} style={{ borderRadius: 12, overflow: "hidden", background: wC.card, border: "1px solid " + wC.border, boxShadow: wC.shadow, cursor: "pointer" }}>
                  <div style={{ height: 90, background: s.gradient, display: "flex", alignItems: "center", justifyContent: "center", position: "relative" }}>
                    <WatchPlayFill size={18} color="rgba(0,0,0,0.08)" />
                  </div>
                  <div style={{ padding: "8px 10px 10px" }}>
                    <p style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 12, fontWeight: 700, color: wC.text1, lineHeight: 1.2 }}>{s.title}</p>
                    <p style={{ margin: "3px 0 0", fontFamily: "'DM Sans', sans-serif", fontSize: 9, color: wC.text3 }}>{s.episodes} episodes</p>
                  </div>
                </div>
              ))}
            </div>
            {filtered.length === 0 && <p style={{ textAlign: "center", fontFamily: "'DM Sans', sans-serif", fontSize: 13, color: wC.text3, marginTop: 40 }}>No series found</p>}
          </div>
        </div>
      );
    };

    // ═══ WATCH TAB — EPISODE GENERATOR ═══
    function generateEpisodes(series) {
      const eps = [];
      const baseDate = new Date(2026, 1, 22);
      const titles = {
        "fulton-sheen": ["Life Is Worth Living", "The Meaning of Love", "War & Peace", "The Role of Conscience", "How to Think", "Science & Faith", "The Divine Sense of Humor", "Three Kinds of Love"],
        "family-rosary": ["Luminous Mysteries", "Sorrowful Mysteries", "Glorious Mysteries", "Joyful Mysteries"],
        "daily-mass": ["Tuesday of the 7th Week", "Monday of the 7th Week", "7th Sunday in Ordinary Time", "Saturday of the 6th Week", "Friday of the 6th Week", "Thursday of the 6th Week"],
        "patrick-madrid": ["Confession Q&A", "Defending the Faith", "Marriage & Family", "Sola Scriptura Debunked", "Why Be Catholic?", "The Real Presence", "Purgatory Explained"],
        "5min-homilies": ["Sunday Feb 22", "Sunday Feb 15", "Sunday Feb 8", "Sunday Feb 1", "Sunday Jan 25", "Sunday Jan 18"],
        "vatican-today": ["Pope Leo's Lenten Message", "Synod Follow-Up Report", "Vatican-China Agreement Update", "New Cardinals Announced"],
        "the-quest": ["Trailer", "The Good", "The True", "The Beautiful", "Justice", "Courage", "Temperance", "Prudence", "Faith", "Hope", "Love"],
        "virtuous-leadership": ["Introduction", "Prudence in Leadership", "Justice & Accountability", "Fortitude Under Pressure", "Temperance & Balance", "Faith & Vision", "Hope & Resilience", "Charity & Service", "The Integrated Leader"],
        "doc-collection": ["Apparition Hill", "The Face of Mercy", "Pray: The Story of Patrick Peyton", "Mother Teresa: No Greater Love", "Nefarious", "The Letter"],
        "eucharistic-encounters": ["The Bread of Life Discourse", "Eucharistic Miracles", "St. Thomas Aquinas on the Eucharist", "The Mass of the Early Church", "Adoration Through the Ages", "Corpus Christi", "Real Presence in Scripture", "The Saints & the Eucharist", "Transubstantiation Explained", "Eucharistic Revival", "The Tabernacle", "Living Eucharistically"],
        "lenten-mass": ["The Entrance", "The Sign of the Cross", "The Greeting", "The Penitential Act", "The Gloria", "The Collect", "The First Reading", "The Responsorial Psalm"],
        "lenten-sacraments": ["Baptism: The Door", "Confirmation: The Seal", "Eucharist: Source and Summit", "Reconciliation: Mercy", "Anointing of the Sick", "Holy Orders", "Matrimony", "The Sacramental Life"],
      };
      const list = titles[series.id] || ["Episode"];
      for (let i = 0; i < Math.min(series.episodes, 15); i++) {
        const d = new Date(baseDate); d.setDate(d.getDate() - (series.id === "vatican-today" ? i * 7 : i));
        const mins = series.id === "5min-homilies" ? 5 : series.id === "family-rosary" ? 25 : series.id === "daily-mass" ? 42 : series.id === "divine-mercy" ? 18 : series.id === "vatican-today" ? 27 : series.id === "doc-collection" ? (75 + Math.floor(Math.random() * 30)) : Math.floor(Math.random() * 25) + 8;
        const secs = Math.floor(Math.random() * 59);
        eps.push({ id: series.id + "-" + i, title: list[i % list.length], date: d.toLocaleDateString("en-US", { month: "short" }) + " " + d.getDate(), duration: mins + ":" + String(secs).padStart(2, "0"), progress: i === 1 ? 0.65 : i === 2 ? 1.0 : 0, episodeNum: series.episodes - i });
      }
      return eps;
    }

    // ═══ WATCH TAB — SERIES DETAIL PAGE ═══
    const WatchShareIcon = ({ size = 14 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8" /><polyline points="16 6 12 2 8 6" /><line x1="12" y1="2" x2="12" y2="15" /></svg>
    );
    const WatchBellIcon = ({ active, size = 14 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill={active ? "currentColor" : "none"} stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9" /><path d="M13.73 21a2 2 0 01-3.46 0" /></svg>
    );
    const WatchDurationStamp = ({ duration }) => {
      if (!duration) return null;
      return (<div style={{ position: "absolute", bottom: 5, right: 5, background: "rgba(0,0,0,0.5)", borderRadius: 4, padding: "1px 5px" }}><span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 8, fontWeight: 600, color: "#fff" }}>{duration}</span></div>);
    };

    // ═══ SERIES IMAGE MAP ═══
    const SERIES_IMAGES = {
      "daily-mass": ["visual_elements/watch_tab/Daily_Mass.jpeg"],
      "family-rosary": ["visual_elements/watch_tab/Family_Rosary.jpeg"],
      "divine-mercy": ["visual_elements/watch_tab/Divine_Mercy_Chaplet.jpeg"],
      "fulton-sheen": ["visual_elements/watch_tab/fulton_sheen.png"],
      "lenten-mass": ["visual_elements/watch_tab/LLOTM_Video-Lesson1-1280x720-v3 1.jpg","visual_elements/watch_tab/LLOTM_Video-Lesson2-1280x720-v2 1.jpg","visual_elements/watch_tab/LLOTM_Video-Lesson3-1280x720-v2 1.jpg","visual_elements/watch_tab/LLOTM_Video-Lesson4-1280x720-v2 1.jpg","visual_elements/watch_tab/LLOTM_Video-Lesson5-1280x720-v2 1.jpg","visual_elements/watch_tab/LLOTM_Video-Lesson6-1280x720-v2 1.jpg"],
      "lenten-sacraments": ["visual_elements/watch_tab/LLOTS.png"],
      "eucharistic-encounters": ["visual_elements/watch_tab/EE.png","visual_elements/watch_tab/NEC content 1.png","visual_elements/watch_tab/NEC content 2.png","visual_elements/watch_tab/NEC content 3.png"],
      "5min-homilies": ["visual_elements/watch_tab/5-MinuteHomilies_HowAquinasConqueredLust_v2 1.png","visual_elements/watch_tab/5-MinuteHomilies_MaybeICanGetAMiracleToo_v2 1.png","visual_elements/watch_tab/5-MinuteHomilies_BeGenerousInSowingTheSeed_v2 1.png","visual_elements/watch_tab/5-MinuteHomilies_HigherDutiesOfCharityThanMass_v2 1.png","visual_elements/watch_tab/5-MinuteHomilies_ProLifeActivityAndTheHolyEucharist_v2 1.png","visual_elements/watch_tab/5-MinuteHomilies_HowMuchIsASoulWorth_v2 1.png"],
      "into-the-breach": ["visual_elements/watch_tab/into_the_breach.png"],
      "patrick-madrid": ["visual_elements/watch_tab/PatrickMadrid_v1.jpg"],
      "vatican-today": ["visual_elements/watch_tab/vatican_today.png","visual_elements/watch_tab/pope_leo.png"],
      "seek-2026": ["visual_elements/watch_tab/SEEK_2026.jpg","visual_elements/watch_tab/SEEK1.png","visual_elements/watch_tab/SEEK2.png","visual_elements/watch_tab/SEEK3.png","visual_elements/watch_tab/SEEK4.png"],
      "seek-2025": ["visual_elements/watch_tab/SEEK_2026.jpg"],
      "doc-collection": ["visual_elements/watch_tab/ApparitionHill.jpg","visual_elements/watch_tab/PatrickPayton_Pray.jpg","visual_elements/watch_tab/MotherTeresa_NoGreaterLove.jpg","visual_elements/watch_tab/FaceofMercy.jpg"],
    };

    const SeriesDetailPage = ({ series, onBack }) => {
      const [subscribed, setSubscribed] = useState(series.isLive || false);
      const episodes = useMemo(() => generateEpisodes(series), [series.id]);
      const seriesImgs = SERIES_IMAGES[series.id] || [];
      const getEpImg = (i) => seriesImgs.length > 0 ? seriesImgs[i % seriesImgs.length] : null;

      return (
        <div style={{ height: "100%", background: wC.bg, overflowY: "auto", scrollbarWidth: "none" }} className="hide-scrollbar">
          {/* Hero Banner */}
          <div style={{ position: "relative", height: 160, background: series.gradient, display: "flex", alignItems: "flex-end", padding: "0 18px 14px", overflow: "hidden" }}>
            {seriesImgs[0] && <img src={seriesImgs[0]} style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} />}
            <div style={{ position: "absolute", inset: 0, background: "linear-gradient(to top, rgba(0,0,0,0.5), transparent 60%)" }} />
            <div onClick={onBack} style={{ position: "absolute", top: 12, left: 12, width: 32, height: 32, borderRadius: "50%", background: "rgba(255,255,255,0.8)", backdropFilter: "blur(4px)", display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer", zIndex: 2 }}><WatchChevLeft size={18} /></div>
            <div style={{ position: "absolute", top: 12, right: 12, width: 32, height: 32, borderRadius: "50%", background: "rgba(255,255,255,0.8)", backdropFilter: "blur(4px)", display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer", color: wC.text2, zIndex: 2 }}><WatchShareIcon size={14} /></div>
            {series.isLive && (<div style={{ position: "absolute", top: 12, left: "50%", transform: "translateX(-50%)", display: "flex", alignItems: "center", gap: 5, background: wC.live, borderRadius: 6, padding: "4px 10px", zIndex: 2 }}>
              <div style={{ width: 5, height: 5, borderRadius: "50%", background: "#fff", animation: "pulse 2s ease-in-out infinite" }} />
              <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, fontWeight: 800, color: "#fff", letterSpacing: 0.5 }}>LIVE DAILY · {series.liveTime}</span>
            </div>)}
          </div>
          {/* Sticky Title Bar */}
          <div style={{ position: "sticky", top: 0, zIndex: 10, background: wC.bg, padding: "10px 18px", display: "flex", alignItems: "center", gap: 10, borderBottom: "1px solid " + wC.border }}>
            <div onClick={onBack} style={{ width: 28, height: 28, borderRadius: "50%", background: wC.surface, border: "1px solid " + wC.border, display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer", flexShrink: 0 }}><WatchChevLeft size={14} /></div>
            <h1 style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 16, fontWeight: 800, color: wC.text1, overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap" }}>{series.title}</h1>
          </div>
          {/* Series Info + Subscribe */}
          <div style={{ padding: "14px 18px 0" }}>
            <p style={{ margin: "2px 0 0", fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: wC.text2 }}>{series.host}</p>
            <p style={{ margin: "8px 0 0", fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: wC.text3, lineHeight: 1.5 }}>{series.description}</p>
            <div style={{ display: "flex", gap: 8, marginTop: 12 }}>
              <button onClick={() => setSubscribed(!subscribed)} style={{ display: "flex", alignItems: "center", gap: 5, padding: "8px 16px", borderRadius: 20, cursor: "pointer", fontFamily: "'DM Sans', sans-serif", background: subscribed ? wC.goldSoft : wC.text1, color: subscribed ? wC.goldText : "#fff", border: subscribed ? "1px solid rgba(184,146,46,0.2)" : "1px solid transparent", fontSize: 12, fontWeight: 700 }}>
                <WatchBellIcon active={subscribed} size={14} />{subscribed ? "Subscribed" : "Subscribe"}
              </button>
              <div style={{ display: "flex", alignItems: "center", gap: 4, padding: "8px 14px", borderRadius: 20, fontFamily: "'DM Sans', sans-serif", background: wC.surface, border: "1px solid " + wC.border, fontSize: 11, color: wC.text3 }}>{series.episodes} {series.category === "Documentaries" ? "films" : "episodes"}</div>
            </div>
            <div style={{ height: 1, background: wC.border, margin: "14px 0 10px" }} />
            {/* Continue Watching within series */}
            {(() => {
              const inProgress = episodes.filter(ep => ep.progress > 0 && ep.progress < 1);
              if (inProgress.length === 0) return null;
              return (<div style={{ margin: "0 0 12px" }}>
                <p style={{ margin: "0 0 8px", fontFamily: "'DM Sans', sans-serif", fontSize: 11, fontWeight: 700, color: wC.text3, letterSpacing: 1, textTransform: "uppercase" }}>Continue Watching</p>
                {inProgress.map(ep => (
                  <div key={ep.id} style={{ borderRadius: 10, background: wC.card, border: "1px solid " + wC.border, boxShadow: wC.shadow, cursor: "pointer", marginBottom: 6 }}>
                    <div style={{ display: "flex", gap: 12, padding: 10 }}>
                      <div style={{ width: 120, height: 68, borderRadius: 8, flexShrink: 0, background: series.gradient, position: "relative", display: "flex", alignItems: "center", justifyContent: "center", overflow: "hidden" }}>
                        {getEpImg(episodes.indexOf(ep)) && <img src={getEpImg(episodes.indexOf(ep))} style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} />}
                        <div style={{ width: 32, height: 32, borderRadius: "50%", background: "rgba(0,0,0,0.5)", display: "flex", alignItems: "center", justifyContent: "center", zIndex: 1 }}><WatchPlayFill size={16} /></div>
                        <WatchDurationStamp duration={ep.duration} />
                        <WatchProgressBar progress={ep.progress} />
                      </div>
                      <div style={{ flex: 1, display: "flex", flexDirection: "column", justifyContent: "center" }}>
                        <p style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 13, fontWeight: 700, color: wC.text1, lineHeight: 1.25 }}>{ep.title}</p>
                        <p style={{ margin: "3px 0 0", fontFamily: "'DM Sans', sans-serif", fontSize: 10, color: wC.text3 }}>Ep. {ep.episodeNum} · {ep.date}</p>
                        <p style={{ margin: "3px 0 0", fontFamily: "'DM Sans', sans-serif", fontSize: 10, color: wC.gold, fontWeight: 600 }}>{Math.round(ep.progress * 100)}% — resume</p>
                      </div>
                    </div>
                  </div>
                ))}
              </div>);
            })()}
            <p style={{ margin: "0 0 8px", fontFamily: "'DM Sans', sans-serif", fontSize: 11, fontWeight: 700, color: wC.text3, letterSpacing: 1, textTransform: "uppercase" }}>{series.category === "Documentaries" ? "Films" : "Episodes"} · Newest first</p>
          </div>
          {/* Episode List */}
          <div style={{ padding: "0 0 80px" }}>
            {episodes.map((ep, i) => (
              <div key={ep.id} style={{ display: "flex", gap: 10, padding: "8px 18px", cursor: "pointer", borderBottom: "1px solid " + wC.border, background: i === 0 && series.isLive ? wC.liveBg : "transparent" }}>
                <div style={{ width: 110, height: 64, borderRadius: 8, flexShrink: 0, background: series.gradient, position: "relative", display: "flex", alignItems: "center", justifyContent: "center", overflow: "hidden" }}>
                  {getEpImg(i) && <img src={getEpImg(i)} style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: "cover" }} />}
                  <WatchPlayFill size={18} color="rgba(0,0,0,0.12)" />
                  <WatchDurationStamp duration={ep.duration} />
                  <WatchProgressBar progress={ep.progress > 0 && ep.progress < 1 ? ep.progress : 0} />
                  {ep.progress >= 1 && (<div style={{ position: "absolute", top: 4, right: 4, width: 16, height: 16, borderRadius: "50%", background: "rgba(46,125,76,0.85)", display: "flex", alignItems: "center", justifyContent: "center" }}><span style={{ fontSize: 9, color: "#fff" }}>✓</span></div>)}
                  {i === 0 && series.isLive && <WatchBadge type="live" />}
                </div>
                <div style={{ flex: 1, display: "flex", flexDirection: "column", justifyContent: "center", minWidth: 0 }}>
                  <p style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 13, fontWeight: 600, color: wC.text1, lineHeight: 1.25, overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap" }}>{ep.title}</p>
                  <div style={{ display: "flex", alignItems: "center", gap: 6, marginTop: 3 }}>
                    <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 10, color: wC.text3 }}>{ep.date}</span>
                    <span style={{ fontSize: 10, color: wC.text4 }}>·</span>
                    <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 10, color: wC.text3 }}>{ep.duration}</span>
                    {ep.progress > 0 && ep.progress < 1 && (<><span style={{ fontSize: 10, color: wC.text4 }}>·</span><span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 10, color: wC.gold, fontWeight: 600 }}>{Math.round(ep.progress * 100)}%</span></>)}
                    {ep.progress >= 1 && (<><span style={{ fontSize: 10, color: wC.text4 }}>·</span><span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 10, color: wC.prayerAccent, fontWeight: 600 }}>Watched</span></>)}
                  </div>
                  <p style={{ margin: "2px 0 0", fontFamily: "'DM Sans', sans-serif", fontSize: 10, color: wC.text3 }}>{series.category === "Documentaries" ? "" : "Ep. " + ep.episodeNum}</p>
                </div>
              </div>
            ))}
            {series.episodes > 15 && (<div style={{ padding: "16px 18px", textAlign: "center" }}><span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 12, fontWeight: 600, color: wC.goldText, cursor: "pointer" }}>Load more ({series.episodes - 15} remaining)</span></div>)}
          </div>
        </div>
      );
    };

    // ═══ WATCH TAB — WATCH HOME ═══
    const WatchHome = ({ onNavigate, onTapSeries, onPlayVideo }) => {
      const [demoLive, setDemoLive] = useState(false);
      // Only go live when demo toggle is on (7:10 PM = Rosary live). Otherwise safe time (2 AM) so nothing triggers mid-demo.
      const simHour = demoLive ? 19 : 2;
      const simMin = demoLive ? 10 : 0;
      const liveNow = getWatchLiveState(simHour, simMin);

      return (
        <div style={{ height: "100%", overflowY: "auto", background: wC.bg, paddingBottom: 80 }} className="hide-scrollbar">
          {/* Watch Home Header */}
          <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", padding: "14px 18px 12px" }}>
            <div style={{ display: "flex", alignItems: "center", gap: 10 }}>
              <h1 style={{ margin: 0, fontFamily: "'DM Sans', sans-serif", fontSize: 26, fontWeight: 800, color: wC.text1, letterSpacing: -0.5 }}>Watch</h1>
              <div onClick={() => setDemoLive(!demoLive)} style={{ display: "flex", alignItems: "center", gap: 4, padding: "4px 10px", borderRadius: 20, cursor: "pointer", background: demoLive ? wC.live : wC.surface, border: demoLive ? "1px solid " + wC.live : "1px solid " + wC.border, transition: "all 0.2s" }}>
                {demoLive && <div style={{ width: 5, height: 5, borderRadius: "50%", background: "#fff", animation: "pulse 2s ease-in-out infinite" }} />}
                <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, fontWeight: 700, color: demoLive ? "#fff" : wC.text3, letterSpacing: 0.5 }}>LIVE</span>
              </div>
            </div>
            <div style={{ display: "flex", alignItems: "center", gap: 12 }}>
              <span onClick={() => onNavigate("allSeries")} style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 13, fontWeight: 600, color: wC.goldText, cursor: "pointer" }}>All Series</span>
              <div style={{ width: 34, height: 34, borderRadius: 10, background: wC.surface, border: "1px solid " + wC.border, display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer", color: wC.text3 }}>
                <WatchSearchIcon size={16} />
              </div>
            </div>
          </div>
          {/* Hero Billboard */}
          <HeroBillboard liveNow={liveNow} onTapSeries={onTapSeries} />
          <div style={{ height: 12 }} />
          {/* Prayer Cards */}
          <WatchPrayerCards simHour={simHour} simMin={simMin} onTapSeries={onTapSeries} />
          <div style={{ height: 1, background: wC.border, margin: "14px 16px" }} />
          {/* Continue Watching */}
          <WatchSectionHeader title="Continue Watching" />
          <WatchScrollRow>
            <WatchEpisodeCard series="FULTON SHEEN" title="Life Is Worth Living" duration="27:14" progress={0.38} color="#E8E4F0" image="visual_elements/watch_tab/fulton_sheen.png" onClick={() => onPlayVideo && onPlayVideo("Life Is Worth Living", "Fulton Sheen")} />
            <WatchEpisodeCard series="KNIGHTS OF COLUMBUS" title="Into the Breach" duration="32:15" progress={0.72} color="#E8E4E0" image="visual_elements/watch_tab/into_the_breach.png" onClick={() => onPlayVideo && onPlayVideo("The Mission of the Family", "Into the Breach")} />
            <WatchEpisodeCard series="5-MIN HOMILIES" title="Sunday Feb 23" duration="5:12" badge="upnext" color="#E4F0E8" image="visual_elements/watch_tab/5-MinuteHomilies_HowAquinasConqueredLust_v2 1.png" onClick={() => onPlayVideo && onPlayVideo("Sunday Feb 23", "5-Minute Homilies")} />
          </WatchScrollRow>
          <div style={{ height: 1, background: wC.border, margin: "14px 16px" }} />
          {/* New This Week */}
          <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", padding: "0 16px", marginBottom: 8 }}>
            <div style={{ display: "flex", alignItems: "center", gap: 8 }}>
              <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 14, fontWeight: 800, color: wC.text1 }}>New This Week</span>
              <span style={{ fontFamily: "'DM Sans', sans-serif", background: wC.newBadgeSoft, color: wC.newBadge, fontSize: 8, fontWeight: 700, padding: "2px 7px", borderRadius: 6, letterSpacing: 0.3 }}>4 new</span>
            </div>
          </div>
          <WatchScrollRow>
            <WatchEpisodeCard series="THE VATICAN TODAY" title="Pope Leo's Lenten Message" duration="27:14" badge="new" color="#D8E4F0" image="visual_elements/watch_tab/pope_leo.png" onClick={() => onTapSeries("vatican-today")} />
            <WatchEpisodeCard series="DAILY MASS" title="Tuesday of the 7th Week" duration="42:08" badge="new" color="#E8E0D4" image="visual_elements/watch_tab/Daily_Mass.jpeg" onClick={() => onTapSeries("daily-mass")} />
            <WatchEpisodeCard series="5-MIN HOMILIES" title="Sunday Feb 23" duration="5:12" badge="new" color="#E4F0E8" image="visual_elements/watch_tab/5-MinuteHomilies_MaybeICanGetAMiracleToo_v2 1.png" onClick={() => onTapSeries("5min-homilies")} />
            <WatchEpisodeCard series="LENTEN 2026" title="Week 1 Reflection" duration="14:33" badge="new" color="#F0EAE0" onClick={() => onTapSeries("lenten-2026")} />
          </WatchScrollRow>
          <div style={{ height: 1, background: wC.border, margin: "14px 16px" }} />
          {/* Featured Series */}
          <WatchSectionHeader title="Featured Series" right="All Series →" onRightClick={() => onNavigate("allSeries")} />
          <WatchScrollRow>
            <WatchSeriesCard title="SEEK 2026" subtitle="24 episodes" gradient="linear-gradient(140deg, #E8E0F0, #D0C8E0)" image="visual_elements/watch_tab/SEEK_2026.jpg" onClick={() => onTapSeries("seek-2026")} />
            <WatchSeriesCard title="Fulton Sheen" subtitle="60 episodes" gradient="linear-gradient(140deg, #E8E4F0, #D8D0E8)" image="visual_elements/watch_tab/fulton_sheen.png" onClick={() => onTapSeries("fulton-sheen")} />
            <WatchSeriesCard title="Lenten Series 2026" subtitle="12 episodes" gradient="linear-gradient(140deg, #F0EAE0, #E0D8C8)" badge="new" onClick={() => onTapSeries("lenten-2026")} />
            <WatchSeriesCard title="The Quest" subtitle="11 episodes" gradient="linear-gradient(140deg, #E8E0D4, #D4CCB8)" onClick={() => onTapSeries("the-quest")} />
            <WatchSeriesCard title="Virtuous Leadership" subtitle="9 episodes" gradient="linear-gradient(140deg, #E4E0EC, #D0CCE0)" onClick={() => onTapSeries("virtuous-leadership")} />
          </WatchScrollRow>
          <div style={{ height: 1, background: wC.border, margin: "14px 16px" }} />
          {/* Fulton Sheen */}
          <WatchSectionHeader title="Fulton Sheen" right="60+" onRightClick={() => onTapSeries("fulton-sheen")} />
          <WatchScrollRow>
            <WatchEpisodeCard series="FULTON SHEEN" title="Life Is Worth Living" duration="27:14" color="#E8E4F0" image="visual_elements/watch_tab/fulton_sheen.png" onClick={() => onTapSeries("fulton-sheen")} />
            <WatchEpisodeCard series="FULTON SHEEN" title="Bishop Sheen Program" duration="24:38" color="#EAE6F2" image="visual_elements/watch_tab/fulton_sheen.png" onClick={() => onTapSeries("fulton-sheen")} />
            <WatchEpisodeCard series="FULTON SHEEN" title="Way to Happiness" duration="26:02" color="#E6E8F0" image="visual_elements/watch_tab/fulton_sheen.png" onClick={() => onTapSeries("fulton-sheen")} />
          </WatchScrollRow>
          <div style={{ height: 16 }} />
          {/* The Vatican Today */}
          <WatchSectionHeader title="The Vatican Today" right="Weekly" onRightClick={() => onTapSeries("vatican-today")} />
          <WatchScrollRow>
            <WatchEpisodeCard series="VATICAN TODAY" title="Pope Leo's Lenten Message" duration="27:14" badge="new" color="#D8E4F0" image="visual_elements/watch_tab/pope_leo.png" onClick={() => onTapSeries("vatican-today")} />
            <WatchEpisodeCard series="VATICAN TODAY" title="Synod Follow-Up Report" duration="27:02" color="#D0DCE8" image="visual_elements/watch_tab/vatican_today.png" onClick={() => onTapSeries("vatican-today")} />
            <WatchEpisodeCard series="VATICAN TODAY" title="Vatican-China Update" duration="27:28" color="#D4E0EC" image="visual_elements/watch_tab/vatican_today.png" onClick={() => onTapSeries("vatican-today")} />
          </WatchScrollRow>
          <div style={{ height: 16 }} />
          {/* 5-Minute Homilies */}
          <WatchSectionHeader title="5-Minute Homilies" right="View All" onRightClick={() => onTapSeries("5min-homilies")} />
          <WatchScrollRow>
            <WatchEpisodeCard series="5-MIN HOMILIES" title="Sunday Feb 23" duration="5:12" badge="new" color="#E4F0E8" image="visual_elements/watch_tab/5-MinuteHomilies_BeGenerousInSowingTheSeed_v2 1.png" onClick={() => onTapSeries("5min-homilies")} />
            <WatchEpisodeCard series="5-MIN HOMILIES" title="Sunday Feb 16" duration="4:48" color="#E6F2EA" image="visual_elements/watch_tab/5-MinuteHomilies_HigherDutiesOfCharityThanMass_v2 1.png" onClick={() => onTapSeries("5min-homilies")} />
            <WatchEpisodeCard series="5-MIN HOMILIES" title="Sunday Feb 9" duration="5:31" color="#E4EEE6" image="visual_elements/watch_tab/5-MinuteHomilies_ProLifeActivityAndTheHolyEucharist_v2 1.png" onClick={() => onTapSeries("5min-homilies")} />
          </WatchScrollRow>
          <div style={{ height: 16 }} />
          {/* Patrick Madrid */}
          <WatchSectionHeader title="Patrick Madrid" right="View All" onRightClick={() => onTapSeries("patrick-madrid")} />
          <WatchScrollRow>
            <WatchEpisodeCard series="PATRICK MADRID" title="Confession Q&A" duration="12:34" color="#F0E8E4" image="visual_elements/watch_tab/PatrickMadrid_v1.jpg" onClick={() => onTapSeries("patrick-madrid")} />
            <WatchEpisodeCard series="PATRICK MADRID" title="Defending the Faith" duration="18:07" color="#F2EAE6" onClick={() => onTapSeries("patrick-madrid")} />
            <WatchEpisodeCard series="PATRICK MADRID" title="Marriage & Family" duration="15:22" color="#EEE8E4" onClick={() => onTapSeries("patrick-madrid")} />
          </WatchScrollRow>
          <div style={{ height: 16 }} />
          {/* Fr. Rocky Teaching */}
          <WatchSectionHeader title="Fr. Rocky Teaching" />
          <WatchScrollRow>
            <WatchSeriesCard title="Lessons on the Mass" subtitle="40 episodes" gradient="linear-gradient(140deg, #EDE6F5, #D8CEE8)" image="visual_elements/watch_tab/LLOTM_v1_SERIES_CARD.jpg" onClick={() => onTapSeries("lenten-mass")} />
            <WatchSeriesCard title="Lessons on the Sacraments" subtitle="40 episodes" gradient="linear-gradient(140deg, #E6EDF5, #CED8E8)" image="visual_elements/watch_tab/LLOTS.png" onClick={() => onTapSeries("lenten-sacraments")} />
            <WatchSeriesCard title="Eucharistic Encounters" subtitle="12 episodes" gradient="linear-gradient(140deg, #F0E8DC, #E0D4C0)" image="visual_elements/watch_tab/EE.png" onClick={() => onTapSeries("eucharistic-encounters")} />
          </WatchScrollRow>
          <div style={{ height: 16 }} />
          {/* Documentaries */}
          <WatchSectionHeader title="Documentaries" right="6 films" onRightClick={() => onTapSeries("doc-collection")} />
          <WatchScrollRow>
            <WatchEpisodeCard series="DOCUMENTARY" title="Apparition Hill" duration="1h 38m" color="#E0DCD4" image="visual_elements/watch_tab/ApparitionHill.jpg" onClick={() => onTapSeries("doc-collection")} />
            <WatchEpisodeCard series="DOCUMENTARY" title="Pray: Patrick Peyton" duration="1h 28m" color="#D8D4CC" image="visual_elements/watch_tab/PatrickPayton_Pray.jpg" onClick={() => onTapSeries("doc-collection")} />
            <WatchEpisodeCard series="DOCUMENTARY" title="Mother Teresa" duration="1h 50m" color="#E4DCD0" image="visual_elements/watch_tab/MotherTeresa_NoGreaterLove.jpg" onClick={() => onTapSeries("doc-collection")} />
            <WatchEpisodeCard series="DOCUMENTARY" title="The Face of Mercy" duration="1h 22m" color="#DCD8D0" image="visual_elements/watch_tab/FaceofMercy.jpg" onClick={() => onTapSeries("doc-collection")} />
          </WatchScrollRow>
          <div style={{ height: 20 }} />
        </div>
      );
    };

    // ═══════════════════════════════════════════
    // VIDEO PLAYER — SHARED PRIMITIVES
    // ═══════════════════════════════════════════
    // Design tokens for the video player (dark mode)
    const vP = {
      bg: "#000",
      surface: "#1a1a1a",
      elevated: "#111",
      white: "#fff",
      text1: "#fff",
      text2: "#666",
      text3: "#999",
      accent: "#2563eb",
      liveRed: "#e53e3e",
      scrubTrack: "#333",
      iconColor: "#aaa",
      iconColorLand: "#888",
      backPillBg: "rgba(255,255,255,0.08)",
      postBg: "#0f1520",
    };

    // TASK 1: Player Status Bar
    // Dark-mode status bar with time, dynamic island notch, and signal bars.
    // Accepts `light` prop for light-mode variant (used in prayer modal context).
    const PlayerStatusBar = ({ light }) => (
      <div style={{
        height: 50, display: "flex", alignItems: "center",
        justifyContent: "space-between", padding: "0 28px", flexShrink: 0,
      }}>
        <span style={{
          color: light ? "#333" : "#888",
          fontSize: 14, fontWeight: 500, fontFamily: "system-ui",
        }}>9:41</span>
        <div style={{
          width: 80, height: 26,
          background: light ? "#eee" : "#111",
          borderRadius: 13,
        }} />
        <svg width={16} height={12} viewBox="0 0 16 12" fill="none">
          {[{ x: 0, y: 8, h: 4 }, { x: 4.5, y: 5, h: 7 }, { x: 9, y: 2, h: 10 }, { x: 13, y: 0, h: 12 }].map((r, i) => (
            <rect key={i} x={r.x} y={r.y} width="3" height={r.h} rx="0.5"
              fill={i < 3 ? (light ? "#333" : "#888") : (light ? "#ccc" : "#444")} />
          ))}
        </svg>
      </div>
    );

    // TASK 2: Back Button (Pill)
    // Translucent pill-shaped button with left chevron + "Back" text.
    // Used on Portrait, Live, and Landscape states.
    const PlayerBackButton = ({ light, onClick }) => (
      <div style={{ padding: "0 20px", flexShrink: 0 }}>
        <button onClick={onClick} style={{
          background: light ? "rgba(0,0,0,0.05)" : vP.backPillBg,
          border: "none", borderRadius: 20,
          padding: "6px 14px 6px 10px", cursor: "pointer",
          display: "flex", alignItems: "center", gap: 4,
        }}>
          <svg width={18} height={18} viewBox="0 0 24 24" fill="none"
            stroke={light ? "#333" : "#ccc"} strokeWidth="2.5"
            strokeLinecap="round" strokeLinejoin="round">
            <polyline points="15,18 9,12 15,6" />
          </svg>
          <span style={{
            color: light ? "#333" : "#ccc",
            fontSize: 13, fontFamily: "system-ui", fontWeight: 500,
          }}>Back</span>
        </button>
      </div>
    );

    // TASK 3: Video Tile
    // Full-width 16:9 video container with optional LIVE badge and fullscreen button.
    const PlayerFullscreenButton = () => (
      <button style={{
        position: "absolute", bottom: 10, right: 10,
        width: 30, height: 30, background: vP.white,
        border: "none", borderRadius: 5, cursor: "pointer",
        display: "flex", alignItems: "center", justifyContent: "center",
      }}>
        <svg width={14} height={14} viewBox="0 0 24 24" fill="none" stroke="#000" strokeWidth="2.5">
          <polyline points="15,3 21,3 21,9" /><polyline points="9,21 3,21 3,15" />
          <line x1="21" y1="3" x2="14" y2="10" /><line x1="3" y1="21" x2="10" y2="14" />
        </svg>
      </button>
    );

    const PlayerVideoTile = ({ label = "Video Content", live }) => (
      <div style={{
        width: "100%", aspectRatio: "16/9", flexShrink: 0,
        position: "relative",
        background: "linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 50%, #1a1a1a 100%)",
        display: "flex", alignItems: "center", justifyContent: "center",
      }}>
        <div style={{
          color: "#444", fontSize: 13, fontFamily: "monospace",
          textTransform: "uppercase", letterSpacing: 2,
        }}>{label}</div>
        {live && (
          <div style={{
            position: "absolute", top: 10, right: 10,
            background: vP.liveRed, borderRadius: 4,
            padding: "3px 8px", display: "flex", alignItems: "center", gap: 5,
          }}>
            <div style={{ width: 6, height: 6, background: vP.white, borderRadius: "50%" }} />
            <span style={{
              color: vP.white, fontSize: 10, fontWeight: 700,
              fontFamily: "system-ui", letterSpacing: "0.05em",
            }}>LIVE</span>
          </div>
        )}
        <PlayerFullscreenButton />
      </div>
    );

    // TASK 4: Play/Pause Button
    // 60px white circle with play or pause icon. Toggles isPlaying state on click.
    const PlayerPlayPause = ({ isPlaying, onToggle }) => (
      <button onClick={onToggle} style={{
        width: 60, height: 60, borderRadius: "50%",
        background: vP.white, border: "none", cursor: "pointer",
        display: "flex", alignItems: "center", justifyContent: "center",
      }}>
        {isPlaying
          ? <svg width={24} height={24} viewBox="0 0 24 24" fill="#000">
              <rect x="6" y="4" width="4" height="16" rx="1" />
              <rect x="14" y="4" width="4" height="16" rx="1" />
            </svg>
          : <svg width={24} height={24} viewBox="0 0 24 24" fill="#000">
              <polygon points="7,3 21,12 7,21" />
            </svg>
        }
      </button>
    );

    // TASK 5: Skip Buttons (15s Back/Forward)
    // Circular arrow with "15s" label. viewBox -2 -2 28 28 prevents bottom curve clipping.
    const PlayerSkip = ({ fwd }) => (
      <button style={{
        background: "none", border: "none", cursor: "pointer",
        padding: 12, display: "flex", flexDirection: "column", alignItems: "center",
      }}>
        <svg width={34} height={34} viewBox="-2 -2 28 28" fill="none"
          stroke={vP.white} strokeWidth="1.8" strokeLinecap="round">
          {fwd
            ? <><path d="M23 4v6h-6" /><path d="M20.49 15a9 9 0 11-5.64-8.36L23 10" /></>
            : <><path d="M1 4v6h6" /><path d="M3.51 15a9 9 0 105.64-8.36L1 10" /></>
          }
        </svg>
        <span style={{
          fontSize: 13, fontWeight: 600, color: vP.text3,
          fontFamily: "system-ui", marginTop: 3,
        }}>15s</span>
      </button>
    );

    // TASK 6: Scrub Bar + Timestamps
    // Progress bar with handle and elapsed/remaining timestamps.
    const PlayerScrubBar = ({ progress = 35 }) => (
      <div style={{ padding: "18px 20px 6px", flexShrink: 0 }}>
        <div style={{ position: "relative", height: 6, background: vP.scrubTrack, borderRadius: 3 }}>
          <div style={{
            position: "absolute", left: 0, top: 0, height: "100%",
            width: `${progress}%`, background: vP.white, borderRadius: 3,
          }} />
          <div style={{
            position: "absolute", top: "50%", left: `${progress}%`,
            transform: "translate(-50%, -50%)",
            width: 14, height: 14, background: vP.white, borderRadius: "50%",
          }} />
        </div>
        <div style={{ display: "flex", justifyContent: "space-between", marginTop: 8 }}>
          <span style={{ color: "#777", fontSize: 13, fontFamily: "system-ui", fontWeight: 500, fontVariantNumeric: "tabular-nums" }}>7:42</span>
          <span style={{ color: "#777", fontSize: 13, fontFamily: "system-ui", fontWeight: 500, fontVariantNumeric: "tabular-nums" }}>-14:26</span>
        </div>
      </div>
    );

    // TASK 7: Bottom Icon Row
    // Share + Prayer (conditional) + Sleep + Series (conditional).
    // Portrait: all 4 icons. Live: 3 icons (no prayer — it has its own button).
    const PlayerIconRow = ({ showAll = true, onPrayer }) => (
      <div style={{
        display: "flex", alignItems: "center", justifyContent: "space-evenly",
        padding: "0 20px 36px", flexShrink: 0,
      }}>
        {/* Share */}
        <button style={{ background: "none", border: "none", cursor: "pointer", padding: 10 }}>
          <svg width={22} height={22} viewBox="0 0 24 24" fill="none" stroke={vP.iconColor} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8" /><polyline points="16,6 12,2 8,6" /><line x1="12" y1="2" x2="12" y2="15" />
          </svg>
        </button>
        {/* Prayer — only shown when onPrayer provided */}
        {onPrayer && (
          <button onClick={onPrayer} style={{ background: "none", border: "none", cursor: "pointer", padding: 10 }}>
            <svg width={22} height={22} viewBox="0 0 24 24" fill="none" stroke={vP.iconColor} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
              <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z" />
            </svg>
          </button>
        )}
        {/* Sleep */}
        <button style={{ background: "none", border: "none", cursor: "pointer", padding: 10 }}>
          <svg width={22} height={22} viewBox="0 0 24 24" fill="none" stroke={vP.iconColor} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
          </svg>
        </button>
        {/* Series — only shown when showAll is true */}
        {showAll && (
          <button style={{ background: "none", border: "none", cursor: "pointer", padding: 10 }}>
            <svg width={22} height={22} viewBox="0 0 24 24" fill="none" stroke={vP.iconColor} strokeWidth="2" strokeLinecap="round">
              <line x1="8" y1="6" x2="21" y2="6" /><line x1="8" y1="12" x2="21" y2="12" /><line x1="8" y1="18" x2="21" y2="18" />
              <line x1="3" y1="6" x2="3.01" y2="6" strokeWidth="3" /><line x1="3" y1="12" x2="3.01" y2="12" strokeWidth="3" /><line x1="3" y1="18" x2="3.01" y2="18" strokeWidth="3" />
            </svg>
          </button>
        )}
      </div>
    );

    function AudiobooksApp() {
      const [activeTab, setActiveTab] = useState("home");
      const [view, setView] = useState("main");
      const [selectedBook, setSelectedBook] = useState(null);
      const [categorySearch, setCategorySearch] = useState("");
      const [allTitlesSearch, setAllTitlesSearch] = useState("");
      const [mainSearchOpen, setMainSearchOpen] = useState(false);
      const [mainSearch, setMainSearch] = useState("");
      const [previousView, setPreviousView] = useState("main");
      const [settingsOpen, setSettingsOpen] = useState(false);
      const [livePlayerOpen, setLivePlayerOpen] = useState(false);
      const [listenView, setListenView] = useState("landing");
      const [watchView, setWatchView] = useState("home");
      const [selectedSeries, setSelectedSeries] = useState(null);
      const [liveAnimating, setLiveAnimating] = useState(false);
      const triggerLive = () => { setActiveTab("live"); setLivePlayerOpen(true); setLiveAnimating(true); setTimeout(() => setLiveAnimating(false), 900); };
      const goToWatchSeries = (seriesId) => {
        const series = WATCH_SERIES.find(s => s.id === seriesId);
        if (series) { setSelectedSeries(series); setWatchView("seriesDetail"); }
      };
      const [autoplayLive, setAutoplayLive] = useState(false);
      const [autoplayPodcast, setAutoplayPodcast] = useState(true);
      const [pushNotifs, setPushNotifs] = useState(true);
      // Video Player state
      const [videoPlayerOpen, setVideoPlayerOpen] = useState(false);
      const [videoPlayerData, setVideoPlayerData] = useState(null);
      const [isPlaying, setIsPlaying] = useState(true);
      const openVideoPlayer = (episodeTitle, seriesName) => {
        setVideoPlayerData({ title: episodeTitle || "The Mission of the Family", series: seriesName || "Into the Breach" });
        setVideoPlayerOpen(true);
        setIsPlaying(true);
      };
      const closeVideoPlayer = () => { setVideoPlayerOpen(false); setVideoPlayerData(null); };

      const openBook = (book) => { setPreviousView(view); setSelectedBook(book); setView("detail"); };
      const goBack = () => {
        if (view === "detail") { setSelectedBook(null); setView(previousView); }
        else { setView("main"); setCategorySearch(""); setAllTitlesSearch(""); setMainSearchOpen(false); setMainSearch(""); }
      };

      const searchBooks = (books, query) => {
        if (!query.trim()) return books;
        const q = query.toLowerCase();
        return books.filter(b => b.title.toLowerCase().includes(q) || b.author.toLowerCase().includes(q) || b.narrator.toLowerCase().includes(q));
      };

      const filteredAllTitles = useMemo(() => searchBooks(allBooks, allTitlesSearch), [allTitlesSearch]);

      return (
        <div style={{
          width: 375, height: 812, margin: "20px auto",
          background: activeTab === "watch" ? wC.bg : (activeTab !== "home" && view === "detail") ? "#0b1e33" : colors.pageBg,
          borderRadius: 40, overflow: "hidden", position: "relative",
          boxShadow: "0 20px 60px rgba(0,0,0,0.3), 0 0 0 2px rgba(0,0,0,0.08)",
          fontFamily: "'DM Sans', sans-serif",
        }}>
          <style>{`.hide-scrollbar::-webkit-scrollbar{display:none}input::placeholder{color:${colors.textMuted}!important}.search-dark input::placeholder{color:rgba(255,255,255,0.4)!important}`}</style>

          {/* Header: status bar strip + logo section with RR icon button */}
          <div style={{ background: "#3b6394" }}>
            {/* Status bar strip */}
            <img src="current_app_state/header_strip.png" style={{ width: "100%", display: "block" }} />
            {/* Logo area — fixed height to match header_full total */}
            <div style={{ position: "relative", height: 79, display: "flex", alignItems: "center", justifyContent: "center" }}>
              <img src="current_app_state/header_logo.png" style={{ height: "100%", objectFit: "contain", display: "block" }} />
              {/* Back arrow — only when More screen is open */}
              {settingsOpen && (
                <div onClick={() => setSettingsOpen(false)} style={{
                  position: "absolute", left: 12, top: "50%", transform: "translateY(-50%)",
                  cursor: "pointer",
                  width: 34, height: 34, borderRadius: "50%",
                  background: "rgba(255,255,255,0.2)",
                  display: "flex", alignItems: "center", justifyContent: "center",
                }}>
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#fff" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><polyline points="15 18 9 12 15 6"/></svg>
                </div>
              )}
              {/* Profile icon button */}
              <div onClick={() => setSettingsOpen(true)} style={{
                position: "absolute", right: 12, top: "50%", transform: "translateY(-50%)",
                cursor: "pointer",
                width: 34, height: 34, borderRadius: "50%",
                background: "rgba(255,255,255,0.2)",
                display: "flex", alignItems: "center", justifyContent: "center",
              }}>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#fff" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
              </div>
            </div>
          </div>

          <div style={{ height: 560, overflow: "hidden" }}>
            {settingsOpen ? (
              (() => {
                const Toggle = ({ on, onToggle }) => (
                  <div onClick={onToggle} style={{
                    width: 50, height: 30, borderRadius: 15, background: on ? "#34c759" : "#ccc",
                    position: "relative", cursor: "pointer", flexShrink: 0, transition: "background 0.2s",
                  }}>
                    <div style={{
                      position: "absolute", top: 3, left: on ? 23 : 3, width: 24, height: 24,
                      borderRadius: "50%", background: "#fff", boxShadow: "0 1px 4px rgba(0,0,0,0.25)",
                      transition: "left 0.2s",
                    }} />
                  </div>
                );
                const menuItems = [
                  { label: "Find a Station", icon: <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke={colors.textMuted} strokeWidth="1.8" strokeLinecap="round" strokeLinejoin="round"><path d="M5 12.55a11 11 0 0 1 14.08 0"/><path d="M1.42 9a16 16 0 0 1 21.16 0"/><path d="M8.53 16.11a6 6 0 0 1 6.95 0"/><circle cx="12" cy="20" r="1" fill={colors.textMuted} stroke="none"/></svg> },
                  { label: "Live Show Schedule", icon: <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke={colors.textMuted} strokeWidth="1.8" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg> },
                  { label: "Contact", icon: <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke={colors.textMuted} strokeWidth="1.8" strokeLinecap="round" strokeLinejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07A19.5 19.5 0 0 1 4.69 12 19.79 19.79 0 0 1 1.61 3.36 2 2 0 0 1 3.59 1h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L7.91 8.56a16 16 0 0 0 5.55 5.55l.92-.92a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/></svg> },
                  { label: "My Downloads", icon: <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke={colors.textMuted} strokeWidth="1.8" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg> },
                  { label: "Parish Ambassadors", icon: <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke={colors.textMuted} strokeWidth="1.8" strokeLinecap="round" strokeLinejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg> },
                  { label: "About", icon: <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke={colors.textMuted} strokeWidth="1.8" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg> },
                ];
                return (
                  <div style={{ height: "100%", display: "flex", flexDirection: "column", background: "#fff" }}>
                    <div style={{ flex: 1, overflowY: "auto", scrollbarWidth: "none" }} className="hide-scrollbar">
                      <div style={{ padding: "16px 20px 4px" }}>
                        <div style={{
                          background: colors.headerBg, borderRadius: 10, padding: "14px 20px",
                          display: "flex", alignItems: "center", justifyContent: "space-between",
                          cursor: "pointer", marginBottom: 10,
                        }}>
                          <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 16, fontWeight: 600, color: "#fff" }}>Prayer Requests</span>
                          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="rgba(255,255,255,0.7)" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><polyline points="9 18 15 12 9 6"/></svg>
                        </div>
                        <div style={{
                          background: "#d32f2f", borderRadius: 10, padding: "14px 20px",
                          display: "flex", alignItems: "center", justifyContent: "space-between",
                          cursor: "pointer",
                        }}>
                          <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 16, fontWeight: 600, color: "#fff" }}>Give Now</span>
                          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="rgba(255,255,255,0.7)" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><polyline points="9 18 15 12 9 6"/></svg>
                        </div>
                      </div>
                      <div style={{ marginTop: 8 }}>
                        {menuItems.map((item, i) => (
                          <div key={i} style={{
                            display: "flex", alignItems: "center", gap: 14, padding: "14px 20px",
                            borderBottom: "1px solid #f0f0f0", cursor: "pointer",
                          }}>
                            <div style={{ flexShrink: 0 }}>{item.icon}</div>
                            <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 15, color: colors.text, flex: 1 }}>{item.label}</span>
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke={colors.textMuted} strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><polyline points="9 18 15 12 9 6"/></svg>
                          </div>
                        ))}
                      </div>
                      <div style={{ padding: "16px 20px 6px", fontFamily: "'DM Sans', sans-serif", fontSize: 11, fontWeight: 700, color: colors.textMuted, letterSpacing: 1, textTransform: "uppercase" }}>Settings</div>
                      {[
                        { label: "Autoplay Live Stream Upon Open", value: autoplayLive, set: setAutoplayLive },
                        { label: "Autoplay Next Podcast or Audio Prayer", value: autoplayPodcast, set: setAutoplayPodcast },
                        { label: "Allow Push Notifications", value: pushNotifs, set: setPushNotifs },
                      ].map((setting, i, arr) => (
                        <div key={i} style={{
                          display: "flex", alignItems: "center", padding: "14px 20px",
                          borderBottom: i < arr.length - 1 ? "1px solid #f0f0f0" : "none",
                        }}>
                          <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 15, color: colors.text, flex: 1, paddingRight: 16 }}>{setting.label}</span>
                          <Toggle on={setting.value} onToggle={() => setting.set(v => !v)} />
                        </div>
                      ))}
                      <div style={{ padding: "32px 20px 24px", textAlign: "center", fontFamily: "'DM Sans', sans-serif", fontSize: 11, color: colors.textMuted, lineHeight: 1.7 }}>
                        Relevant Radio Version: 5.20.0 (1)<br />© Relevant Radio, Inc.
                      </div>
                    </div>
                  </div>
                );
              })()
            ) : activeTab === "home" ? (
              <HomeScreen triggerLive={triggerLive} />
            ) : activeTab === "pray" ? (
              <div style={{ height: "100%", display: "flex", alignItems: "center", justifyContent: "center", background: colors.pageBg }}>
                <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 14, color: colors.textMuted }}>Pray — coming soon</span>
              </div>
            ) : activeTab === "watch" && watchView === "seriesDetail" && selectedSeries ? (
              <SeriesDetailPage series={selectedSeries} onBack={() => setWatchView("home")} />
            ) : activeTab === "watch" && watchView === "allSeries" ? (
              <AllSeriesPage onBack={() => setWatchView("home")} onTapSeries={goToWatchSeries} />
            ) : activeTab === "watch" ? (
              <WatchHome onNavigate={setWatchView} onTapSeries={goToWatchSeries} onPlayVideo={openVideoPlayer} />
            ) : activeTab === "listen" && listenView === "landing" ? (
              <div style={{ height: "100%", background: colors.pageBg }}>
                <div style={{ background: colors.headerBg, padding: "16px 20px 14px" }}>
                  <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 24, fontWeight: 700, color: "#fff" }}>Listen</span>
                </div>
                <div style={{ padding: "20px 16px" }}>
                  <div onClick={() => setListenView("audiobooks")} style={{ background: "#fff", borderRadius: 12, padding: "16px 18px", display: "flex", alignItems: "center", gap: 14, cursor: "pointer", boxShadow: "0 1px 4px rgba(0,0,0,0.08)" }}>
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke={colors.headerBg} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 18v-6a9 9 0 0 1 18 0v6"/><path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3z"/><path d="M3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"/></svg>
                    <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 16, fontWeight: 600, color: colors.text, flex: 1 }}>Audiobooks</span>
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke={colors.textMuted} strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><polyline points="9 18 15 12 9 6"/></svg>
                  </div>
                </div>
              </div>
            ) : view === "detail" && selectedBook ? (
              <TitleDetailPage book={selectedBook} onBack={goBack} onSuggest={openBook} />
            ) : (
              <div style={{ overflowY: "auto", height: "100%", paddingBottom: 140, scrollbarWidth: "none" }} className="hide-scrollbar">

                {view === "main" && (
                  <>
                    <PageHeader title="Audiobooks" onBack={() => setListenView("landing")}
                      rightElement={
                        <div style={{ display: "flex", alignItems: "center", gap: 14 }}>
                          <div onClick={() => { setMainSearchOpen(o => !o); setMainSearch(""); }} style={{ cursor: "pointer", display: "flex", alignItems: "center", opacity: 0.75 }}>
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#fff" strokeWidth="2.2" strokeLinecap="round" strokeLinejoin="round">
                              <circle cx="11" cy="11" r="8" /><line x1="21" y1="21" x2="16.65" y2="16.65" />
                            </svg>
                          </div>
                          <div onClick={() => { setView("allTitles"); setAllTitlesSearch(""); }} style={{
                            fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: "rgba(255,255,255,0.7)",
                            fontWeight: 600, cursor: "pointer", whiteSpace: "nowrap",
                          }}>All Titles →</div>
                        </div>
                      }
                    />
                    {mainSearchOpen && (
                      <div style={{ background: "#4485bc", paddingBottom: 16 }} className="search-dark">
                        <SearchBar value={mainSearch} onChange={setMainSearch} placeholder="Search all titles..." variant="dark" />
                      </div>
                    )}
                    {mainSearchOpen && mainSearch.trim() ? (
                      <div style={{ background: colors.contentBg, minHeight: 400 }}>
                        <div style={{ padding: "14px 20px 8px", fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: colors.textMuted }}>
                          {searchBooks(allBooks, mainSearch).length} result{searchBooks(allBooks, mainSearch).length !== 1 ? "s" : ""} for "{mainSearch}"
                        </div>
                        {searchBooks(allBooks, mainSearch).length > 0 ? searchBooks(allBooks, mainSearch).map((book, i) => <SearchResultItem key={i} book={book} onClick={() => openBook(book)} />) : (
                          <div style={{ padding: "40px 20px", textAlign: "center", fontFamily: "'DM Sans', sans-serif", fontSize: 14, color: colors.textMuted }}>No audiobooks found</div>
                        )}
                      </div>
                    ) : (
                      <div style={{ padding: "12px 0 0" }}>
                        {/* Continue Listening — 2x2 grid */}
                        <div style={{ marginBottom: 8 }}>
                          <div style={{ padding: "0 20px", marginBottom: 6 }}>
                            <div style={{ display: "flex", justifyContent: "space-between", alignItems: "baseline" }}>
                              <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 19, fontWeight: 700, color: colors.text, letterSpacing: -0.3 }}>Continue Listening</div>
                              <div onClick={() => setView("allContinueListening")} style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 11, color: colors.accent, fontWeight: 600, cursor: "pointer", letterSpacing: 0.3 }}>See All →</div>
                            </div>
                          </div>
                          <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: "8px 10px", padding: "0 20px 8px" }}>
                            {continueListeningData.slice(0, 4).map((item, i) => (
                              <ContinueListeningItem key={i} book={item.book} progress={item.progress} timeLeft={item.timeLeft} onClick={() => openBook(item.book)} />
                            ))}
                          </div>
                        </div>
                        <HorizontalRow title="Spiritual Reading" books={audiobooks.spiritual} onSeeAll={() => { setView("allSpiritual"); setCategorySearch(""); }} onBookClick={openBook} />
                        <HorizontalRow title="Classic Fiction" subtitle="from The Merry Beggars" books={audiobooks.fiction} onSeeAll={() => { setView("allFiction"); setCategorySearch(""); }} onBookClick={openBook} />
                      </div>
                    )}
                  </>
                )}

                {(view === "allSpiritual" || view === "allFiction") && (() => {
                  const categoryBooks = view === "allSpiritual" ? audiobooks.spiritual : audiobooks.fiction;
                  const filtered = searchBooks(categoryBooks, categorySearch);
                  const isSearchingCategory = categorySearch.trim().length > 0;
                  return (
                    <>
                      <PageHeader title={view === "allSpiritual" ? "Spiritual Reading" : "Classic Fiction"} onBack={goBack} />
                      <div style={{ background: "#4485bc", paddingBottom: 16 }} className="search-dark">
                        <SearchBar value={categorySearch} onChange={setCategorySearch} placeholder={`Search ${view === "allSpiritual" ? "spiritual reading" : "fiction"}...`} variant="dark" />
                      </div>
                      {isSearchingCategory ? (
                        <div style={{ background: colors.contentBg, minHeight: 400 }}>
                          <div style={{ padding: "14px 20px 8px", fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: colors.textMuted }}>
                            {filtered.length} result{filtered.length !== 1 ? "s" : ""} for "{categorySearch}"
                          </div>
                          {filtered.length > 0 ? filtered.map((book, i) => <SearchResultItem key={i} book={book} onClick={() => openBook(book)} />) : (
                            <div style={{ padding: "40px 20px", textAlign: "center", fontFamily: "'DM Sans', sans-serif", fontSize: 14, color: colors.textMuted }}>No titles found</div>
                          )}
                        </div>
                      ) : (
                        <div style={{ display: "flex", flexWrap: "wrap", gap: 14, padding: "16px 20px" }}>
                          {categoryBooks.map((book, i) => <GridCover key={i} book={book} onClick={() => openBook(book)} />)}
                        </div>
                      )}
                    </>
                  );
                })()}

                {view === "allContinueListening" && (
                  <div style={{ background: colors.contentBg, minHeight: 400 }}>
                    <PageHeader title="Continue Listening" onBack={goBack} />
                    <div>
                      {continueListeningData.map((item, i) => (
                        <div key={i} onClick={() => openBook(item.book)} style={{ display: "flex", gap: 12, padding: "10px 20px", cursor: "pointer", borderBottom: "1px solid #f0f0f0" }}>
                          <div style={{ width: 50, height: 50, borderRadius: 8, flexShrink: 0, overflow: "hidden", background: item.book.color }}>
                            <img src={item.book.image} alt={item.book.title} style={{ width: "100%", height: "100%", objectFit: "cover", display: "block" }} />
                          </div>
                          <div style={{ flex: 1, minWidth: 0 }}>
                            <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 13, color: colors.text, fontWeight: 600, whiteSpace: "nowrap", overflow: "hidden", textOverflow: "ellipsis" }}>{item.book.title}</div>
                            <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 11, color: colors.textMuted, marginTop: 2 }}>{item.book.author}</div>
                            <div style={{ display: "flex", alignItems: "center", gap: 8, marginTop: 4 }}>
                              <div style={{ flex: 1, height: 4, background: "#e0e0e0", borderRadius: 2, overflow: "hidden" }}>
                                <div style={{ height: "100%", width: `${item.progress}%`, background: "#2e7d32", borderRadius: 2 }} />
                              </div>
                              <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 10, color: colors.textMuted, whiteSpace: "nowrap", flexShrink: 0 }}>{item.timeLeft} left</span>
                            </div>
                          </div>
                          <div style={{ display: "flex", alignItems: "center" }}>
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke={colors.textMuted} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="9 18 15 12 9 6" /></svg>
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                )}

                {view === "allTitles" && (
                  <>
                    <PageHeader title="All Titles" onBack={goBack} />
                    <div style={{ background: "#4485bc", paddingBottom: 16 }} className="search-dark">
                      <SearchBar value={allTitlesSearch} onChange={setAllTitlesSearch} placeholder="Search all titles..." variant="dark" />
                    </div>
                    {allTitlesSearch.trim().length > 0 ? (
                      <div style={{ background: colors.contentBg, minHeight: 400 }}>
                        <div style={{ padding: "14px 20px 8px", fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: colors.textMuted }}>
                          {filteredAllTitles.length} result{filteredAllTitles.length !== 1 ? "s" : ""} for "{allTitlesSearch}"
                        </div>
                        {filteredAllTitles.length > 0 ? filteredAllTitles.map((book, i) => <SearchResultItem key={i} book={book} onClick={() => openBook(book)} />) : (
                          <div style={{ padding: "40px 20px", textAlign: "center", fontFamily: "'DM Sans', sans-serif", fontSize: 14, color: colors.textMuted }}>No titles found</div>
                        )}
                      </div>
                    ) : (
                      <div style={{ display: "flex", flexWrap: "wrap", gap: 14, padding: "16px 20px" }}>
                        {allBooks.map((book, i) => <GridCover key={i} book={book} onClick={() => openBook(book)} />)}
                      </div>
                    )}
                  </>
                )}
              </div>
            )}
          </div>

          {/* Sponsor Banner — home screen only */}
          {activeTab === "home" && (
            <div style={{
              position: "absolute", bottom: 72, left: 0, right: 0,
              zIndex: 10, cursor: "pointer", lineHeight: 0,
            }}>
              <img src="visual_elements/home_screen_sponsor_banner.PNG" alt="Charity Mobile — Pro-Life Cell Phone Service" style={{ width: "100%", display: "block" }} />
            </div>
          )}

          {/* Now Playing bar */}
          <div onClick={() => { setActiveTab("live"); setLivePlayerOpen(true); }} style={{
            position: "absolute", bottom: activeTab === "home" ? 128 : 72, left: 0, right: 0,
            background: "linear-gradient(135deg, #1b5e20, #2e7d32)",
            display: "flex", alignItems: "center", justifyContent: "space-between",
            padding: "10px 14px 10px 10px", zIndex: 10, cursor: "pointer",
          }}>
            <div style={{ display: "flex", alignItems: "center", gap: 12 }}>
              <div style={{ width: 60, height: 60, flexShrink: 0, overflow: "hidden", borderRadius: 10 }}>
                <img src="rr_shows/morning_air.jpg" alt="Morning Air" style={{ width: "100%", height: "100%", objectFit: "cover", display: "block" }} />
              </div>
              <div>
                <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, color: "rgba(255,255,255,0.7)", fontWeight: 700, letterSpacing: 1, textTransform: "uppercase", marginBottom: 3 }}>Listen Live · Now Playing</div>
                <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 15, color: "#fff", fontWeight: 700 }}>Morning Air</div>
              </div>
            </div>
            <div style={{ width: 38, height: 38, borderRadius: "50%", background: "#fff", display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer", flexShrink: 0 }}>
              <svg width="19" height="19" viewBox="0 0 24 24" fill="#2e7d32"><path d="M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z"/></svg>
            </div>
          </div>

          {/* Bottom nav — 5 evenly-spaced flex items */}
          <div style={{
            position: "absolute", bottom: 0, left: 0, right: 0, height: 72,
            background: "#3f6080",
            display: "flex", alignItems: "center",
            paddingBottom: 8, zIndex: 10,
          }}>
            {/* HOME */}
            <div onClick={() => { setActiveTab("home"); setLivePlayerOpen(false); setSettingsOpen(false); }} style={{ flex: 1, display: "flex", flexDirection: "column", alignItems: "center", gap: 4, cursor: "pointer", color: activeTab === "home" ? "#fff" : "rgba(255,255,255,0.5)" }}>
              <img src="visual_elements/nav_bar_bottom/noun-home-button-8216844-FFFFFF.png" style={{ width: 24, height: 24, opacity: activeTab === "home" ? 1 : 0.5 }} />
              <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, fontWeight: 700, letterSpacing: 0.5 }}>HOME</span>
            </div>
            {/* LISTEN */}
            <div onClick={() => { setActiveTab("listen"); setListenView("landing"); setView("main"); setMainSearchOpen(false); setMainSearch(""); setLivePlayerOpen(false); setSettingsOpen(false); }} style={{ flex: 1, display: "flex", flexDirection: "column", alignItems: "center", gap: 4, cursor: "pointer", color: activeTab === "listen" ? "#fff" : "rgba(255,255,255,0.5)" }}>
              <img src="visual_elements/nav_bar_bottom/noun-headphone-6065706-FFFFFF.png" style={{ width: 24, height: 24, opacity: activeTab === "listen" ? 1 : 0.5 }} />
              <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, fontWeight: 700, letterSpacing: 0.5 }}>LISTEN</span>
            </div>
            {/* LIVE — center slot, red circle */}
            <div onClick={triggerLive} style={{ flex: 1, display: "flex", flexDirection: "column", alignItems: "center", gap: 3, cursor: "pointer" }}>
              <div style={{
                width: 44, height: 44, borderRadius: "50%",
                background: "linear-gradient(145deg, #d32f2f, #b71c1c)",
                display: "flex", alignItems: "center", justifyContent: "center",
                boxShadow: "0 2px 8px rgba(211,47,47,0.4)",
              }}>
                <StaticWaveform animating={liveAnimating} />
              </div>
              <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, fontWeight: 700, letterSpacing: 0.5, color: activeTab === "live" ? "#fff" : "rgba(255,255,255,0.5)" }}>LIVE</span>
            </div>
            {/* WATCH */}
            <div onClick={() => { setActiveTab("watch"); setWatchView("home"); setSelectedSeries(null); setLivePlayerOpen(false); setSettingsOpen(false); }} style={{ flex: 1, display: "flex", flexDirection: "column", alignItems: "center", gap: 4, cursor: "pointer", color: activeTab === "watch" ? "#fff" : "rgba(255,255,255,0.5)" }}>
              <img src="visual_elements/nav_bar_bottom/noun-play-6444203-FFFFFF.png" style={{ width: 24, height: 24, opacity: activeTab === "watch" ? 1 : 0.5 }} />
              <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, fontWeight: 700, letterSpacing: 0.5 }}>WATCH</span>
            </div>
            {/* PRAY */}
            <div onClick={() => { setActiveTab("pray"); setLivePlayerOpen(false); setSettingsOpen(false); }} style={{ flex: 1, display: "flex", flexDirection: "column", alignItems: "center", gap: 4, cursor: "pointer", color: activeTab === "pray" ? "#fff" : "rgba(255,255,255,0.5)" }}>
              <img src="visual_elements/nav_bar_bottom/noun-pray-1480648-FFFFFF.png" style={{ width: 24, height: 24, opacity: activeTab === "pray" ? 1 : 0.5 }} />
              <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, fontWeight: 700, letterSpacing: 0.5 }}>PRAY</span>
            </div>
          </div>

          {/* Live Player overlay */}
          {livePlayerOpen && (
            <div style={{ position: "absolute", top: 0, left: 0, right: 0, bottom: 72, zIndex: 100, background: "linear-gradient(180deg, #058340 0%, #112a15 100%)", display: "flex", flexDirection: "column", alignItems: "center" }}>
              {/* Status bar strip — transparent PNG overlaid on gradient */}
              <img src="current_app_state/big_livestream_player_top_strip.PNG" style={{ position: "absolute", top: 0, left: 0, width: "100%", zIndex: 1, pointerEvents: "none" }} />
              {/* Spacer to push content below status bar */}
              <div style={{ height: 44, flexShrink: 0, width: "100%" }} />
              {/* Down chevron — tap to close */}
              <div onClick={() => setLivePlayerOpen(false)} style={{ display: "flex", justifyContent: "center", paddingTop: 10, paddingBottom: 4, cursor: "pointer", width: "100%" }}>
                <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="rgba(255,255,255,0.6)" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
              </div>
              {/* NOW PLAYING */}
              <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 12, fontWeight: 700, letterSpacing: 3, color: "rgba(255,255,255,0.6)", textTransform: "uppercase", marginTop: 6 }}>Now Playing</div>
              {/* Show art */}
              <div style={{ marginTop: 20, flexShrink: 0 }}>
                <img src="rr_shows/morning_air.jpg" style={{ width: 258, height: 258, borderRadius: 14, boxShadow: "0 12px 48px rgba(0,0,0,0.5)", objectFit: "cover", display: "block" }} />
              </div>
              {/* LISTEN LIVE */}
              <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 13, fontWeight: 700, letterSpacing: 3, color: "rgba(255,255,255,0.6)", textTransform: "uppercase", marginTop: 28 }}>Listen Live</div>
              {/* Show title */}
              <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 24, fontWeight: 700, color: "#fff", marginTop: 8, lineHeight: 1.2, textAlign: "center", padding: "0 32px" }}>Morning Air</div>
              {/* Share icon */}
              <div style={{ marginTop: 16, cursor: "pointer" }}>
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="rgba(255,255,255,0.6)" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" y1="2" x2="12" y2="15"/></svg>
              </div>
              {/* Pause button */}
              <div style={{ marginTop: 28 }}>
                <div style={{ width: 82, height: 82, borderRadius: "50%", background: "#fff", display: "flex", alignItems: "center", justifyContent: "center", boxShadow: "0 6px 24px rgba(0,0,0,0.4)", cursor: "pointer" }}>
                  <svg width="34" height="34" viewBox="0 0 24 24" fill="#1a5c28" stroke="none"><rect x="5" y="3" width="5" height="18" rx="1.5"/><rect x="14" y="3" width="5" height="18" rx="1.5"/></svg>
                </div>
              </div>
            </div>
          )}

          {/* ═══ VIDEO PLAYER OVERLAY ═══ */}
          {videoPlayerOpen && videoPlayerData && (
            <div style={{
              position: "absolute", top: 0, left: 0, right: 0, bottom: 0,
              zIndex: 200, background: vP.bg,
              display: "flex", flexDirection: "column",
            }}>
              <PlayerStatusBar />
              <PlayerBackButton onClick={closeVideoPlayer} />
              <div style={{ flex: 1 }} />
              <PlayerVideoTile />
              <div style={{ flex: 1 }} />
              {/* Title + series name */}
              <div style={{ padding: "0 20px", flexShrink: 0 }}>
                <div style={{ color: vP.text1, fontSize: 19, fontWeight: 700, fontFamily: "system-ui", lineHeight: 1.25, letterSpacing: "-0.01em" }}>
                  {videoPlayerData.title}
                </div>
                <div style={{ color: vP.text2, fontSize: 13, fontFamily: "system-ui", marginTop: 4 }}>
                  {videoPlayerData.series}
                </div>
              </div>
              <PlayerScrubBar />
              {/* Transport controls */}
              <div style={{ display: "flex", alignItems: "center", justifyContent: "center", gap: 40, padding: "10px 20px 20px", flexShrink: 0 }}>
                <PlayerSkip />
                <PlayerPlayPause isPlaying={isPlaying} onToggle={() => setIsPlaying(!isPlaying)} />
                <PlayerSkip fwd />
              </div>
              <PlayerIconRow onPrayer={() => {}} />
            </div>
          )}

        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<AudiobooksApp />);
  </script>
</body>
</html>
