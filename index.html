<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RR Audiobooks Prototype ‚Äî v9</title>
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,400;0,600;0,700;1,400&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { background: #1a1a2e; min-height: 100vh; display: flex; align-items: flex-start; justify-content: center; padding: 20px 0 40px; }
  </style>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useMemo } = React;

    const colors = {
      headerBg: "#3b6fa0",
      cardBg: "#4a7fb3",
      pageBg: "#f5f5f5",
      contentBg: "#ffffff",
      accent: "#3b6fa0",
      text: "#2a2a2a",
      textMuted: "#7a7a7a",
      red: "#d32f2f",
      searchBg: "rgba(255,255,255,0.15)",
      searchBgLight: "#f0f0f0",
    };

    const audiobooks = {
      spiritual: [
        { id: "s1", title: "Mary at the Crossroads of History", author: "Fr. Francis J. Hoffman", narrator: "Fr. Francis J. Hoffman", duration: "3h 38m", color: "#1a3a5c", image: "covers/mary-at-the-crossroads.png",
          summary: "Adam and Eve, our first parents, had free will, and their choices set in motion the entire drama of salvation history. This audiobook traces the thread of Mary's role from Genesis through Revelation, showing how the Blessed Mother stands at every crossroads of human history as a guide, intercessor, and model of faith.",
          credits: { producer: "Michael Torres", director: "Sarah Chen", editor: "James Whitfield", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
        { id: "s2", title: "Confessions", author: "St. Augustine of Hippo", narrator: "Demetrios Troy", duration: "12h 45m", color: "#5c3a1a", image: "covers/confessions.jpg",
          summary: "One of the most influential works in Western literature, the Confessions traces Augustine's spiritual journey from his sinful youth through his conversion to Christianity. Written as a prayer to God, this autobiography reveals the inner struggles of a brilliant mind wrestling with truth, desire, and grace.",
          credits: { producer: "Michael Torres", director: "Sarah Chen", editor: "Demetrios Troy", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
        { id: "s3", title: "The Interior Castle", author: "St. Teresa of √Åvila", narrator: "Maria Santos", duration: "6h 12m", color: "#3a1a5c", image: "covers/interior-castle.jpg",
          summary: "St. Teresa of √Åvila's masterpiece of mystical theology describes the soul as a castle with seven dwelling places, each representing a stage of spiritual growth. Written for her Carmelite sisters, this work remains one of the most practical and profound guides to the interior life ever composed.",
          credits: { producer: "Michael Torres", director: "James Whitfield", editor: "Maria Santos", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
        { id: "s4", title: "Introduction to the Devout Life", author: "St. Francis de Sales", narrator: "James Whitfield", duration: "8h 30m", color: "#1a5c3a", image: "covers/introduction-devout-life.jpg",
          summary: "Written originally as a series of letters of spiritual direction, St. Francis de Sales composed this timeless guide to show that holiness is possible for everyone, not just monks and nuns. Practical, warm, and deeply human, it covers prayer, the sacraments, temptation, and the virtues needed for daily Christian living.",
          credits: { producer: "Sarah Chen", director: "Michael Torres", editor: "James Whitfield", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
        { id: "s5", title: "Story of a Soul", author: "St. Th√©r√®se of Lisieux", narrator: "Catherine Hart", duration: "5h 55m", color: "#5c1a3a", image: "covers/story-of-a-soul.jpg",
          summary: "The autobiography of St. Th√©r√®se of Lisieux, written under obedience to her religious superiors, reveals her 'Little Way' of spiritual childhood ‚Äî a path to holiness through small acts of love and trust in God's mercy. This intimate account became one of the most widely read spiritual books of the twentieth century.",
          credits: { producer: "Michael Torres", director: "Sarah Chen", editor: "Catherine Hart", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
      ],
      fiction: [
        { id: "f1", title: "Brideshead Revisited", author: "Evelyn Waugh", narrator: "James Whitfield", duration: "11h 20m", color: "#2a5a2a", image: "covers/brideshead-revisited.jpg",
          summary: "Charles Ryder's enchantment with the aristocratic Flyte family and their crumbling estate, Brideshead, weaves a story of memory, beauty, faith, and the relentless pursuit of grace. Waugh's masterpiece explores how God works through even the most broken and resistant souls.",
          credits: { producer: "Michael Torres", director: "Sarah Chen", editor: "James Whitfield", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
        { id: "f2", title: "The Power and the Glory", author: "Graham Greene", narrator: "Demetrios Troy", duration: "7h 15m", color: "#4a2a1a", image: "covers/power-and-the-glory.jpg",
          summary: "Set during the anti-clerical purges in 1930s Mexico, Greene's novel follows an unnamed 'whiskey priest' ‚Äî the last remaining clergyman in the state ‚Äî as he flees persecution while struggling with his own sinfulness. A devastating portrait of grace operating through human weakness.",
          credits: { producer: "Sarah Chen", director: "Michael Torres", editor: "Demetrios Troy", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
        { id: "f3", title: "Kristin Lavransdatter", author: "Sigrid Undset", narrator: "Catherine Hart", duration: "18h 40m", color: "#1a3a5c", image: "covers/kristin-lavransdatter.jpg",
          summary: "Nobel Prize-winning epic set in medieval Norway, following Kristin from her sheltered childhood through a passionate and often turbulent marriage, motherhood, and ultimately a life transformed by faith. Undset's trilogy is one of the great Catholic novels of the twentieth century.",
          credits: { producer: "Michael Torres", director: "James Whitfield", editor: "Catherine Hart", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
        { id: "f4", title: "The Lord of the Rings", author: "J.R.R. Tolkien", narrator: "Martin Shaw", duration: "22h 30m", color: "#3a2a1a", image: "covers/lord-of-the-rings.png",
          summary: "Tolkien's epic tale of hobbits, elves, and the struggle against darkness is fundamentally a Catholic work ‚Äî a story of providence, sacrifice, mercy, and the power of the small and humble to change the course of history. The greatest fantasy novel ever written, brought to life in audio.",
          credits: { producer: "Michael Torres", director: "Sarah Chen", editor: "Martin Shaw", sound: "David Park", music: "Anna Kowalski", project: "The Merry Beggars Audio" } },
      ],
    };

    const allBooks = [...audiobooks.spiritual, ...audiobooks.fiction];

    const StaticWaveform = () => (
      <div style={{ display: "flex", alignItems: "center", gap: 2.5, height: 16 }}>
        {[40, 70, 100, 60, 30].map((h, i) => (
          <div key={i} style={{ width: 2.2, height: `${h}%`, background: "#fff", borderRadius: 1.5 }} />
        ))}
      </div>
    );

    const SearchBar = ({ value, onChange, placeholder, variant = "light" }) => {
      const isLight = variant === "light";
      return (
        <div style={{
          display: "flex", alignItems: "center", gap: 10, padding: "10px 14px", borderRadius: 10,
          background: isLight ? colors.searchBgLight : colors.searchBg, margin: "0 20px",
        }}>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke={isLight ? colors.textMuted : "rgba(255,255,255,0.5)"} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <circle cx="11" cy="11" r="8" /><line x1="21" y1="21" x2="16.65" y2="16.65" />
          </svg>
          <input type="text" value={value} onChange={(e) => onChange(e.target.value)} placeholder={placeholder}
            style={{ background: "none", border: "none", outline: "none", fontFamily: "'DM Sans', sans-serif", fontSize: 13, color: isLight ? colors.text : "#fff", width: "100%" }} />
          {value && (
            <div onClick={() => onChange("")} style={{
              width: 20, height: 20, borderRadius: "50%", background: isLight ? "#ddd" : "rgba(255,255,255,0.2)",
              display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer", fontSize: 10,
              color: isLight ? colors.textMuted : "rgba(255,255,255,0.6)",
            }}>‚úï</div>
          )}
        </div>
      );
    };

    const SquareCover = ({ book, onClick }) => (
      <div style={{ flexShrink: 0, width: 140, cursor: "pointer" }} onClick={onClick}>
        <div style={{
          width: 140, height: 140, borderRadius: 10, position: "relative", overflow: "hidden",
          boxShadow: "0 4px 14px rgba(0,0,0,0.2)", background: book.color,
        }}>
          <img src={book.image} alt={book.title} style={{ width: "100%", height: "100%", objectFit: "cover", display: "block" }} />
        </div>
        <div style={{ marginTop: 8, fontFamily: "'DM Sans', sans-serif", fontSize: 11, color: colors.text, fontWeight: 500, lineHeight: 1.3, display: "-webkit-box", WebkitLineClamp: 2, WebkitBoxOrient: "vertical", overflow: "hidden" }}>{book.title}</div>
        <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, color: colors.textMuted, marginTop: 2 }}>Narrated by {book.narrator}</div>
      </div>
    );

    const GridCover = ({ book, onClick }) => (
      <div style={{ width: "calc(50% - 7px)", cursor: "pointer", marginBottom: 18 }} onClick={onClick}>
        <div style={{
          width: "100%", paddingBottom: "100%", borderRadius: 10, position: "relative", overflow: "hidden",
          boxShadow: "0 4px 14px rgba(0,0,0,0.2)", background: book.color,
        }}>
          <img src={book.image} alt={book.title} style={{ position: "absolute", inset: 0, width: "100%", height: "100%", objectFit: "cover" }} />
        </div>
        <div style={{ marginTop: 8, fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: colors.text, fontWeight: 500, lineHeight: 1.3, display: "-webkit-box", WebkitLineClamp: 2, WebkitBoxOrient: "vertical", overflow: "hidden" }}>{book.title}</div>
        <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, color: colors.textMuted, marginTop: 2 }}>Narrated by {book.narrator}</div>
      </div>
    );

    const SearchResultItem = ({ book, onClick }) => (
      <div onClick={onClick} style={{ display: "flex", gap: 12, padding: "10px 20px", cursor: "pointer", borderBottom: "1px solid #f0f0f0" }}>
        <div style={{ width: 50, height: 50, borderRadius: 8, flexShrink: 0, overflow: "hidden", background: book.color }}>
          <img src={book.image} alt={book.title} style={{ width: "100%", height: "100%", objectFit: "cover", display: "block" }} />
        </div>
        <div style={{ flex: 1, minWidth: 0 }}>
          <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 13, color: colors.text, fontWeight: 600, whiteSpace: "nowrap", overflow: "hidden", textOverflow: "ellipsis" }}>{book.title}</div>
          <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 11, color: colors.textMuted, marginTop: 2 }}>{book.author}</div>
          <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 10, color: colors.textMuted, marginTop: 1 }}>{book.duration} ¬∑ {book.narrator}</div>
        </div>
        <div style={{ display: "flex", alignItems: "center" }}>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke={colors.textMuted} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="9 18 15 12 9 6" /></svg>
        </div>
      </div>
    );

    const HorizontalRow = ({ title, subtitle, books, onSeeAll, onBookClick }) => (
      <div style={{ marginBottom: 24 }}>
        <div style={{ marginBottom: 14, padding: "0 20px" }}>
          <div style={{ display: "flex", justifyContent: "space-between", alignItems: "baseline" }}>
            <div style={{ fontFamily: "'Crimson Pro', serif", fontSize: 19, fontWeight: 700, color: colors.text, letterSpacing: -0.3 }}>{title}</div>
            <div onClick={onSeeAll} style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 11, color: colors.accent, fontWeight: 600, cursor: "pointer", letterSpacing: 0.3 }}>See All ‚Üí</div>
          </div>
          {subtitle && <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 11, color: colors.textMuted, marginTop: 2 }}>{subtitle}</div>}
        </div>
        <div style={{ display: "flex", gap: 14, overflowX: "auto", padding: "0 20px 8px", scrollbarWidth: "none", msOverflowStyle: "none" }}>
          {books.map((book, i) => <SquareCover key={i} book={book} onClick={() => onBookClick(book)} />)}
        </div>
      </div>
    );

    const TitleDetailPage = ({ book, onBack, onSuggest }) => (
      <div style={{ overflowY: "auto", height: "100%", paddingBottom: 140, scrollbarWidth: "none" }}>
        <div style={{
          background: `linear-gradient(180deg, ${colors.cardBg} 0%, ${colors.headerBg} 100%)`,
          padding: "16px 20px 28px", display: "flex", flexDirection: "column", alignItems: "center",
        }}>
          <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", width: "100%", marginBottom: 20 }}>
            <div onClick={onBack} style={{ width: 34, height: 34, borderRadius: "50%", background: "rgba(255,255,255,0.2)", display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer" }}>
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#fff" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><polyline points="15 18 9 12 15 6" /></svg>
            </div>
            <div style={{ width: 34, height: 34, borderRadius: "50%", background: "rgba(255,255,255,0.2)", display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer" }}>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#fff" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" /><polyline points="16 6 12 2 8 6" /><line x1="12" y1="2" x2="12" y2="15" /></svg>
            </div>
          </div>
          <div style={{ width: 180, height: 180, borderRadius: 12, overflow: "hidden", boxShadow: "0 8px 30px rgba(0,0,0,0.35)", background: book.color }}>
            <img src={book.image} alt={book.title} style={{ width: "100%", height: "100%", objectFit: "cover", display: "block" }} />
          </div>
          <div style={{ marginTop: 16, padding: "6px 18px", borderRadius: 20, border: "1.5px solid rgba(255,255,255,0.4)", cursor: "pointer", display: "flex", alignItems: "center", gap: 6 }}>
            <span style={{ fontSize: 10, color: "#fff" }}>‚ñ∂</span>
            <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: "#fff", fontWeight: 500 }}>Preview</span>
          </div>
          <h2 style={{ fontFamily: "'Crimson Pro', serif", fontSize: 24, fontWeight: 700, color: "#fff", textAlign: "center", margin: "16px 0 4px", lineHeight: 1.2 }}>{book.title}</h2>
          <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 13, color: "rgba(255,255,255,0.6)" }}>{book.duration}</span>
          <div style={{ display: "flex", marginTop: 16, width: "100%", justifyContent: "center" }}>
            <div style={{ textAlign: "center", flex: 1, borderRight: "1px solid rgba(255,255,255,0.2)", paddingRight: 16 }}>
              <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, color: "rgba(255,255,255,0.5)", letterSpacing: 1, textTransform: "uppercase", marginBottom: 4 }}>By</div>
              <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 13, color: "#fff", fontWeight: 500 }}>{book.author}</div>
            </div>
            <div style={{ textAlign: "center", flex: 1, paddingLeft: 16 }}>
              <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, color: "rgba(255,255,255,0.5)", letterSpacing: 1, textTransform: "uppercase", marginBottom: 4 }}>Narrated By</div>
              <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 13, color: "#fff", fontWeight: 500 }}>{book.narrator}</div>
            </div>
          </div>
        </div>
        <div style={{ background: colors.contentBg, borderRadius: "20px 20px 0 0", marginTop: -12, position: "relative", zIndex: 2, padding: "24px 20px" }}>
          <div style={{
            padding: "14px 0", borderRadius: 30, background: colors.accent, textAlign: "center",
            cursor: "pointer", marginBottom: 24, boxShadow: "0 2px 10px rgba(59,111,160,0.3)",
          }}>
            <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 14, color: "#fff", fontWeight: 600, display: "flex", alignItems: "center", justifyContent: "center", gap: 8 }}>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#fff" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" /><polyline points="7 10 12 15 17 10" /><line x1="12" y1="15" x2="12" y2="3" /></svg>
              Download to Play
            </span>
          </div>
          <div style={{ marginBottom: 24 }}>
            <h3 style={{ fontFamily: "'Crimson Pro', serif", fontSize: 18, fontWeight: 700, color: colors.text, margin: "0 0 10px" }}>Summary</h3>
            <p style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 13, color: colors.textMuted, lineHeight: 1.65, margin: 0 }}>{book.summary}</p>
          </div>
          <div style={{ height: 1, background: "#e8e8e8", margin: "0 0 24px" }} />
          <div>
            <h3 style={{ fontFamily: "'Crimson Pro', serif", fontSize: 18, fontWeight: 700, color: colors.text, margin: "0 0 16px" }}>Details & Credits</h3>
            {[
              { label: "Producer", value: book.credits.producer },
              { label: "Director", value: book.credits.director },
              { label: "Audio Editor", value: book.credits.editor },
              { label: "Sound Design", value: book.credits.sound },
              { label: "Music", value: book.credits.music },
              { label: "Production", value: book.credits.project },
            ].map((credit, i) => (
              <div key={i} style={{
                display: "flex", justifyContent: "space-between", alignItems: "center",
                padding: "10px 0", borderBottom: i < 5 ? "1px solid #f0f0f0" : "none",
              }}>
                <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: colors.textMuted }}>{credit.label}</span>
                <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: colors.text, fontWeight: 500 }}>{credit.value}</span>
              </div>
            ))}
          </div>
          <div style={{ height: 1, background: "#e8e8e8", margin: "24px 0" }} />
          <div>
            <h3 style={{ fontFamily: "'Crimson Pro', serif", fontSize: 18, fontWeight: 700, color: colors.text, margin: "0 0 14px" }}>You Might Also Enjoy</h3>
            <div style={{ display: "flex", gap: 14 }}>
              {allBooks.filter(b => b.id !== book.id).sort(() => Math.random() - 0.5).slice(0, 2).map((rec, i) => (
                <div key={i} onClick={() => onSuggest(rec)} style={{ flex: 1, cursor: "pointer" }}>
                  <div style={{
                    width: "100%", paddingBottom: "100%", borderRadius: 10, position: "relative", overflow: "hidden",
                    boxShadow: "0 4px 14px rgba(0,0,0,0.2)", background: rec.color,
                  }}>
                    <img src={rec.image} alt={rec.title} style={{ position: "absolute", inset: 0, width: "100%", height: "100%", objectFit: "cover" }} />
                  </div>
                  <div style={{ marginTop: 8, fontFamily: "'DM Sans', sans-serif", fontSize: 11, color: colors.text, fontWeight: 500, lineHeight: 1.3, display: "-webkit-box", WebkitLineClamp: 2, WebkitBoxOrient: "vertical", overflow: "hidden" }}>{rec.title}</div>
                  <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, color: colors.textMuted, marginTop: 2 }}>{rec.duration}</div>
                </div>
              ))}
            </div>
          </div>
        </div>
      </div>
    );

    const PageHeader = ({ title, onBack, rightElement }) => (
      <div style={{ background: colors.headerBg }}>
        <div style={{ display: "flex", alignItems: "center", gap: 12, padding: "16px 20px 14px" }}>
          <div onClick={onBack} style={{
            width: 32, height: 32, borderRadius: "50%", background: "rgba(255,255,255,0.2)",
            display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer",
          }}>
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#fff" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><polyline points="15 18 9 12 15 6" /></svg>
          </div>
          <h1 style={{ fontFamily: "'Crimson Pro', serif", fontSize: 24, fontWeight: 700, color: "#fff", margin: 0, letterSpacing: -0.3, flex: 1 }}>{title}</h1>
          {rightElement}
        </div>
      </div>
    );

    const WireBox = ({ width, height, label, style: extraStyle = {} }) => (
      <div style={{
        width, height, background: "#e8e8e8", border: "1.5px solid #d0d0d0",
        borderRadius: 8, display: "flex", alignItems: "center", justifyContent: "center",
        flexShrink: 0, ...extraStyle,
      }}>
        {label && <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, color: "#b0b0b0", letterSpacing: 0.5 }}>{label}</span>}
      </div>
    );

    const HomeScreen = () => (
      <div style={{ overflowY: "auto", height: "100%", paddingBottom: 140, scrollbarWidth: "none", background: colors.pageBg }} className="hide-scrollbar">

        {/* Promo Banner */}
        <div style={{ margin: "14px 16px 0", background: "#fff", borderRadius: 12, overflow: "hidden", boxShadow: "0 2px 8px rgba(0,0,0,0.08)" }}>
          <div style={{ display: "flex", alignItems: "stretch", minHeight: 120 }}>
            <div style={{ padding: "16px 14px", flex: 1 }}>
              <div style={{ fontFamily: "'Crimson Pro', serif", fontSize: 20, fontWeight: 700, color: colors.text, lineHeight: 1.2, marginBottom: 6 }}>
                Holy Land Pilgrimage<br />with Fr. Rocky
              </div>
              <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 11, color: colors.textMuted, marginBottom: 10 }}>Oct. 2026</div>
              <div style={{ display: "inline-block", padding: "5px 12px", background: colors.accent, borderRadius: 20 }}>
                <span style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 10, fontWeight: 700, color: "#fff", letterSpacing: 0.5 }}>REGISTER NOW ‚Üí</span>
              </div>
            </div>
            <WireBox width={130} height={120} style={{ borderRadius: 0, flexShrink: 0, borderTop: "none", borderRight: "none", borderBottom: "none" }} />
          </div>
        </div>

        {/* Shows Row */}
        <div style={{ padding: "18px 16px 0" }}>
          <div style={{ fontFamily: "'Crimson Pro', serif", fontSize: 18, fontWeight: 700, color: colors.text, marginBottom: 12 }}>Shows</div>
          <div style={{ display: "flex", gap: 12, overflowX: "auto", paddingBottom: 4, scrollbarWidth: "none" }} className="hide-scrollbar">
            {["Daybreak", "The Saints", "Sacred Music"].map((show, i) => (
              <div key={i} style={{ flexShrink: 0, width: 100 }}>
                <WireBox width={100} height={100} style={{ borderRadius: 10 }} />
                <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 11, fontWeight: 600, color: colors.text, marginTop: 6, textAlign: "center" }}>{show}</div>
              </div>
            ))}
          </div>
        </div>

        {/* Featured Article */}
        <div style={{ margin: "18px 16px 0", background: "#fff", borderRadius: 12, overflow: "hidden", boxShadow: "0 2px 8px rgba(0,0,0,0.08)" }}>
          <WireBox width="100%" height={160} style={{ borderRadius: 0, border: "none", borderBottom: "1.5px solid #e0e0e0" }} />
          <div style={{ padding: "12px 14px 14px" }}>
            <div style={{ fontFamily: "'Crimson Pro', serif", fontSize: 18, fontWeight: 700, color: colors.text, lineHeight: 1.3 }}>
              St. Thomas Aquinas' 5 Arguments for the Existence of God
            </div>
          </div>
        </div>

        {/* Ad Banner */}
        <div style={{ margin: "14px 16px 0", background: "#fff", borderRadius: 12, overflow: "hidden", boxShadow: "0 2px 8px rgba(0,0,0,0.08)" }}>
          <div style={{ display: "flex", alignItems: "center", padding: "10px 14px", gap: 12 }}>
            <WireBox width={44} height={44} style={{ borderRadius: 8, flexShrink: 0 }} />
            <div style={{ flex: 1, minWidth: 0 }}>
              <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 11, fontWeight: 700, color: colors.text }}>PRO-LIFE CELL PHONE SERVICE</div>
              <div style={{ fontFamily: "'DM Sans', sans-serif", fontSize: 9, color: colors.textMuted, marginTop: 2 }}>Make the switch at charitymobile.com/patrick</div>
            </div>
            <WireBox width={60} height={36} style={{ marginLeft: "auto", flexShrink: 0, borderRadius: 6 }} />
          </div>
        </div>
      </div>
    );

    function AudiobooksApp() {
      const [activeTab, setActiveTab] = useState("listen");
      const [view, setView] = useState("main");
      const [selectedBook, setSelectedBook] = useState(null);
      const [mainSearch, setMainSearch] = useState("");
      const [categorySearch, setCategorySearch] = useState("");
      const [allTitlesSearch, setAllTitlesSearch] = useState("");
      const [previousView, setPreviousView] = useState("main");

      const openBook = (book) => { setPreviousView(view); setSelectedBook(book); setView("detail"); };
      const goBack = () => {
        if (view === "detail") { setSelectedBook(null); setView(previousView); }
        else { setView("main"); setCategorySearch(""); setAllTitlesSearch(""); }
      };

      const searchBooks = (books, query) => {
        if (!query.trim()) return books;
        const q = query.toLowerCase();
        return books.filter(b => b.title.toLowerCase().includes(q) || b.author.toLowerCase().includes(q) || b.narrator.toLowerCase().includes(q));
      };

      const filteredAll = useMemo(() => mainSearch.trim() ? searchBooks(allBooks, mainSearch) : [], [mainSearch]);
      const filteredAllTitles = useMemo(() => searchBooks(allBooks, allTitlesSearch), [allTitlesSearch]);
      const isSearching = mainSearch.trim().length > 0;

      return (
        <div style={{
          width: 375, height: 812, margin: "20px auto",
          background: (activeTab !== "home" && view === "detail") ? colors.headerBg : colors.pageBg,
          borderRadius: 40, overflow: "hidden", position: "relative",
          boxShadow: "0 20px 60px rgba(0,0,0,0.3), 0 0 0 2px rgba(0,0,0,0.08)",
          fontFamily: "'DM Sans', sans-serif",
        }}>
          <style>{`.hide-scrollbar::-webkit-scrollbar{display:none}input::placeholder{color:${colors.textMuted}!important}.search-dark input::placeholder{color:rgba(255,255,255,0.4)!important}`}</style>

          <img src="current_app_state/current_app_header.png" alt="Relevant Radio header" style={{ width: "100%", display: "block" }} />

          <div style={{ height: 620, overflow: "hidden" }}>
            {activeTab === "home" ? (
              <HomeScreen />
            ) : view === "detail" && selectedBook ? (
              <TitleDetailPage book={selectedBook} onBack={goBack} onSuggest={openBook} />
            ) : (
              <div style={{ overflowY: "auto", height: "100%", paddingBottom: 140, scrollbarWidth: "none" }} className="hide-scrollbar">

                {view === "main" && (
                  <>
                    <PageHeader title="Audiobooks" onBack={() => {}}
                      rightElement={
                        <div onClick={() => { setView("allTitles"); setAllTitlesSearch(""); }} style={{
                          fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: "rgba(255,255,255,0.7)",
                          fontWeight: 600, cursor: "pointer", whiteSpace: "nowrap",
                        }}>All Titles ‚Üí</div>
                      }
                    />
                    <div style={{ background: colors.headerBg, paddingBottom: 16 }} className="search-dark">
                      <SearchBar value={mainSearch} onChange={setMainSearch} placeholder="Search all titles..." variant="dark" />
                    </div>

                    {isSearching ? (
                      <div style={{ background: colors.contentBg, minHeight: 400 }}>
                        <div style={{ padding: "14px 20px 8px", fontFamily: "'DM Sans', sans-serif", fontSize: 12, color: colors.textMuted }}>
                          {filteredAll.length} result{filteredAll.length !== 1 ? "s" : ""} for "{mainSearch}"
                        </div>
                        {filteredAll.length > 0 ? filteredAll.map((book, i) => <SearchResultItem key={i} book={book} onClick={() => openBook(book)} />) : (
                          <div style={{ padding: "40px 20px", textAlign: "center", fontFamily: "'DM Sans', sans-serif", fontSize: 14, color: colors.textMuted }}>No audiobooks found</div>
                        )}
                      </div>
                    ) : (
                      <div style={{ padding: "18px 0 0" }}>
                        <HorizontalRow title="Spiritual Reading" books={audiobooks.spiritual} onSeeAll={() => { setView("allSpiritual"); setCategorySearch(""); }} onBookClick={openBook} />
                        <HorizontalRow title="Classic Fiction" subtitle="from The Merry Beggars" books={audiobooks.fiction} onSeeAll={() => { setView("allFiction"); setCategorySearch(""); }} onBookClick={openBook} />
                      </div>
                    )}
                  </>
                )}

                {(view === "allSpiritual" || view === "allFiction") && (() => {
                  const categoryBooks = view === "allSpiritual" ? audiobooks.spiritual : audiobooks.fiction;
                  const filtered = searchBooks(categoryBooks, categorySearch);
                  return (
                    <>
                      <PageHeader title={view === "allSpiritual" ? "Spiritual Reading" : "Classic Fiction"} onBack={goBack} />
                      <div style={{ background: colors.headerBg, paddingBottom: 16 }} className="search-dark">
                        <SearchBar value={categorySearch} onChange={setCategorySearch} placeholder={`Search ${view === "allSpiritual" ? "spiritual reading" : "fiction"}...`} variant="dark" />
                      </div>
                      {filtered.length > 0 ? (
                        <div style={{ display: "flex", flexWrap: "wrap", gap: 14, padding: "16px 20px" }}>
                          {filtered.map((book, i) => <GridCover key={i} book={book} onClick={() => openBook(book)} />)}
                        </div>
                      ) : (
                        <div style={{ padding: "40px 20px", textAlign: "center", fontFamily: "'DM Sans', sans-serif", fontSize: 14, color: colors.textMuted }}>No titles found</div>
                      )}
                    </>
                  );
                })()}

                {view === "allTitles" && (
                  <>
                    <PageHeader title="All Titles" onBack={goBack} />
                    <div style={{ background: colors.headerBg, paddingBottom: 16 }} className="search-dark">
                      <SearchBar value={allTitlesSearch} onChange={setAllTitlesSearch} placeholder="Search all titles..." variant="dark" />
                    </div>
                    {filteredAllTitles.length > 0 ? (
                      <div style={{ display: "flex", flexWrap: "wrap", gap: 14, padding: "16px 20px" }}>
                        {filteredAllTitles.map((book, i) => <GridCover key={i} book={book} onClick={() => openBook(book)} />)}
                      </div>
                    ) : (
                      <div style={{ padding: "40px 20px", textAlign: "center", fontFamily: "'DM Sans', sans-serif", fontSize: 14, color: colors.textMuted }}>No titles found</div>
                    )}
                  </>
                )}
              </div>
            )}
          </div>

          <div style={{
            position: "absolute", bottom: 68, left: 12, right: 12,
            background: "linear-gradient(135deg, #1b5e20, #2e7d32)", borderRadius: 12, padding: "10px 14px",
            display: "flex", alignItems: "center", justifyContent: "space-between", boxShadow: "0 4px 20px rgba(0,0,0,0.3)", zIndex: 10,
          }}>
            <div style={{ display: "flex", alignItems: "center", gap: 10 }}>
              <div style={{ width: 34, height: 34, borderRadius: 6, background: "rgba(255,255,255,0.15)", display: "flex", alignItems: "center", justifyContent: "center", fontSize: 14 }}>üéôÔ∏è</div>
              <div>
                <div style={{ fontSize: 10, color: "#fff", fontWeight: 600 }}>LISTEN LIVE</div>
                <div style={{ fontSize: 9, color: "rgba(255,255,255,0.6)" }}>The Drew Mariani Show</div>
              </div>
            </div>
            <div style={{ width: 30, height: 30, borderRadius: "50%", background: "rgba(255,255,255,0.2)", display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer", fontSize: 12 }}>‚è∏</div>
          </div>

          <div style={{
            position: "absolute", bottom: 0, left: 0, right: 0, height: 68,
            background: "rgba(6,16,29,0.97)", backdropFilter: "blur(20px)",
            borderTop: "1px solid rgba(255,255,255,0.06)",
            display: "flex", alignItems: "center", paddingBottom: 10, zIndex: 10,
          }}>
            {[
              { id: "home", label: "Home", icon: <svg width="21" height="21" viewBox="0 0 24 24" fill="none" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" /><polyline points="9 22 9 12 15 12 15 22" /></svg> },
              { id: "listen", label: "Listen", icon: <svg width="21" height="21" viewBox="0 0 24 24" fill="none" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 18v-6a9 9 0 0 1 18 0v6" /><path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z" /></svg> },
            ].map((tab) => (
              <div key={tab.id} onClick={() => { setActiveTab(tab.id); if (tab.id === "listen") { setView("main"); } }} style={{
                display: "flex", flexDirection: "column", alignItems: "center", gap: 3,
                cursor: "pointer", opacity: activeTab === tab.id ? 1 : 0.4, flex: 1,
              }}>
                <div style={{ stroke: activeTab === tab.id ? "#5b9bd5" : "#fff" }}>{tab.icon}</div>
                <span style={{ fontSize: 9, color: activeTab === tab.id ? "#5b9bd5" : "#fff", fontWeight: activeTab === tab.id ? 600 : 400 }}>{tab.label}</span>
              </div>
            ))}
            <div style={{ flex: 1 }} />
            {[
              { id: "watch", label: "Watch", icon: <svg width="21" height="21" viewBox="0 0 24 24" fill="none" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="5 3 19 12 5 21 5 3" /></svg> },
              { id: "pray", label: "Pray", icon: <svg width="21" height="21" viewBox="0 0 24 24" fill="none" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M17 3a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2h-1v2.2a5 5 0 0 1-2.6 4.4L12 16.8l-1.4-1.2A5 5 0 0 1 8 11.2V9H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2" /><path d="M12 17v4" /><path d="M8 21h8" /></svg> },
            ].map((tab) => (
              <div key={tab.id} onClick={() => setActiveTab(tab.id)} style={{
                display: "flex", flexDirection: "column", alignItems: "center", gap: 3,
                cursor: "pointer", opacity: activeTab === tab.id ? 1 : 0.4, flex: 1,
              }}>
                <div style={{ stroke: activeTab === tab.id ? "#5b9bd5" : "#fff" }}>{tab.icon}</div>
                <span style={{ fontSize: 9, color: activeTab === tab.id ? "#5b9bd5" : "#fff", fontWeight: activeTab === tab.id ? 600 : 400 }}>{tab.label}</span>
              </div>
            ))}
          </div>
          <div onClick={() => setActiveTab("live")} style={{
            position: "absolute", bottom: 18, left: "50%", transform: "translateX(-50%)",
            display: "flex", flexDirection: "column", alignItems: "center", gap: 3, cursor: "pointer", zIndex: 11,
          }}>
            <div style={{
              width: 38, height: 38, borderRadius: "50%",
              background: "linear-gradient(145deg, #d32f2f, #b71c1c)",
              display: "flex", alignItems: "center", justifyContent: "center",
              boxShadow: "0 2px 8px rgba(211,47,47,0.3)",
            }}>
              <StaticWaveform />
            </div>
            <span style={{ fontSize: 9, color: "#d32f2f", fontWeight: 700, letterSpacing: 0.3 }}>LIVE</span>
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<AudiobooksApp />);
  </script>
</body>
</html>
